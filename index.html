admin: ['dashboard', 'students', 'turmas', 'pedagogico', 'financeiro', 'chamada', 'portaria', 'rh', 'gamificacao', 'configuracoes', 'relatorios'],
            professor: ['dashboard', 'turmas', 'pedagogico', 'chamada', 'gamificacao'],
            financeiro: ['dashboard', 'students', 'financeiro', 'relatorios'],
            rh: ['dashboard', 'rh', 'relatorios'],
            portaria: ['dashboard', 'portaria'],
            aluno: ['dashboard', 'gamificacao']
        };

        // Login
        function handleLogin(event) {
            event.preventDefault();
            
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;
            
            if (systemData.users[email] && systemData.users[email].password === password) {
                currentUser = email;
                currentUserRole = systemData.users[email].role;
                
                // Log da a√ß√£o
                addLog('login', `Login realizado por ${systemData.users[email].name}`);
                
                // Esconde tela de login e mostra app
                document.getElementById('loginScreen').style.display = 'none';
                document.getElementById('mainApp').style.display = 'block';
                
                // Configura interface
                setupUserInterface();
                loadDashboard();
                
                showNotification('Backup criado e baixado com sucesso!', 'success');
        }

        function syncGoogleSheets() {
            showNotification('Sincronizando com Google Sheets...', 'info');
            
            // Simula sincroniza√ß√£o
            setTimeout(() => {
                addLog('sync', 'Sincroniza√ß√£o com Google Sheets realizada');
                showNotification('Sincroniza√ß√£o conclu√≠da com sucesso!', 'success');
            }, 2000);
        }

        // Logout
        function logout() {
            addLog('logout', `Logout realizado por ${systemData.users[currentUser].name}`);
            
            currentUser = null;
            currentUserRole = null;
            
            document.getElementById('mainApp').style.display = 'none';
            document.getElementById('loginScreen').style.display = 'flex';
            
            // Reset form
            document.getElementById('loginForm').reset();
            
            showNotification('Logout realizado com sucesso!', 'info');
        }

        // Inicializa√ß√£o
        document.addEventListener('DOMContentLoaded', function() {
            // Configura data atual nos campos de data
            const today = new Date().toISOString().split('T')[0];
            const dateInput = document.getElementById('attendanceDate');
            if (dateInput) dateInput.value = today;
            
            // Carrega tema salvo
            const savedTheme = localStorage.getItem('darkMode');
            if (savedTheme === 'true') {
                document.body.classList.add('dark-mode');
            }
            
            // Dados iniciais para demonstra√ß√£o
            initializeDemoData();
            
            // Fecha modais clicando fora
            window.onclick = function(event) {
                const modals = document.getElementsByClassName('modal');
                for (let modal of modals) {
                    if (event.target === modal) {
                        modal.style.display = 'none';
                    }
                }
            };
        });

        // Inicializar dados de demonstra√ß√£o
        function initializeDemoData() {
            // Alunos de demonstra√ß√£o
            systemData.students = [
                {
                    ra: '20241001',
                    name: 'Jo√£o Silva',
                    email: 'joao.silva@email.com',
                    course: 'game-design',
                    className: 'Game Design - Noite',
                    status: 'ativo',
                    financialResponsible: 'Maria Silva'
                },
                {
                    ra: '20241002',
                    name: 'Maria Santos',
                    email: 'maria.santos@email.com',
                    course: 'programacao',
                    className: 'Programa√ß√£o - Noturno',
                    status: 'ativo',
                    financialResponsible: 'Jo√£o Santos'
                },
                {
                    ra: '20241003',
                    name: 'Pedro Costa',
                    email: 'pedro.costa@email.com',
                    course: '3d-modeling',
                    className: 'Modelagem 3D - Tarde',
                    status: 'inadimplente',
                    financialResponsible: 'Ana Costa'
                }
            ];
            
            // Gamifica√ß√£o de demonstra√ß√£o
            systemData.gamification.leaderboard = [
                { studentId: '20241001', name: 'Jo√£o Silva', xp: 2450, coins: 245, course: 'game-design' },
                { studentId: '20241002', name: 'Maria Santos', xp: 2100, coins: 180, course: 'programacao' },
                { studentId: '20241003', name: 'Pedro Costa', xp: 1850, coins: 220, course: '3d-modeling' }
            ];
            
            // Turmas de demonstra√ß√£o
            systemData.classes = [
                {
                    id: 'class1',
                    name: 'Game Design - Turma A',
                    course: 'game-design',
                    teacher: 'Maria Silva',
                    schedule: 'Seg/Qua/Sex 19h-22h',
                    capacity: 20,
                    students: ['20241001']
                }
            ];
        }

        // Fun√ß√µes adicionais
        function filterStudents() {
            const search = document.getElementById('studentSearch').value.toLowerCase();
            const statusFilter = document.getElementById('statusFilter').value;
            const courseFilter = document.getElementById('courseFilter').value;
            
            const rows = document.querySelectorAll('#studentsTableBody tr');
            
            rows.forEach(row => {
                const name = row.cells[1].textContent.toLowerCase();
                const status = row.cells[5].textContent.toLowerCase().trim();
                const course = row.cells[3].textContent.toLowerCase();
                
                const matchesSearch = name.includes(search);
                const matchesStatus = !statusFilter || status.includes(statusFilter);
                const matchesCourse = !courseFilter || course.includes(getCourseDisplayName(courseFilter).toLowerCase());
                
                if (matchesSearch && matchesStatus && matchesCourse) {
                    row.style.display = '';
                } else {
                    row.style.display = 'none';
                }
            });
        }

        function generateFinancialReport() {
            showNotification('Relat√≥rio financeiro gerado!', 'success');
        }

        function generateAttendanceReport() {
            showNotification('Relat√≥rio de frequ√™ncia gerado!', 'success');
        }

        function loadAttendance() {
            const attendanceList = document.getElementById('attendanceList');
            if (!attendanceList) return;
            
            attendanceList.innerHTML = '<div class="empty-state"><h3>üìã Selecione uma turma e data</h3><p>Escolha uma turma e data para fazer a chamada dos alunos</p></div>';
        }

        // Salvar classe
        function saveClass(event) {
            event.preventDefault();
            
            const classData = {
                id: 'class' + (systemData.classes.length + 1),
                name: document.getElementById('className').value,
                course: document.getElementById('classCourse').value,
                teacher: document.getElementById('classTeacher').options[document.getElementById('classTeacher').selectedIndex].text,
                capacity: parseInt(document.getElementById('classCapacity').value),
                startDate: document.getElementById('classStartDate').value,
                endDate: document.getElementById('classEndDate').value,
                startTime: document.getElementById('classStartTime').value,
                endTime: document.getElementById('classEndTime').value,
                description: document.getElementById('classDescription').value,
                schedule: `${document.getElementById('classStartTime').value}-${document.getElementById('classEndTime').value}`,
                students: []
            };
            
            systemData.classes.push(classData);
            
            addLog('create', `Turma ${classData.name} criada`);
            closeModal('classModal');
            loadClasses();
            loadDashboard();
            showNotification('Turma criada com sucesso!', 'success');
            
            return false;
        }

        // Salvar funcion√°rio
        function saveEmployee(event) {
            event.preventDefault();
            
            const employeeData = {
                id: 'emp' + (systemData.employees.length + 1),
                name: document.getElementById('employeeName').value,
                email: document.getElementById('employeeEmail').value,
                cpf: document.getElementById('employeeCPF').value,
                birthDate: document.getElementById('employeeBirthDate').value,
                position: document.getElementById('employeePosition').value,
                department: document.getElementById('employeeDepartment').value,
                salary: parseFloat(document.getElementById('employeeSalary').value),
                workHours: parseInt(document.getElementById('employeeWorkHours').value),
                hireDate: document.getElementById('employeeHireDate').value,
                status: document.getElementById('employeeStatus').value,
                phone: document.getElementById('employeePhone').value,
                address: document.getElementById('employeeAddress').value
            };
            
            systemData.employees.push(employeeData);
            
            addLog('create', `Colaborador ${employeeData.name} cadastrado`);
            closeModal('employeeModal');
            loadHR();
            showNotification('Colaborador cadastrado com sucesso!', 'success');
            
            return false;
        }

        // Gerenciar loja
        function loadStore() {
            // Implementar carregamento da loja
            const storeGrid = document.getElementById('storeProductsGrid');
            if (storeGrid) {
                storeGrid.innerHTML = `
                    <div class="store-item">
                        <div style="background: var(--light); width: 80px; height: 80px; margin: 0 auto 10px; display: flex; align-items: center; justify-content: center; border-radius: 8px; font-size: 24px;">üìù</div>
                        <h4>Caneta BIC</h4>
                        <p>50 coins</p>
                        <span class="badge success">Em estoque</span>
                    </div>
                    <div class="store-item">
                        <div style="background: var(--light); width: 80px; height: 80px; margin: 0 auto 10px; display: flex; align-items: center; justify-content: center; border-radius: 8px; font-size: 24px;">üç´</div>
                        <h4>Chocolate</h4>
                        <p>100 coins</p>
                        <span class="badge success">Em estoque</span>
                    </div>
                `;
            }
        }

        function switchStoreTab(tab) {
            const tabs = document.querySelectorAll('.store-tab-content');
            tabs.forEach(t => t.style.display = 'none');
            
            document.getElementById(tab + 'Tab').style.display = 'block';
        }

        function addStoreProduct(event) {
            event.preventDefault();
            
            const productData = {
                name: document.getElementById('productName').value,
                price: parseInt(document.getElementById('productPrice').value),
                category: document.getElementById('productCategory').value,
                stock: parseInt(document.getElementById('productStock').value),
                description: document.getElementById('productDescription').value
            };
            
            systemData.gamification.store.push(productData);
            
            addLog('create', `Produto ${productData.name} adicionado √† loja`);
            showNotification('Produto adicionado √† loja!', 'success');
            loadStore();
            updateGamificationStats();
            
            return false;
        }

        // Relat√≥rios
        function loadReports() {
            // Configurar per√≠odo personalizado
            const reportPeriod = document.getElementById('reportPeriod');
            if (reportPeriod) {
                reportPeriod.onchange = function() {
                    const customRange = document.getElementById('customDateRange');
                    if (this.value === 'custom') {
                        customRange.style.display = 'flex';
                    } else {
                        customRange.style.display = 'none';
                    }
                };
            }
        }

        // Fun√ß√µes de relat√≥rio
        function generateCustomReport() {
            showNotification('Relat√≥rio customizado gerado!', 'success');
        }

        function exportAllData() {
            const allData = {
                students: systemData.students,
                classes: systemData.classes,
                employees: systemData.employees,
                gamification: systemData.gamification,
                logs: systemData.logs,
                exportDate: new Date().toISOString()
            };
            
            const blob = new Blob([JSON.stringify(allData, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            
            const a = document.createElement('a');
            a.href = url;
            a.download = `gamecreators-dados-completos-${new Date().toISOString().split('T')[0]}.json`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            showNotification('Dados exportados com sucesso!', 'success');
        }

        function generateStudentReport() {
            showNotification('Relat√≥rio de alunos gerado!', 'success');
        }

        function generateFinancialDetailedReport() {
            showNotification('Relat√≥rio financeiro detalhado gerado!', 'success');
        }

        function generateAttendanceDetailedReport() {
            showNotification('Relat√≥rio de frequ√™ncia detalhado gerado!', 'success');
        }

        function generatePedagogicalReport() {
            showNotification('Relat√≥rio pedag√≥gico gerado!', 'success');
        }

        function generateHRReport() {
            showNotification('Relat√≥rio de RH gerado!', 'success');
        }

        function generateGamificationReport() {
            showNotification('Relat√≥rio de gamifica√ß√£o gerado!', 'success');
        }

        function buildCustomReport() {
            const reportType = document.getElementById('reportType').value;
            const reportPeriod = document.getElementById('reportPeriod').value;
            
            showNotification(`Relat√≥rio de ${reportType} para ${reportPeriod} criado!`, 'success');
        }

        // Placeholder functions para funcionalidades futuras
        function editStudent(ra) { showNotification('Funcionalidade em desenvolvimento', 'info'); }
        function deleteStudent(ra) { 
            if (currentUserRole !== 'admin') {
                showNotification('Apenas administradores podem excluir registros!', 'error');
                return;
            }
            showNotification('Funcionalidade em desenvolvimento', 'info'); 
        }
        function viewStudentFolder(ra) { showNotification('Funcionalidade em desenvolvimento', 'info'); }
        function editClass(id) { showNotification('Funcionalidade em desenvolvimento', 'info'); }
        function deleteClass(id) { 
            if (currentUserRole !== 'admin') {
                showNotification('Apenas administradores podem excluir registros!', 'error');
                return;
            }
            showNotification('Funcionalidade em desenvolvimento', 'info'); 
        }
        function viewClassStudents(id) { showNotification('Funcionalidade em desenvolvimento', 'info'); }
        function editEmployee(name) { showNotification('Funcionalidade em desenvolvimento', 'info'); }
        function viewEmployeeDetails(name) { showNotification('Funcionalidade em desenvolvimento', 'info'); }
        function resetUserPassword(email) { showNotification('Senha resetada para: 123456', 'success'); }
        function deleteUser(email) { 
            if (currentUserRole !== 'admin') {
                showNotification('Apenas administradores podem gerenciar usu√°rios!', 'error');
                return;
            }
            showNotification('Usu√°rio removido!', 'info'); 
        }
        function filterLogs() { showNotification('Logs filtrados!', 'info'); }
        function restoreBackup() { showNotification('Funcionalidade em desenvolvimento', 'info'); }
        function resetPassword() { showNotification('Todas as senhas resetadas para: 123456', 'success'); }
    </script>
</body>
</html>('Login realizado com sucesso!', 'success');
            } else {
                showNotification('Email ou senha incorretos!', 'error');
            }
        }

        // Configurar interface baseada no perfil
        function setupUserInterface() {
            const userInfo = systemData.users[currentUser];
            document.getElementById('userWelcome').textContent = `Bem-vindo, ${userInfo.name}!`;
            document.getElementById('userRole').textContent = getRoleDisplayName(userInfo.role);
            
            // Configurar abas dispon√≠veis
            setupNavigation();
        }

        // Configurar navega√ß√£o
        function setupNavigation() {
            const navTabs = document.getElementById('navTabs');
            navTabs.innerHTML = '';
            
            const availableModules = moduleAccess[currentUserRole] || [];
            const moduleNames = {
                dashboard: 'üìä Dashboard',
                students: 'üë• Alunos',
                turmas: 'üè´ Turmas',
                pedagogico: 'üìö Pedag√≥gico',
                financeiro: 'üí∞ Financeiro',
                chamada: 'üìã Chamada',
                portaria: 'üö™ Portaria',
                rh: 'üë• RH',
                gamificacao: 'üéÆ Gamifica√ß√£o',
                configuracoes: '‚öôÔ∏è Configura√ß√µes',
                relatorios: 'üìä Relat√≥rios'
            };
            
            availableModules.forEach(module => {
                const tab = document.createElement('button');
                tab.className = 'nav-tab';
                tab.textContent = moduleNames[module];
                tab.onclick = () => switchTab(module);
                if (module === 'dashboard') tab.classList.add('active');
                navTabs.appendChild(tab);
            });
        }

        // Trocar aba
        function switchTab(tabName) {
            // Remove active de todas as abas
            document.querySelectorAll('.nav-tab').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
            
            // Ativa aba selecionada
            event.target.classList.add('active');
            document.getElementById(tabName).classList.add('active');
            
            // Carrega dados espec√≠ficos da aba
            loadTabData(tabName);
        }

        // Trocar aba por ID
        function switchTabById(tabName) {
            const availableModules = moduleAccess[currentUserRole] || [];
            if (!availableModules.includes(tabName)) {
                showNotification('Voc√™ n√£o tem permiss√£o para acessar este m√≥dulo!', 'error');
                return;
            }
            
            // Remove active de todas as abas
            document.querySelectorAll('.nav-tab').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
            
            // Ativa aba selecionada
            const targetTab = Array.from(document.querySelectorAll('.nav-tab')).find(tab => 
                tab.onclick.toString().includes(tabName)
            );
            if (targetTab) targetTab.classList.add('active');
            
            document.getElementById(tabName).classList.add('active');
            loadTabData(tabName);
        }

        // Carregar dados da aba
        function loadTabData(tabName) {
            switch(tabName) {
                case 'dashboard':
                    loadDashboard();
                    break;
                case 'students':
                    loadStudents();
                    break;
                case 'turmas':
                    loadClasses();
                    break;
                case 'financeiro':
                    loadFinancial();
                    break;
                case 'chamada':
                    loadAttendance();
                    break;
                case 'portaria':
                    loadPortaria();
                    break;
                case 'rh':
                    loadHR();
                    break;
                case 'gamificacao':
                    loadGamification();
                    break;
                case 'configuracoes':
                    loadSettings();
                    break;
                case 'relatorios':
                    loadReports();
                    break;
            }
        }

        // Dashboard
        function loadDashboard() {
            // Atualiza estat√≠sticas
            document.getElementById('totalStudents').textContent = systemData.students.length;
            document.getElementById('activeStudents').textContent = systemData.students.filter(s => s.status === 'ativo').length;
            document.getElementById('totalClasses').textContent = systemData.classes.length;
            document.getElementById('overduePayments').textContent = systemData.payments.filter(p => p.status === 'vencido').length;
            
            // Calcula XP total
            const totalXP = systemData.gamification.leaderboard.reduce((sum, student) => sum + (student.xp || 0), 0);
            document.getElementById('totalXP').textContent = totalXP;
            
            // Resumo financeiro simulado
            document.getElementById('totalRevenue').textContent = 'R$ 45.600,00';
            document.getElementById('totalExpected').textContent = 'R$ 52.000,00';
            document.getElementById('totalOverdue').textContent = 'R$ 6.400,00';
        }

        // Gest√£o de Alunos
        function loadStudents() {
            const tableBody = document.getElementById('studentsTableBody');
            tableBody.innerHTML = '';
            
            systemData.students.forEach(student => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${student.ra}</td>
                    <td>${student.name}</td>
                    <td>${student.email}</td>
                    <td>${getCourseDisplayName(student.course)}</td>
                    <td>${student.className}</td>
                    <td><span class="badge ${getStatusClass(student.status)}">${student.status}</span></td>
                    <td>${student.financialResponsible}</td>
                    <td>
                        <button class="btn btn-sm" onclick="editStudent('${student.ra}')">‚úèÔ∏è</button>
                        <button class="btn btn-sm btn-warning" onclick="viewStudentFolder('${student.ra}')">üìÅ</button>
                        ${currentUserRole === 'admin' ? `<button class="btn btn-sm btn-danger" onclick="deleteStudent('${student.ra}')">üóëÔ∏è</button>` : ''}
                    </td>
                `;
                tableBody.appendChild(row);
            });
        }

        // Salvar Aluno
        function saveStudent(event) {
            event.preventDefault();
            
            const studentData = {
                ra: generateRA(),
                name: document.getElementById('studentName').value,
                email: document.getElementById('studentEmail').value,
                cpf: document.getElementById('studentCPF').value,
                birthDate: document.getElementById('studentBirthDate').value,
                phone: document.getElementById('studentPhone').value,
                whatsapp: document.getElementById('studentWhatsApp').value,
                course: document.getElementById('studentCourse').value,
                className: document.getElementById('studentClass').options[document.getElementById('studentClass').selectedIndex].text,
                financialResponsible: document.getElementById('financialResponsible').value,
                responsibleCPF: document.getElementById('responsibleCPF').value,
                paymentPlan: document.getElementById('paymentPlan').value,
                status: document.getElementById('studentStatus').value,
                notes: document.getElementById('studentNotes').value,
                enrollmentDate: new Date().toISOString().split('T')[0],
                folder: createStudentFolder()
            };
            
            systemData.students.push(studentData);
            
            // Cria entrada na gamifica√ß√£o
            systemData.gamification.leaderboard.push({
                studentId: studentData.ra,
                name: studentData.name,
                xp: 0,
                coins: 0,
                course: studentData.course
            });
            
            addLog('create', `Aluno ${studentData.name} cadastrado com RA ${studentData.ra}`);
            closeModal('studentModal');
            loadStudents();
            loadDashboard();
            showNotification('Aluno cadastrado com sucesso!', 'success');
            
            return false;
        }

        // Gerar RA autom√°tico
        function generateRA() {
            const year = new Date().getFullYear();
            const sequence = (systemData.students.length + 1).toString().padStart(4, '0');
            return `${year}${sequence}`;
        }

        // Criar pasta do aluno
        function createStudentFolder() {
            return {
                documents: [],
                contracts: [],
                declarations: [],
                others: []
            };
        }

        // Gamifica√ß√£o
        function loadGamification() {
            loadLeaderboard();
            loadStore();
            updateGamificationStats();
        }

        function loadLeaderboard() {
            const leaderboardList = document.getElementById('leaderboardList');
            if (!leaderboardList) return;
            
            leaderboardList.innerHTML = '';
            
            // Ordena por XP
            const sortedStudents = [...systemData.gamification.leaderboard].sort((a, b) => (b.xp || 0) - (a.xp || 0));
            
            sortedStudents.forEach((student, index) => {
                const li = document.createElement('li');
                li.className = 'ranking-item';
                
                const positionClass = index === 0 ? 'first' : index === 1 ? 'second' : index === 2 ? 'third' : '';
                
                li.innerHTML = `
                    <div style="display: flex; align-items: center; gap: 15px;">
                        <div class="ranking-position ${positionClass}">${index + 1}¬∫</div>
                        <div>
                            <strong>${student.name}</strong>
                            <div style="font-size: 12px; color: #666;">${getCourseDisplayName(student.course)}</div>
                        </div>
                    </div>
                    <div style="text-align: right;">
                        <div style="font-weight: bold; color: var(--gold);">${student.xp || 0} XP</div>
                        <div style="font-size: 12px; color: #666;">${student.coins || 0} coins</div>
                    </div>
                `;
                
                leaderboardList.appendChild(li);
            });
        }

        function updateGamificationStats() {
            const totalXP = systemData.gamification.leaderboard.reduce((sum, student) => sum + (student.xp || 0), 0);
            const totalCoins = systemData.gamification.leaderboard.reduce((sum, student) => sum + (student.coins || 0), 0);
            const activeUsers = systemData.gamification.leaderboard.filter(student => (student.xp || 0) > 0).length;
            
            const totalXPElement = document.getElementById('totalXPDetailed');
            const totalCoinsElement = document.getElementById('totalCoins');
            const activeUsersElement = document.getElementById('activeGamificationUsers');
            const storeProductsElement = document.getElementById('storeProducts');
            
            if (totalXPElement) totalXPElement.textContent = totalXP.toLocaleString();
            if (totalCoinsElement) totalCoinsElement.textContent = totalCoins.toLocaleString();
            if (activeUsersElement) activeUsersElement.textContent = activeUsers;
            if (storeProductsElement) storeProductsElement.textContent = systemData.gamification.store.length;
        }

        // Gest√£o de Turmas
        function loadClasses() {
            const classesGrid = document.getElementById('classesGrid');
            if (!classesGrid) return;
            
            classesGrid.innerHTML = '';
            
            document.getElementById('totalClassesDetail').textContent = systemData.classes.length;
            document.getElementById('totalStudentsInClasses').textContent = systemData.students.length;
            document.getElementById('totalTeachers').textContent = '5';
            
            systemData.classes.forEach(classItem => {
                const card = document.createElement('div');
                card.className = 'card';
                card.innerHTML = `
                    <h3>${classItem.name}</h3>
                    <p><strong>Curso:</strong> ${getCourseDisplayName(classItem.course)}</p>
                    <p><strong>Professor:</strong> ${classItem.teacher}</p>
                    <p><strong>Hor√°rio:</strong> ${classItem.schedule}</p>
                    <p><strong>Alunos:</strong> ${classItem.students?.length || 0}/${classItem.capacity}</p>
                    <div class="class-actions">
                        <button class="btn btn-sm" onclick="editClass('${classItem.id}')">‚úèÔ∏è Editar</button>
                        <button class="btn btn-sm btn-success" onclick="viewClassStudents('${classItem.id}')">üë• Alunos</button>
                        ${currentUserRole === 'admin' ? `<button class="btn btn-sm btn-danger" onclick="deleteClass('${classItem.id}')">üóëÔ∏è Excluir</button>` : ''}
                    </div>
                `;
                classesGrid.appendChild(card);
            });
        }

        // Gest√£o Financeira
        function loadFinancial() {
            loadFinancialStats();
            loadOverdueStudents();
        }

        function loadFinancialStats() {
            // Simula dados financeiros
            document.getElementById('monthlyRevenue').textContent = 'R$ 45.600,00';
            document.getElementById('monthlyExpected').textContent = 'R$ 52.000,00';
            document.getElementById('monthlyOverdue').textContent = 'R$ 6.400,00';
            document.getElementById('nextDue').textContent = 'R$ 28.800,00';
        }

        function loadOverdueStudents() {
            const tableBody = document.getElementById('overdueStudentsBody');
            if (!tableBody) return;
            
            tableBody.innerHTML = `
                <tr>
                    <td>Jo√£o Silva</td>
                    <td>Game Design</td>
                    <td>2</td>
                    <td>R$ 800,00</td>
                    <td>15 dias</td>
                    <td>
                        <button class="btn btn-sm btn-warning">üìû Contatar</button>
                        <button class="btn btn-sm btn-danger">üö´ Suspender</button>
                    </td>
                </tr>
                <tr>
                    <td>Maria Santos</td>
                    <td>Programa√ß√£o</td>
                    <td>1</td>
                    <td>R$ 500,00</td>
                    <td>8 dias</td>
                    <td>
                        <button class="btn btn-sm btn-warning">üìû Contatar</button>
                        <button class="btn btn-sm btn-danger">üö´ Suspender</button>
                    </td>
                </tr>
            `;
        }

        // RH
        function loadHR() {
            loadEmployees();
            loadPayroll();
        }

        function loadEmployees() {
            const employeeGrid = document.getElementById('employeeGrid');
            if (!employeeGrid) return;
            
            employeeGrid.innerHTML = '';
            
            // Dados simulados de colaboradores
            const employees = [
                { name: 'Maria Silva', position: 'Professora', department: 'Pedag√≥gico', status: 'ativo' },
                { name: 'Jo√£o Santos', position: 'Professor', department: 'Pedag√≥gico', status: 'ativo' },
                { name: 'Ana Costa', position: 'Coordenadora', department: 'Pedag√≥gico', status: 'ativo' },
                { name: 'Carlos Lima', position: 'Assistente Financeiro', department: 'Financeiro', status: 'ativo' },
                { name: 'Lucia Pereira', position: 'Analista de RH', department: 'RH', status: 'ferias' }
            ];
            
            employees.forEach(employee => {
                const card = document.createElement('div');
                card.className = 'card';
                card.innerHTML = `
                    <h4>${employee.name}</h4>
                    <p><strong>Cargo:</strong> ${employee.position}</p>
                    <p><strong>Departamento:</strong> ${employee.department}</p>
                    <p><span class="badge ${getStatusClass(employee.status)}">${employee.status}</span></p>
                    <div class="employee-actions">
                        <button class="btn btn-sm" onclick="editEmployee('${employee.name}')">‚úèÔ∏è Editar</button>
                        <button class="btn btn-sm btn-success" onclick="viewEmployeeDetails('${employee.name}')">üëÅÔ∏è Detalhes</button>
                    </div>
                `;
                employeeGrid.appendChild(card);
            });
        }

        function loadPayroll() {
            const payrollTableBody = document.getElementById('payrollTableBody');
            if (!payrollTableBody) return;
            
            payrollTableBody.innerHTML = `
                <tr>
                    <td>Maria Silva</td>
                    <td>Professora</td>
                    <td>R$ 3.500,00</td>
                    <td>R$ 200,00</td>
                    <td>R$ 150,00</td>
                    <td>R$ 3.550,00</td>
                    <td><span class="badge success">Pago</span></td>
                </tr>
                <tr>
                    <td>Jo√£o Santos</td>
                    <td>Professor</td>
                    <td>R$ 3.500,00</td>
                    <td>R$ 0,00</td>
                    <td>R$ 150,00</td>
                    <td>R$ 3.350,00</td>
                    <td><span class="badge warning">Pendente</span></td>
                </tr>
            `;
        }

        // Portaria
        function loadPortaria() {
            loadTodayEntries();
            loadCurrentStudents();
        }

        function loadTodayEntries() {
            const todayEntries = document.getElementById('todayEntries');
            if (!todayEntries) return;
            
            todayEntries.innerHTML = `
                <div class="portal-entry">
                    <strong>08:30</strong> - Jo√£o Silva (RA: 20241001) - üü¢ ENTRADA
                </div>
                <div class="portal-exit">
                    <strong>12:00</strong> - Maria Santos (RA: 20241002) - üî¥ SA√çDA
                </div>
                <div class="portal-entry">
                    <strong>14:00</strong> - Pedro Costa (RA: 20241003) - üü¢ ENTRADA
                </div>
            `;
        }

        function loadCurrentStudents() {
            const currentList = document.getElementById('currentStudentsList');
            if (!currentList) return;
            
            currentList.innerHTML = `
                <div class="current-student">Jo√£o Silva - Game Design - Entrada: 08:30</div>
                <div class="current-student">Pedro Costa - Programa√ß√£o - Entrada: 14:00</div>
                <div class="current-student">Ana Lima - Modelagem 3D - Entrada: 19:00</div>
            `;
        }

        // Fun√ß√µes de Entrada/Sa√≠da
        function registerEntry() {
            const ra = document.getElementById('studentRA').value;
            if (!ra) {
                showNotification('Digite o RA do aluno!', 'warning');
                return;
            }
            
            const time = new Date().toLocaleTimeString('pt-BR', { hour: '2-digit', minute: '2-digit' });
            addLog('portaria', `Entrada registrada - RA: ${ra} √†s ${time}`);
            showNotification('Entrada registrada com sucesso!', 'success');
            
            document.getElementById('studentRA').value = '';
            loadTodayEntries();
            loadCurrentStudents();
        }

        function registerExit() {
            const ra = document.getElementById('studentRA').value;
            if (!ra) {
                showNotification('Digite o RA do aluno!', 'warning');
                return;
            }
            
            const time = new Date().toLocaleTimeString('pt-BR', { hour: '2-digit', minute: '2-digit' });
            addLog('portaria', `Sa√≠da registrada - RA: ${ra} √†s ${time}`);
            showNotification('Sa√≠da registrada com sucesso!', 'success');
            
            document.getElementById('studentRA').value = '';
            loadTodayEntries();
            loadCurrentStudents();
        }

        function toggleQRScanner() {
            const scanner = document.getElementById('qrScanner');
            scanner.style.display = scanner.style.display === 'none' ? 'flex' : 'none';
        }

        // Configura√ß√µes
        function loadSettings() {
            loadUsersList();
            loadSystemLogs();
        }

        function loadUsersList() {
            const usersList = document.getElementById('usersList');
            if (!usersList) return;
            
            usersList.innerHTML = '';
            
            Object.keys(systemData.users).forEach(email => {
                const user = systemData.users[email];
                const userCard = document.createElement('div');
                userCard.className = 'user-card';
                userCard.innerHTML = `
                    <div style="display: flex; justify-content: space-between; align-items: center; padding: 15px; border: 1px solid var(--border); border-radius: 8px; margin-bottom: 10px;">
                        <div>
                            <strong>${user.name}</strong><br>
                            <small>${email}</small><br>
                            <span class="badge ${getRoleClass(user.role)}">${getRoleDisplayName(user.role)}</span>
                        </div>
                        <div>
                            <button class="btn btn-sm btn-warning" onclick="resetUserPassword('${email}')">üîë</button>
                            ${currentUserRole === 'admin' && email !== currentUser ? `<button class="btn btn-sm btn-danger" onclick="deleteUser('${email}')">üóëÔ∏è</button>` : ''}
                        </div>
                    </div>
                `;
                usersList.appendChild(userCard);
            });
        }

        function loadSystemLogs() {
            const systemLogs = document.getElementById('systemLogs');
            if (!systemLogs) return;
            
            systemLogs.innerHTML = '';
            
            // Mostra os √∫ltimos 50 logs
            const recentLogs = systemData.logs.slice(-50).reverse();
            
            recentLogs.forEach(log => {
                const logItem = document.createElement('div');
                logItem.className = 'log-item';
                logItem.style.cssText = 'padding: 10px; border-bottom: 1px solid var(--border); font-size: 14px;';
                logItem.innerHTML = `
                    <div style="display: flex; justify-content: space-between;">
                        <span><strong>${log.type.toUpperCase()}</strong> - ${log.message}</span>
                        <small>${formatDate(log.timestamp)}</small>
                    </div>
                `;
                systemLogs.appendChild(logItem);
            });
        }

        // Fun√ß√µes auxiliares
        function getCourseDisplayName(courseCode) {
            const courses = {
                'game-design': 'Game Design',
                'programacao': 'Programa√ß√£o',
                '3d-modeling': 'Modelagem 3D',
                'marketing-digital': 'Marketing Digital'
            };
            return courses[courseCode] || courseCode;
        }

        function getStatusClass(status) {
            const statusClasses = {
                'ativo': 'success',
                'inativo': 'danger',
                'pendente': 'warning',
                'trancado': 'warning',
                'cancelado': 'danger',
                'vencido': 'danger',
                'pago': 'success',
                'ferias': 'info'
            };
            return statusClasses[status] || 'info';
        }

        function getRoleDisplayName(role) {
            const roles = {
                'admin': 'Administrador',
                'professor': 'Professor',
                'financeiro': 'Financeiro',
                'rh': 'RH',
                'portaria': 'Portaria',
                'aluno': 'Aluno'
            };
            return roles[role] || role;
        }

        function getRoleClass(role) {
            const roleClasses = {
                'admin': 'danger',
                'professor': 'success',
                'financeiro': 'warning',
                'rh': 'info',
                'portaria': 'purple',
                'aluno': 'info'
            };
            return roleClasses[role] || 'info';
        }

        function formatDate(timestamp) {
            return new Date(timestamp).toLocaleString('pt-BR');
        }

        function addLog(type, message) {
            systemData.logs.push({
                type,
                message,
                user: currentUser,
                timestamp: new Date().toISOString()
            });
        }

        // Modal Management
        function openModal(modalId) {
            document.getElementById(modalId).style.display = 'block';
            
            // Configura√ß√µes espec√≠ficas do modal
            if (modalId === 'studentModal') {
                setupStudentModal();
            }
        }

        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
            
            // Reset forms
            const forms = document.querySelectorAll(`#${modalId} form`);
            forms.forEach(form => form.reset());
        }

        function setupStudentModal() {
            // Configurar data atual
            const today = new Date().toISOString().split('T')[0];
            const dateFields = ['studentBirthDate', 'employeeBirthDate', 'employeeHireDate'];
            dateFields.forEach(fieldId => {
                const field = document.getElementById(fieldId);
                if (field) field.max = today;
            });
            
            // Configurar select de turmas baseado no curso
            const courseSelect = document.getElementById('studentCourse');
            const classSelect = document.getElementById('studentClass');
            
            if (courseSelect && classSelect) {
                courseSelect.onchange = function() {
                    classSelect.innerHTML = '<option value="">Carregando turmas...</option>';
                    
                    // Simula carregamento de turmas por curso
                    setTimeout(() => {
                        const mockClasses = {
                            'game-design': ['Game Design - Manh√£', 'Game Design - Noite'],
                            'programacao': ['Programa√ß√£o - Integral', 'Programa√ß√£o - Noturno'],
                            '3d-modeling': ['Modelagem 3D - Tarde', 'Modelagem 3D - Noite'],
                            'marketing-digital': ['Marketing - Noturno']
                        };
                        
                        const classes = mockClasses[this.value] || [];
                        classSelect.innerHTML = '<option value="">Selecione a turma</option>';
                        
                        classes.forEach(className => {
                            const option = document.createElement('option');
                            option.value = className.toLowerCase().replace(/ /g, '-');
                            option.textContent = className;
                            classSelect.appendChild(option);
                        });
                    }, 500);
                };
            }
        }

        // Notifica√ß√µes
        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            notification.textContent = message;
            
            document.body.appendChild(notification);
            
            // Anima entrada
            setTimeout(() => notification.classList.add('show'), 100);
            
            // Remove ap√≥s 3 segundos
            setTimeout(() => {
                notification.classList.remove('show');
                setTimeout(() => document.body.removeChild(notification), 300);
            }, 3000);
        }

        // Tema
        function toggleTheme() {
            document.body.classList.toggle('dark-mode');
            const isDark = document.body.classList.contains('dark-mode');
            localStorage.setItem('darkMode', isDark);
            showNotification(`Tema ${isDark ? 'escuro' : 'claro'} ativado!`, 'info');
        }

        function toggleDarkMode() {
            const toggle = document.getElementById('darkModeToggle');
            if (toggle.checked) {
                document.body.classList.add('dark-mode');
            } else {
                document.body.classList.remove('dark-mode');
            }
            localStorage.setItem('darkMode', toggle.checked);
        }

        // Backup e Sincroniza√ß√£o
        function createBackup() {
            const backupData = JSON.stringify(systemData, null, 2);
            const blob = new Blob([backupData], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            
            const a = document.createElement('a');
            a.href = url;
            a.download = `backup-gamecreators-${new Date().toISOString().split('T')[0]}.json`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            addLog('backup', 'Backup manual criado');
            showNotification                <div class="leaderboard">
                    <h3>üèÜ Hall da Fama - Top 10</h3>
                    <div class="ranking-list" id="leaderboardList">
                        <!-- Ranking dos alunos ser√° carregado aqui -->
                    </div>
                </div>

                <div class="store-management">
                    <h3>üõçÔ∏è Gerenciar Loja</h3>
                    <div class="store-products-grid" id="storeProductsGrid">
                        <!-- Produtos da loja ser√£o carregados aqui -->
                    </div>
                </div>

                <div class="xp-rules">
                    <h3>üìã Regras de XP</h3>
                    <div class="rules-grid">
                        <div class="rule-card">
                            <h4>üìö Presen√ßa</h4>
                            <p>+50 XP por aula presente</p>
                            <p>+100 XP por semana 100% presente</p>
                        </div>
                        <div class="rule-card">
                            <h4>üìù Entregas</h4>
                            <p>+100 XP por entrega no prazo</p>
                            <p>+200 XP por entrega antecipada</p>
                        </div>
                        <div class="rule-card">
                            <h4>üéØ Participa√ß√£o</h4>
                            <p>+25 XP por participa√ß√£o em aula</p>
                            <p>+150 XP por projeto destacado</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Configura√ß√µes -->
        <div id="configuracoes" class="tab-content">
            <div class="card">
                <div class="card-header">
                    <h2>‚öôÔ∏è Configura√ß√µes do Sistema</h2>
                </div>

                <div class="config-sections">
                    <div class="config-section">
                        <h3>üîê Usu√°rios e Permiss√µes</h3>
                        <div class="user-management">
                            <button class="btn" onclick="openModal('userModal')">‚ûï Novo Usu√°rio</button>
                            <button class="btn btn-warning" onclick="resetPassword()">üîë Resetar Senhas</button>
                        </div>
                        <div class="users-list" id="usersList">
                            <!-- Lista de usu√°rios -->
                        </div>
                    </div>

                    <div class="config-section">
                        <h3>üíæ Backup e Sincroniza√ß√£o</h3>
                        <div class="backup-controls">
                            <button class="btn btn-success" onclick="createBackup()">üíæ Criar Backup</button>
                            <button class="btn" onclick="syncGoogleSheets()">üìä Sincronizar Sheets</button>
                            <button class="btn btn-warning" onclick="restoreBackup()">üîÑ Restaurar</button>
                        </div>
                        <div class="backup-status success">
                            <span>‚úÖ</span>
                            <div>
                                <strong>√öltimo backup:</strong> 07/08/2025 14:30<br>
                                <strong>Status:</strong> Sincronizado com Google Sheets
                            </div>
                        </div>
                    </div>

                    <div class="config-section">
                        <h3>üé® Personaliza√ß√£o</h3>
                        <div class="theme-settings">
                            <label>
                                <input type="checkbox" id="darkModeToggle" onchange="toggleDarkMode()">
                                üåì Modo Escuro Padr√£o
                            </label>
                            <label>
                                <input type="checkbox" id="notificationsToggle" checked>
                                üîî Notifica√ß√µes Ativas
                            </label>
                            <label>
                                <input type="checkbox" id="autoBackupToggle" checked>
                                üíæ Backup Autom√°tico Di√°rio
                            </label>
                        </div>
                    </div>

                    <div class="config-section">
                        <h3>üìä Logs do Sistema</h3>
                        <div class="logs-container">
                            <div class="log-filters">
                                <select id="logTypeFilter">
                                    <option value="">Todos os Tipos</option>
                                    <option value="login">Login</option>
                                    <option value="create">Cria√ß√£o</option>
                                    <option value="update">Atualiza√ß√£o</option>
                                    <option value="delete">Exclus√£o</option>
                                </select>
                                <input type="date" id="logDateFilter">
                                <button class="btn" onclick="filterLogs()">üîç Filtrar</button>
                            </div>
                            <div class="logs-list" id="systemLogs">
                                <!-- Logs do sistema -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Relat√≥rios -->
        <div id="relatorios" class="tab-content">
            <div class="card">
                <div class="card-header">
                    <h2>üìä Relat√≥rios</h2>
                    <div>
                        <button class="btn" onclick="generateCustomReport()">üìã Relat√≥rio Customizado</button>
                        <button class="btn btn-success" onclick="exportAllData()">üì§ Exportar Tudo</button>
                    </div>
                </div>

                <div class="reports-grid">
                    <div class="report-card" onclick="generateStudentReport()">
                        <h3>üë• Relat√≥rio de Alunos</h3>
                        <p>Lista completa, status, cursos e dados de contato</p>
                        <div class="report-actions">
                            <span class="btn-link">üìÑ PDF</span>
                            <span class="btn-link">üìä Excel</span>
                        </div>
                    </div>

                    <div class="report-card" onclick="generateFinancialDetailedReport()">
                        <h3>üí∞ Relat√≥rio Financeiro</h3>
                        <p>Receitas, despesas, inadimpl√™ncia e proje√ß√µes</p>
                        <div class="report-actions">
                            <span class="btn-link">üìÑ PDF</span>
                            <span class="btn-link">üìä Excel</span>
                        </div>
                    </div>

                    <div class="report-card" onclick="generateAttendanceDetailedReport()">
                        <h3>üìã Relat√≥rio de Frequ√™ncia</h3>
                        <p>Presen√ßa por aluno, turma e per√≠odo</p>
                        <div class="report-actions">
                            <span class="btn-link">üìÑ PDF</span>
                            <span class="btn-link">üìä Excel</span>
                        </div>
                    </div>

                    <div class="report-card" onclick="generatePedagogicalReport()">
                        <h3>üìö Relat√≥rio Pedag√≥gico</h3>
                        <p>Progresso dos alunos e desempenho por curso</p>
                        <div class="report-actions">
                            <span class="btn-link">üìÑ PDF</span>
                            <span class="btn-link">üìä Excel</span>
                        </div>
                    </div>

                    <div class="report-card" onclick="generateHRReport()">
                        <h3>üë• Relat√≥rio de RH</h3>
                        <p>Colaboradores, folha de pagamento e horas trabalhadas</p>
                        <div class="report-actions">
                            <span class="btn-link">üìÑ PDF</span>
                            <span class="btn-link">üìä Excel</span>
                        </div>
                    </div>

                    <div class="report-card" onclick="generateGamificationReport()">
                        <h3>üéÆ Relat√≥rio de Gamifica√ß√£o</h3>
                        <p>XP, ranking, resgates e engajamento</p>
                        <div class="report-actions">
                            <span class="btn-link">üìÑ PDF</span>
                            <span class="btn-link">üìä Excel</span>
                        </div>
                    </div>
                </div>

                <div class="custom-report-builder">
                    <h3>üõ†Ô∏è Construtor de Relat√≥rios</h3>
                    <div class="report-builder">
                        <div class="form-row">
                            <div class="form-group">
                                <label>Tipo de Relat√≥rio:</label>
                                <select id="reportType">
                                    <option value="students">Alunos</option>
                                    <option value="financial">Financeiro</option>
                                    <option value="attendance">Frequ√™ncia</option>
                                    <option value="pedagogical">Pedag√≥gico</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Per√≠odo:</label>
                                <select id="reportPeriod">
                                    <option value="current-month">M√™s Atual</option>
                                    <option value="last-month">M√™s Passado</option>
                                    <option value="current-semester">Semestre Atual</option>
                                    <option value="current-year">Ano Atual</option>
                                    <option value="custom">Personalizado</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-row" id="customDateRange" style="display: none;">
                            <div class="form-group">
                                <label>Data In√≠cio:</label>
                                <input type="date" id="reportStartDate">
                            </div>
                            <div class="form-group">
                                <label>Data Fim:</label>
                                <input type="date" id="reportEndDate">
                            </div>
                        </div>
                        <button class="btn" onclick="buildCustomReport()">üî® Gerar Relat√≥rio</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- MODAIS -->

    <!-- Modal Novo Aluno -->
    <div id="studentModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>üë• Cadastro de Aluno</h2>
                <span class="close" onclick="closeModal('studentModal')">&times;</span>
            </div>
            <div class="modal-body">
                <form id="studentForm" onsubmit="return saveStudent(event)">
                    <div class="form-row">
                        <div class="form-group">
                            <label>Nome Completo *</label>
                            <input type="text" id="studentName" required>
                        </div>
                        <div class="form-group">
                            <label>Email *</label>
                            <input type="email" id="studentEmail" required>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>CPF</label>
                            <input type="text" id="studentCPF" placeholder="000.000.000-00">
                        </div>
                        <div class="form-group">
                            <label>Data de Nascimento</label>
                            <input type="date" id="studentBirthDate">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Telefone</label>
                            <input type="tel" id="studentPhone" placeholder="(11) 99999-9999">
                        </div>
                        <div class="form-group">
                            <label>WhatsApp</label>
                            <input type="tel" id="studentWhatsApp" placeholder="(11) 99999-9999">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Curso *</label>
                            <select id="studentCourse" required>
                                <option value="">Selecione o curso</option>
                                <option value="game-design">Game Design</option>
                                <option value="programacao">Programa√ß√£o</option>
                                <option value="3d-modeling">Modelagem 3D</option>
                                <option value="marketing-digital">Marketing Digital</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Turma *</label>
                            <select id="studentClass" required>
                                <option value="">Selecione a turma</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Respons√°vel Financeiro *</label>
                            <input type="text" id="financialResponsible" required>
                        </div>
                        <div class="form-group">
                            <label>CPF do Respons√°vel</label>
                            <input type="text" id="responsibleCPF" placeholder="000.000.000-00">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Plano de Pagamento *</label>
                            <select id="paymentPlan" required>
                                <option value="">Selecione o plano</option>
                                <option value="vista">√Ä Vista - 10% Desconto</option>
                                <option value="parcelado-6x">6x Sem Juros</option>
                                <option value="parcelado-12x">12x Com Juros (2% a.m.)</option>
                                <option value="mensal">Mensalidade Recorrente</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Status</label>
                            <select id="studentStatus">
                                <option value="ativo">Ativo</option>
                                <option value="pendente">Pendente</option>
                                <option value="trancado">Trancado</option>
                                <option value="cancelado">Cancelado</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Observa√ß√µes</label>
                        <textarea id="studentNotes" rows="3" placeholder="Observa√ß√µes adicionais sobre o aluno..."></textarea>
                    </div>
                    <div class="form-group">
                        <label>üìÑ Documentos do Aluno</label>
                        <div class="file-upload" onclick="document.getElementById('studentDocuments').click()">
                            <p>üìÅ Clique para adicionar documentos</p>
                            <p style="font-size: 12px; color: #666;">Contrato, RG, CPF, Comprovante de Resid√™ncia</p>
                        </div>
                        <input type="file" id="studentDocuments" multiple accept=".pdf,.jpg,.png,.doc,.docx" style="display: none;">
                        <div id="studentDocumentsList" class="file-list"></div>
                    </div>
                    <div class="form-actions">
                        <button type="submit" class="btn btn-success">üíæ Salvar Aluno</button>
                        <button type="button" class="btn btn-secondary" onclick="closeModal('studentModal')">‚ùå Cancelar</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Modal Nova Turma -->
    <div id="classModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>üè´ Cadastro de Turma</h2>
                <span class="close" onclick="closeModal('classModal')">&times;</span>
            </div>
            <div class="modal-body">
                <form id="classForm" onsubmit="return saveClass(event)">
                    <div class="form-row">
                        <div class="form-group">
                            <label>Nome da Turma *</label>
                            <input type="text" id="className" required placeholder="Ex: Game Design - Turma A">
                        </div>
                        <div class="form-group">
                            <label>Curso *</label>
                            <select id="classCourse" required>
                                <option value="">Selecione o curso</option>
                                <option value="game-design">Game Design</option>
                                <option value="programacao">Programa√ß√£o</option>
                                <option value="3d-modeling">Modelagem 3D</option>
                                <option value="marketing-digital">Marketing Digital</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Professor Respons√°vel *</label>
                            <select id="classTeacher" required>
                                <option value="">Selecione o professor</option>
                                <option value="prof1">Maria Silva - Game Design</option>
                                <option value="prof2">Jo√£o Santos - Programa√ß√£o</option>
                                <option value="prof3">Ana Costa - Modelagem 3D</option>
                                <option value="prof4">Carlos Lima - Marketing</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Capacidade M√°xima</label>
                            <input type="number" id="classCapacity" value="20" min="1" max="50">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Data de In√≠cio</label>
                            <input type="date" id="classStartDate">
                        </div>
                        <div class="form-group">
                            <label>Data Prevista de Fim</label>
                            <input type="date" id="classEndDate">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Dias da Semana *</label>
                            <div class="checkbox-group">
                                <label><input type="checkbox" value="segunda"> Segunda</label>
                                <label><input type="checkbox" value="terca"> Ter√ßa</label>
                                <label><input type="checkbox" value="quarta"> Quarta</label>
                                <label><input type="checkbox" value="quinta"> Quinta</label>
                                <label><input type="checkbox" value="sexta"> Sexta</label>
                                <label><input type="checkbox" value="sabado"> S√°bado</label>
                            </div>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Hor√°rio de In√≠cio</label>
                            <input type="time" id="classStartTime" value="19:00">
                        </div>
                        <div class="form-group">
                            <label>Hor√°rio de Fim</label>
                            <input type="time" id="classEndTime" value="22:00">
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Descri√ß√£o</label>
                        <textarea id="classDescription" rows="3" placeholder="Descri√ß√£o da turma, objetivos, etc..."></textarea>
                    </div>
                    <div class="form-actions">
                        <button type="submit" class="btn btn-success">üíæ Criar Turma</button>
                        <button type="button" class="btn btn-secondary" onclick="closeModal('classModal')">‚ùå Cancelar</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Modal Novo Colaborador -->
    <div id="employeeModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>üë• Cadastro de Colaborador</h2>
                <span class="close" onclick="closeModal('employeeModal')">&times;</span>
            </div>
            <div class="modal-body">
                <form id="employeeForm" onsubmit="return saveEmployee(event)">
                    <div class="form-row">
                        <div class="form-group">
                            <label>Nome Completo *</label>
                            <input type="text" id="employeeName" required>
                        </div>
                        <div class="form-group">
                            <label>Email *</label>
                            <input type="email" id="employeeEmail" required>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>CPF *</label>
                            <input type="text" id="employeeCPF" required placeholder="000.000.000-00">
                        </div>
                        <div class="form-group">
                            <label>Data de Nascimento</label>
                            <input type="date" id="employeeBirthDate">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Cargo *</label>
                            <select id="employeePosition" required>
                                <option value="">Selecione o cargo</option>
                                <option value="professor">Professor</option>
                                <option value="coordenador">Coordenador</option>
                                <option value="assistente">Assistente Administrativo</option>
                                <option value="financeiro">Assistente Financeiro</option>
                                <option value="rh">Analista de RH</option>
                                <option value="marketing">Analista de Marketing</option>
                                <option value="porteiro">Porteiro</option>
                                <option value="limpeza">Auxiliar de Limpeza</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Departamento</label>
                            <select id="employeeDepartment">
                                <option value="">Selecione o departamento</option>
                                <option value="pedagogico">Pedag√≥gico</option>
                                <option value="administrativo">Administrativo</option>
                                <option value="financeiro">Financeiro</option>
                                <option value="rh">Recursos Humanos</option>
                                <option value="marketing">Marketing</option>
                                <option value="suporte">Suporte</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Sal√°rio Base *</label>
                            <input type="number" id="employeeSalary" required step="0.01" placeholder="0.00">
                        </div>
                        <div class="form-group">
                            <label>Carga Hor√°ria Semanal</label>
                            <input type="number" id="employeeWorkHours" value="40" min="1" max="44">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Data de Admiss√£o</label>
                            <input type="date" id="employeeHireDate">
                        </div>
                        <div class="form-group">
                            <label>Status</label>
                            <select id="employeeStatus">
                                <option value="ativo">Ativo</option>
                                <option value="ferias">Em F√©rias</option>
                                <option value="licenca">Em Licen√ßa</option>
                                <option value="demitido">Demitido</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Telefone</label>
                            <input type="tel" id="employeePhone" placeholder="(11) 99999-9999">
                        </div>
                        <div class="form-group">
                            <label>Endere√ßo</label>
                            <input type="text" id="employeeAddress" placeholder="Rua, n√∫mero, bairro">
                        </div>
                    </div>
                    <div class="form-group">
                        <label>üìÑ Documentos do Colaborador</label>
                        <div class="file-upload" onclick="document.getElementById('employeeDocuments').click()">
                            <p>üìÅ Clique para adicionar documentos</p>
                            <p style="font-size: 12px; color: #666;">Contrato, RG, CPF, Carteira de Trabalho</p>
                        </div>
                        <input type="file" id="employeeDocuments" multiple accept=".pdf,.jpg,.png,.doc,.docx" style="display: none;">
                        <div id="employeeDocumentsList" class="file-list"></div>
                    </div>
                    <div class="form-actions">
                        <button type="submit" class="btn btn-success">üíæ Salvar Colaborador</button>
                        <button type="button" class="btn btn-secondary" onclick="closeModal('employeeModal')">‚ùå Cancelar</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Modal Loja de Gamifica√ß√£o -->
    <div id="storeModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>üõçÔ∏è Loja de Gamifica√ß√£o</h2>
                <span class="close" onclick="closeModal('storeModal')">&times;</span>
            </div>
            <div class="modal-body">
                <div class="store-tabs">
                    <button class="btn" onclick="switchStoreTab('products')">üõçÔ∏è Produtos</button>
                    <button class="btn btn-success" onclick="switchStoreTab('addProduct')">‚ûï Adicionar Produto</button>
                    <button class="btn btn-purple" onclick="switchStoreTab('purchases')">üìã Resgates</button>
                </div>

                <div id="storeProductsTab" class="store-tab-content">
                    <div class="store-grid">
                        <!-- Produtos da loja ser√£o carregados aqui -->
                    </div>
                </div>

                <div id="addProductTab" class="store-tab-content" style="display: none;">
                    <form id="productForm" onsubmit="return addStoreProduct(event)">
                        <div class="form-row">
                            <div class="form-group">
                                <label>Nome do Produto *</label>
                                <input type="text" id="productName" required>
                            </div>
                            <div class="form-group">
                                <label>Pre√ßo em Coins *</label>
                                <input type="number" id="productPrice" required min="1">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label>Categoria</label>
                                <select id="productCategory">
                                    <option value="material">Material Escolar</option>
                                    <option value="alimentacao">Alimenta√ß√£o</option>
                                    <option value="tech">Tecnologia</option>
                                    <option value="lazer">Lazer</option>
                                    <option value="desconto">Desconto</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Estoque</label>
                                <input type="number" id="productStock" value="10" min="0">
                            </div>
                        </div>
                        <div class="form-group">
                            <label>Descri√ß√£o</label>
                            <textarea id="productDescription" rows="3" placeholder="Descri√ß√£o do produto..."></textarea>
                        </div>
                        <div class="form-group">
                            <label>Imagem do Produto</label>
                            <div class="file-upload" onclick="document.getElementById('productImage').click()">
                                <p>üñºÔ∏è Clique para adicionar imagem</p>
                            </div>
                            <input type="file" id="productImage" accept=".jpg,.png,.gif" style="display: none;">
                        </div>
                        <button type="submit" class="btn btn-success">üíæ Adicionar Produto</button>
                    </form>
                </div>

                <div id="purchasesTab" class="store-tab-content" style="display: none;">
                    <div class="purchases-list">
                        <!-- Lista de resgates ser√° carregada aqui -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Sistema de Gest√£o Escolar GameCreators
        let currentUser = null;
        let currentUserRole = null;
        
        // Dados simulados - Em produ√ß√£o, viriam do Google Sheets
        const systemData = {
            users: {
                'admin@gamecreators.com': { password: '123456', role: 'admin', name: 'Administrador' },
                'professor@gamecreators.com': { password: '123456', role: 'professor', name: 'Maria Silva' },
                'financeiro@gamecreators.com': { password: '123456', role: 'financeiro', name: 'Jo√£o Financeiro' },
                'rh@gamecreators.com': { password: '123456', role: 'rh', name: 'Ana RH' },
                'portaria@gamecreators.com': { password: '123456', role: 'portaria', name: 'Carlos Portaria' },
                'aluno@gamecreators.com': { password: '123456', role: 'aluno', name: 'Pedro Aluno' }
            },
            students: [],
            classes: [],
            employees: [],
            payments: [],
            attendance: [],
            gamification: {
                leaderboard: [],
                store: [],
                purchases: []
            },
            logs: []
        };

        // Configura√ß√£o dos m√≥dulos por perfil
        const moduleAccess = {
            admin: ['dashboard', 'students', 'turmas', 'pedagogico', 'financeiro', 'chamada', 'portaria', <!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GameCreators - Sistema de Gest√£o Escolar Completo</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #2196F3;
            --primary-dark: #1976D2;
            --success: #4CAF50;
            --success-dark: #45a049;
            --warning: #FF9800;
            --danger: #f44336;
            --info: #2196F3;
            --light: #f5f5f5;
            --dark: #333;
            --border: #e0e0e0;
            --purple: #9C27B0;
            --gold: #FFD700;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            min-height: 100vh;
            color: var(--dark);
        }

        .login-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 9999;
        }

        .login-container {
            background: white;
            border-radius: 15px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            max-width: 400px;
            width: 90%;
            text-align: center;
            animation: fadeInUp 0.5s ease-out;
            position: relative;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .main-app {
            display: none;
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            background: white;
            min-height: 100vh;
            border-radius: 10px 10px 0 0;
            box-shadow: 0 -10px 30px rgba(0,0,0,0.2);
        }

        .header {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 10px;
        }

        .header-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .user-role {
            background: rgba(255,255,255,0.2);
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 12px;
        }

        .nav-tabs {
            display: flex;
            border-bottom: 2px solid var(--border);
            margin-bottom: 30px;
            flex-wrap: wrap;
            gap: 5px;
            overflow-x: auto;
            padding-bottom: 10px;
        }

        .nav-tab {
            padding: 12px 20px;
            background: var(--light);
            border: none;
            border-radius: 10px 10px 0 0;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 500;
            font-size: 14px;
            white-space: nowrap;
            min-width: 120px;
        }

        .nav-tab.active {
            background: var(--primary);
            color: white;
            transform: translateY(-2px);
        }

        .nav-tab:hover {
            background: var(--primary-dark);
            color: white;
        }

        .tab-content {
            display: none;
            animation: fadeIn 0.3s ease-in-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .tab-content.active {
            display: block;
        }

        .form-group {
            margin-bottom: 20px;
            text-align: left;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
            color: #555;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid var(--border);
            border-radius: 8px;
            font-size: 16px;
            transition: all 0.3s;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 10px rgba(33, 150, 243, 0.3);
        }

        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
        }

        .btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s;
            margin-right: 10px;
            margin-bottom: 10px;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            text-decoration: none;
        }

        .btn:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(33, 150, 243, 0.4);
        }

        .btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .btn-danger { background: var(--danger); }
        .btn-danger:hover { background: #d32f2f; }
        .btn-success { background: var(--success); }
        .btn-success:hover { background: var(--success-dark); }
        .btn-warning { background: var(--warning); }
        .btn-warning:hover { background: #F57C00; }
        .btn-secondary { background: #6c757d; }
        .btn-secondary:hover { background: #5a6268; }
        .btn-purple { background: var(--purple); }
        .btn-purple:hover { background: #7B1FA2; }
        .btn-gold { background: var(--gold); color: var(--dark); }
        .btn-gold:hover { background: #FFA500; }

        .card {
            background: white;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            transition: transform 0.3s;
        }

        .card:hover {
            transform: translateY(-2px);
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--border);
            flex-wrap: wrap;
            gap: 10px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            transition: transform 0.3s;
            cursor: pointer;
        }

        .stat-card:hover {
            transform: scale(1.05);
        }

        .stat-card.success {
            background: linear-gradient(135deg, var(--success) 0%, var(--success-dark) 100%);
        }

        .stat-card.warning {
            background: linear-gradient(135deg, var(--warning) 0%, #F57C00 100%);
        }

        .stat-card.danger {
            background: linear-gradient(135deg, var(--danger) 0%, #d32f2f 100%);
        }

        .stat-card.purple {
            background: linear-gradient(135deg, var(--purple) 0%, #7B1FA2 100%);
        }

        .stat-card.gold {
            background: linear-gradient(135deg, var(--gold) 0%, #FFA500 100%);
            color: var(--dark);
        }

        .stat-number {
            font-size: 32px;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 14px;
            opacity: 0.9;
        }

        .table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        .table th,
        .table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid var(--border);
        }

        .table th {
            background: var(--light);
            font-weight: 600;
        }

        .table tr:hover {
            background: rgba(33, 150, 243, 0.05);
        }

        .badge {
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 500;
            text-transform: uppercase;
        }

        .badge.success { background: var(--success); color: white; }
        .badge.danger { background: var(--danger); color: white; }
        .badge.warning { background: var(--warning); color: white; }
        .badge.info { background: var(--info); color: white; }
        .badge.purple { background: var(--purple); color: white; }

        .modal {
            display: none;
            position: fixed;
            z-index: 10000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            animation: fadeIn 0.3s;
        }

        .modal-content {
            background-color: white;
            margin: 2% auto;
            padding: 0;
            border-radius: 10px;
            width: 95%;
            max-width: 800px;
            max-height: 95vh;
            overflow-y: auto;
            animation: slideIn 0.3s;
        }

        @keyframes slideIn {
            from { transform: translateY(-50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .modal-header {
            background: var(--primary);
            color: white;
            padding: 20px;
            border-radius: 10px 10px 0 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-body {
            padding: 20px;
        }

        .close {
            color: white;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }

        .close:hover {
            opacity: 0.7;
        }

        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 20px;
            border-radius: 8px;
            color: white;
            font-weight: 500;
            z-index: 10001;
            transform: translateX(400px);
            transition: transform 0.3s;
            max-width: 300px;
        }

        .notification.show {
            transform: translateX(0);
        }

        .notification.success { background: var(--success); }
        .notification.error { background: var(--danger); }
        .notification.info { background: var(--info); }
        .notification.warning { background: var(--warning); }

        .demo-badge {
            background: #FF5722;
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            position: absolute;
            top: 10px;
            right: 10px;
        }

        .welcome-message {
            background: linear-gradient(135deg, var(--success), var(--success-dark));
            color: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            text-align: center;
        }

        .empty-state {
            text-align: center;
            padding: 40px;
            color: #666;
        }

        .empty-state h3 {
            margin-bottom: 10px;
        }

        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,.3);
            border-radius: 50%;
            border-top-color: #fff;
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .login-info {
            background: #e3f2fd;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            border-left: 4px solid var(--primary);
        }

        .login-info h4 {
            color: var(--primary-dark);
            margin-bottom: 10px;
        }

        .login-info p {
            margin: 5px 0;
            font-size: 14px;
            color: #555;
        }

        .search-filter {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
            align-items: center;
        }

        .search-filter input,
        .search-filter select {
            min-width: 200px;
            flex: 1;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: var(--border);
            border-radius: 4px;
            overflow: hidden;
            margin-top: 5px;
        }

        .progress-fill {
            height: 100%;
            background: var(--success);
            transition: width 0.3s;
        }

        .financial-summary {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .financial-item {
            background: var(--light);
            padding: 15px;
            border-radius: 8px;
            text-align: center;
        }

        .financial-value {
            font-size: 18px;
            font-weight: bold;
            color: var(--success);
        }

        .financial-value.negative {
            color: var(--danger);
        }

        .gamification-points {
            background: linear-gradient(135deg, var(--gold), #FFA500);
            color: var(--dark);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            text-align: center;
        }

        .points-display {
            font-size: 24px;
            font-weight: bold;
        }

        .store-item {
            background: white;
            border: 2px solid var(--border);
            border-radius: 10px;
            padding: 15px;
            text-align: center;
            transition: all 0.3s;
            cursor: pointer;
        }

        .store-item:hover {
            transform: translateY(-2px);
            border-color: var(--primary);
            box-shadow: 0 5px 15px rgba(33, 150, 243, 0.2);
        }

        .store-item img {
            width: 80px;
            height: 80px;
            object-fit: cover;
            border-radius: 8px;
            margin-bottom: 10px;
            background: var(--light);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 32px;
        }

        .attendance-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(40px, 1fr));
            gap: 5px;
            margin-top: 10px;
        }

        .attendance-day {
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 4px;
            font-size: 12px;
            font-weight: bold;
            cursor: pointer;
        }

        .attendance-day.present {
            background: var(--success);
            color: white;
        }

        .attendance-day.absent {
            background: var(--danger);
            color: white;
        }

        .attendance-day.pending {
            background: var(--border);
            color: var(--dark);
        }

        .file-upload {
            border: 2px dashed var(--border);
            padding: 20px;
            text-align: center;
            border-radius: 8px;
            margin: 10px 0;
            transition: all 0.3s;
            cursor: pointer;
        }

        .file-upload:hover {
            border-color: var(--primary);
            background: rgba(33, 150, 243, 0.05);
        }

        .file-upload.dragover {
            border-color: var(--success);
            background: rgba(76, 175, 80, 0.1);
        }

        .file-list {
            margin-top: 15px;
        }

        .file-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            border: 1px solid var(--border);
            border-radius: 5px;
            margin-bottom: 5px;
            background: var(--light);
        }

        .student-folder {
            background: var(--light);
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 15px;
        }

        .folder-header {
            display: flex;
            justify-content: between;
            align-items: center;
            margin-bottom: 10px;
        }

        .document-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 10px;
        }

        .document-card {
            background: white;
            padding: 10px;
            border-radius: 5px;
            text-align: center;
            cursor: pointer;
            transition: transform 0.2s;
            border: 1px solid var(--border);
        }

        .document-card:hover {
            transform: scale(1.05);
        }

        .ranking-list {
            list-style: none;
        }

        .ranking-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            margin-bottom: 10px;
            background: var(--light);
            border-radius: 8px;
            border-left: 4px solid var(--primary);
        }

        .ranking-position {
            font-size: 24px;
            font-weight: bold;
            color: var(--primary);
            min-width: 40px;
        }

        .ranking-position.first { color: var(--gold); }
        .ranking-position.second { color: #C0C0C0; }
        .ranking-position.third { color: #CD7F32; }

        .payment-plan-card {
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
            background: white;
        }

        .payment-plan-card.selected {
            border-color: var(--primary);
            background: rgba(33, 150, 243, 0.05);
        }

        .installment-list {
            margin-top: 10px;
        }

        .installment-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 0;
            border-bottom: 1px solid var(--border);
        }

        .installment-item:last-child {
            border-bottom: none;
        }

        .qr-scanner {
            width: 300px;
            height: 200px;
            border: 2px solid var(--primary);
            border-radius: 8px;
            background: var(--light);
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 20px auto;
        }

        .portal-entry {
            background: linear-gradient(135deg, var(--success), var(--success-dark));
            color: white;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 10px;
        }

        .portal-exit {
            background: linear-gradient(135deg, var(--warning), #F57C00);
            color: white;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 10px;
        }

        .backup-status {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 15px;
            background: var(--light);
            border-radius: 8px;
            margin-bottom: 15px;
        }

        .backup-status.success {
            background: rgba(76, 175, 80, 0.1);
            border: 1px solid var(--success);
        }

        .backup-status.error {
            background: rgba(244, 67, 54, 0.1);
            border: 1px solid var(--danger);
        }

        .theme-toggle {
            background: none;
            border: 2px solid rgba(255,255,255,0.3);
            color: white;
            padding: 8px 12px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s;
        }

        .theme-toggle:hover {
            background: rgba(255,255,255,0.1);
        }

        /* Estilos adicionais para o sistema completo */
        .course-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .course-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            transition: transform 0.3s;
            border-left: 4px solid var(--primary);
        }

        .course-card:hover {
            transform: translateY(-5px);
        }

        .course-stats {
            margin-top: 15px;
            display: flex;
            gap: 10px;
        }

        .method-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .method-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            gap: 15px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .method-icon {
            font-size: 32px;
        }

        .method-value {
            font-size: 18px;
            font-weight: bold;
            color: var(--success);
        }

        .method-label {
            font-size: 14px;
            color: #666;
        }

        .rules-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 15px;
        }

        .rule-card {
            background: var(--light);
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            border-top: 4px solid var(--primary);
        }

        .reports-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .report-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            transition: transform 0.3s;
            cursor: pointer;
            border-left: 4px solid var(--primary);
        }

        .report-card:hover {
            transform: translateY(-3px);
        }

        .report-actions {
            margin-top: 15px;
            display: flex;
            gap: 10px;
        }

        .btn-link {
            color: var(--primary);
            text-decoration: none;
            font-size: 12px;
            padding: 5px 10px;
            border: 1px solid var(--primary);
            border-radius: 15px;
            transition: all 0.3s;
        }

        .btn-link:hover {
            background: var(--primary);
            color: white;
        }

        .config-sections {
            display: flex;
            flex-direction: column;
            gap: 30px;
        }

        .config-section {
            background: var(--light);
            padding: 20px;
            border-radius: 10px;
            border-left: 4px solid var(--primary);
        }

        .config-section h3 {
            color: var(--primary);
            margin-bottom: 15px;
        }

        .user-management {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .backup-controls {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .theme-settings {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .theme-settings label {
            display: flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
            padding: 10px;
            background: white;
            border-radius: 8px;
            transition: background 0.3s;
        }

        .theme-settings label:hover {
            background: rgba(33, 150, 243, 0.05);
        }

        .log-filters {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }

        .logs-container {
            max-height: 400px;
            overflow-y: auto;
            border: 1px solid var(--border);
            border-radius: 8px;
        }

        .attendance-selector {
            background: var(--light);
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 30px;
        }

        .attendance-container {
            min-height: 200px;
        }

        .attendance-summary {
            margin-top: 30px;
        }

        .entry-controls {
            background: var(--light);
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 30px;
        }

        .today-entries {
            margin-bottom: 30px;
        }

        .entries-list {
            max-height: 300px;
            overflow-y: auto;
        }

        .current-students {
            margin-bottom: 20px;
        }

        .current-list {
            background: var(--light);
            padding: 15px;
            border-radius: 8px;
            min-height: 100px;
        }

        .current-student {
            padding: 8px 0;
            border-bottom: 1px solid var(--border);
            font-size: 14px;
        }

        .current-student:last-child {
            border-bottom: none;
        }

        .checkbox-group {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 10px;
            margin-top: 10px;
        }

        .checkbox-group label {
            display: flex;
            align-items: center;
            gap: 5px;
            cursor: pointer;
            padding: 5px;
        }

        .form-actions {
            display: flex;
            gap: 10px;
            margin-top: 20px;
            justify-content: flex-end;
            flex-wrap: wrap;
        }

        .table-container {
            overflow-x: auto;
            margin-top: 15px;
        }

        .table {
            min-width: 600px;
        }

        .btn-sm {
            padding: 6px 12px;
            font-size: 12px;
            margin-right: 5px;
        }

        .gamification-overview {
            margin-bottom: 30px;
        }

        .leaderboard {
            background: white;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 30px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .leaderboard h3 {
            color: var(--gold);
            margin-bottom: 20px;
            text-align: center;
        }

        .store-management {
            background: white;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 30px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .store-products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .xp-rules {
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .store-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .store-tab-content {
            min-height: 300px;
        }

        .store-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            gap: 15px;
        }

        .alert {
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 10px;
            border-left: 4px solid;
        }

        .alert-warning {
            background: rgba(255, 152, 0, 0.1);
            border-left-color: var(--warning);
            color: #F57C00;
        }

        .alert-danger {
            background: rgba(244, 67, 54, 0.1);
            border-left-color: var(--danger);
            color: var(--danger);
        }

        .grid-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .custom-report-builder {
            background: white;
            border-radius: 10px;
            padding: 20px;
            margin-top: 30px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .report-builder {
            margin-top: 15px;
        }

        /* Dark mode styles */
        .dark-mode {
            --light: #2d2d2d;
            --dark: #e0e0e0;
            --border: #444;
        }

        .dark-mode body {
            background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);
            color: var(--dark);
        }

        .dark-mode .main-app {
            background: #1e1e1e;
        }

        .dark-mode .card {
            background: #2d2d2d;
            border: 1px solid var(--border);
        }

        .dark-mode .table th {
            background: #333;
        }

        .dark-mode .table tr:hover {
            background: rgba(255,255,255,0.05);
        }

        .dark-mode .config-section {
            background: #333;
        }

        .dark-mode .theme-settings label {
            background: #2d2d2d;
            color: var(--dark);
        }

        .dark-mode .theme-settings label:hover {
            background: rgba(33, 150, 243, 0.1);
        }

        .dark-mode .attendance-selector,
        .dark-mode .entry-controls {
            background: #333;
        }

        .dark-mode .current-list {
            background: #333;
        }

        .dark-mode .leaderboard,
        .dark-mode .store-management,
        .dark-mode .xp-rules,
        .dark-mode .custom-report-builder {
            background: #2d2d2d;
        }

        .dark-mode .method-card {
            background: #2d2d2d;
        }

        .dark-mode .rule-card {
            background: #333;
        }

        @media (max-width: 768px) {
            .nav-tabs { 
                flex-direction: column; 
                overflow-x: visible;
            }
            .nav-tab { 
                border-radius: 8px; 
                margin-bottom: 5px; 
                min-width: auto;
            }
            .login-container { padding: 30px 20px; }
            .header {
                flex-direction: column;
                text-align: center;
            }
            .search-filter {
                flex-direction: column;
            }
            .search-filter input,
            .search-filter select {
                min-width: auto;
            }
            .form-row {
                grid-template-columns: 1fr;
            }
            .modal-content {
                width: 98%;
                margin: 5% auto;
            }
            .stats-grid {
                grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            }
            .card-header {
                flex-direction: column;
                align-items: flex-start;
            }
        }

        @media (max-width: 480px) {
            .stats-grid {
                grid-template-columns: 1fr 1fr;
            }
            
            .financial-summary {
                grid-template-columns: 1fr;
            }
            
            .method-stats {
                grid-template-columns: 1fr;
            }
            
            .btn {
                width: 100%;
                margin-bottom: 8px;
            }
            
            .form-actions {
                flex-direction: column;
            }
            
            .search-filter {
                flex-direction: column;
            }
            
            .search-filter input,
            .search-filter select {
                width: 100%;
                min-width: auto;
            }
        }
    </style>
</head>
<body>
    <!-- Login Screen -->
    <div id="loginScreen" class="login-screen">
        <div class="login-container">
            <div class="demo-badge">DEMO</div>
            <h1 style="color: var(--primary); margin-bottom: 10px;">üéÆ GameCreators</h1>
            <p style="color: #666; margin-bottom: 20px;">Sistema de Gest√£o Escolar Completo</p>
            
            <div class="login-info">
                <h4>üë• Usu√°rios de Demonstra√ß√£o:</h4>
                <p><strong>Admin:</strong> admin@gamecreators.com / 123456</p>
                <p><strong>Professor:</strong> professor@gamecreators.com / 123456</p>
                <p><strong>Financeiro:</strong> financeiro@gamecreators.com / 123456</p>
                <p><strong>RH:</strong> rh@gamecreators.com / 123456</p>
                <p><strong>Portaria:</strong> portaria@gamecreators.com / 123456</p>
                <p><strong>Aluno:</strong> aluno@gamecreators.com / 123456</p>
            </div>
            
            <form id="loginForm" onsubmit="return handleLogin(event)">
                <div class="form-group">
                    <label for="email">Email:</label>
                    <input type="email" id="email" name="email" placeholder="Digite seu email" required>
                </div>
                <div class="form-group">
                    <label for="password">Senha:</label>
                    <input type="password" id="password" name="password" placeholder="Digite sua senha" required>
                </div>
                <button type="submit" class="btn" id="loginBtn">
                    üîê Entrar
                </button>
            </form>
        </div>
    </div>

    <!-- Main Application -->
    <div id="mainApp" class="main-app">
        <div class="header">
            <div class="header-info">
                <div>
                    <h1>üéÆ GameCreators - Sistema de Gest√£o</h1>
                    <p id="userWelcome">Bem-vindo!</p>
                </div>
                <div class="user-role" id="userRole">Admin</div>
            </div>
            <div style="display: flex; gap: 10px; align-items: center;">
                <button class="theme-toggle" onclick="toggleTheme()">üåì</button>
                <button class="btn btn-danger" onclick="logout()">üö™ Sair</button>
            </div>
        </div>

        <!-- Navigation Tabs -->
        <div class="nav-tabs" id="navTabs"></div>

        <!-- Dashboard Tab -->
        <div id="dashboard" class="tab-content active">
            <div class="welcome-message">
                <h2>üìä Dashboard - Vis√£o Geral</h2>
                <p>Acompanhe as principais m√©tricas e atividades da sua institui√ß√£o</p>
            </div>

            <div class="stats-grid">
                <div class="stat-card" onclick="switchTabById('students')">
                    <div class="stat-number" id="totalStudents">0</div>
                    <div class="stat-label">üë• Alunos</div>
                </div>
                <div class="stat-card success" onclick="switchTabById('students')">
                    <div class="stat-number" id="activeStudents">0</div>
                    <div class="stat-label">‚úÖ Ativos</div>
                </div>
                <div class="stat-card warning" onclick="switchTabById('turmas')">
                    <div class="stat-number" id="totalClasses">0</div>
                    <div class="stat-label">üè´ Turmas</div>
                </div>
                <div class="stat-card purple" onclick="switchTabById('pedagogico')">
                    <div class="stat-number" id="totalCourses">4</div>
                    <div class="stat-label">üìö Cursos</div>
                </div>
                <div class="stat-card danger" onclick="switchTabById('financeiro')">
                    <div class="stat-number" id="overduePayments">0</div>
                    <div class="stat-label">‚ö†Ô∏è Inadimplentes</div>
                </div>
                <div class="stat-card gold" onclick="switchTabById('gamificacao')">
                    <div class="stat-number" id="totalXP">0</div>
                    <div class="stat-label">üèÜ XP Total</div>
                </div>
            </div>

            <div class="card">
                <h3>üìà Resumo Financeiro</h3>
                <div class="financial-summary">
                    <div class="financial-item">
                        <div class="financial-value" id="totalRevenue">R$ 0,00</div>
                        <div>Faturamento</div>
                    </div>
                    <div class="financial-item">
                        <div class="financial-value" id="totalExpected">R$ 0,00</div>
                        <div>Previsto</div>
                    </div>
                    <div class="financial-item">
                        <div class="financial-value negative" id="totalOverdue">R$ 0,00</div>
                        <div>Vencido</div>
                    </div>
                </div>
            </div>

            <div class="card">
                <h3>üö® Alertas e Notifica√ß√µes</h3>
                <div id="alertsList">
                    <div class="alert alert-warning">
                        <strong>Alunos pr√≥ximos da conclus√£o:</strong> 3 alunos terminam em menos de 2 meses
                    </div>
                    <div class="alert alert-danger">
                        <strong>Inadimplentes:</strong> 5 alunos com parcelas vencidas
                    </div>
                </div>
            </div>
        </div>

        <!-- Gest√£o de Alunos -->
        <div id="students" class="tab-content">
            <div class="card">
                <div class="card-header">
                    <h2>üë• Gest√£o de Alunos</h2>
                    <button class="btn" onclick="openModal('studentModal')">‚ûï Novo Aluno</button>
                </div>

                <div class="search-filter">
                    <input type="text" id="studentSearch" placeholder="üîç Buscar aluno..." onkeyup="filterStudents()">
                    <select id="statusFilter" onchange="filterStudents()">
                        <option value="">Todos os Status</option>
                        <option value="ativo">Ativo</option>
                        <option value="inadimplente">Inadimplente</option>
                        <option value="trancado">Trancado</option>
                        <option value="cancelado">Cancelado</option>
                    </select>
                    <select id="courseFilter" onchange="filterStudents()">
                        <option value="">Todos os Cursos</option>
                        <option value="game-design">Game Design</option>
                        <option value="programacao">Programa√ß√£o</option>
                        <option value="3d-modeling">Modelagem 3D</option>
                        <option value="marketing-digital">Marketing Digital</option>
                    </select>
                </div>

                <div class="table-container">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>RA</th>
                                <th>Nome</th>
                                <th>Email</th>
                                <th>Curso</th>
                                <th>Turma</th>
                                <th>Status</th>
                                <th>Respons√°vel</th>
                                <th>A√ß√µes</th>
                            </tr>
                        </thead>
                        <tbody id="studentsTableBody">
                            <!-- Dados dos alunos ser√£o carregados aqui -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Gest√£o de Turmas -->
        <div id="turmas" class="tab-content">
            <div class="card">
                <div class="card-header">
                    <h2>üè´ Gest√£o de Turmas</h2>
                    <button class="btn" onclick="openModal('classModal')">‚ûï Nova Turma</button>
                </div>

                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-number" id="totalClassesDetail">0</div>
                        <div class="stat-label">üìö Turmas Ativas</div>
                    </div>
                    <div class="stat-card success">
                        <div class="stat-number" id="totalStudentsInClasses">0</div>
                        <div class="stat-label">üë• Alunos Matriculados</div>
                    </div>
                    <div class="stat-card warning">
                        <div class="stat-number" id="totalTeachers">0</div>
                        <div class="stat-label">üë®‚Äçüè´ Professores</div>
                    </div>
                </div>

                <div id="classesGrid" class="grid-container">
                    <!-- Cards das turmas ser√£o carregados aqui -->
                </div>
            </div>
        </div>

        <!-- Gest√£o Pedag√≥gica -->
        <div id="pedagogico" class="tab-content">
            <div class="card">
                <div class="card-header">
                    <h2>üìö Gest√£o Pedag√≥gica</h2>
                    <div>
                        <button class="btn" onclick="openModal('courseModal')">‚ûï Novo Curso</button>
                        <button class="btn btn-success" onclick="openModal('progressModal')">üìä Progresso</button>
                    </div>
                </div>

                <div class="course-grid">
                    <div class="course-card">
                        <h3>üéÆ Game Design</h3>
                        <p>Carga hor√°ria: 120h</p>
                        <p>M√≥dulos: 6</p>
                        <p>Valor: R$ 2.400,00</p>
                        <div class="course-stats">
                            <span class="badge success">24 Alunos</span>
                            <span class="badge info">3 Turmas</span>
                        </div>
                    </div>
                    <div class="course-card">
                        <h3>üíª Programa√ß√£o</h3>
                        <p>Carga hor√°ria: 150h</p>
                        <p>M√≥dulos: 8</p>
                        <p>Valor: R$ 3.000,00</p>
                        <div class="course-stats">
                            <span class="badge success">18 Alunos</span>
                            <span class="badge info">2 Turmas</span>
                        </div>
                    </div>
                    <div class="course-card">
                        <h3>üé® Modelagem 3D</h3>
                        <p>Carga hor√°ria: 100h</p>
                        <p>M√≥dulos: 5</p>
                        <p>Valor: R$ 2.000,00</p>
                        <div class="course-stats">
                            <span class="badge success">15 Alunos</span>
                            <span class="badge info">2 Turmas</span>
                        </div>
                    </div>
                    <div class="course-card">
                        <h3>üì± Marketing Digital</h3>
                        <p>Carga hor√°ria: 80h</p>
                        <p>M√≥dulos: 4</p>
                        <p>Valor: R$ 1.600,00</p>
                        <div class="course-stats">
                            <span class="badge success">12 Alunos</span>
                            <span class="badge info">1 Turma</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Gest√£o Financeira -->
        <div id="financeiro" class="tab-content">
            <div class="card">
                <div class="card-header">
                    <h2>üí∞ Gest√£o Financeira</h2>
                    <div>
                        <button class="btn" onclick="openModal('paymentModal')">‚ûï Novo Pagamento</button>
                        <button class="btn btn-success" onclick="generateFinancialReport()">üìä Relat√≥rio</button>
                    </div>
                </div>

                <div class="financial-summary">
                    <div class="financial-item">
                        <div class="financial-value" id="monthlyRevenue">R$ 45.600,00</div>
                        <div>Faturamento Mensal</div>
                    </div>
                    <div class="financial-item">
                        <div class="financial-value" id="monthlyExpected">R$ 52.000,00</div>
                        <div>Previsto Mensal</div>
                    </div>
                    <div class="financial-item">
                        <div class="financial-value negative" id="monthlyOverdue">R$ 6.400,00</div>
                        <div>Vencidas</div>
                    </div>
                    <div class="financial-item">
                        <div class="financial-value" id="nextDue">R$ 28.800,00</div>
                        <div>Pr√≥ximas a Vencer</div>
                    </div>
                </div>

                <div class="payment-methods">
                    <h3>üí≥ M√©todos de Pagamento</h3>
                    <div class="method-stats">
                        <div class="method-card">
                            <div class="method-icon">üí≥</div>
                            <div class="method-data">
                                <div class="method-value">R$ 18.240,00</div>
                                <div class="method-label">Cart√£o</div>
                            </div>
                        </div>
                        <div class="method-card">
                            <div class="method-icon">üì±</div>
                            <div class="method-data">
                                <div class="method-value">R$ 15.360,00</div>
                                <div class="method-label">PIX</div>
                            </div>
                        </div>
                        <div class="method-card">
                            <div class="method-icon">üßæ</div>
                            <div class="method-data">
                                <div class="method-value">R$ 12.000,00</div>
                                <div class="method-label">Boleto</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="overdue-students">
                    <h3>‚ö†Ô∏è Alunos Inadimplentes</h3>
                    <div class="table-container">
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>Aluno</th>
                                    <th>Curso</th>
                                    <th>Parcelas em Atraso</th>
                                    <th>Valor Total</th>
                                    <th>Dias em Atraso</th>
                                    <th>A√ß√µes</th>
                                </tr>
                            </thead>
                            <tbody id="overdueStudentsBody">
                                <!-- Lista de inadimplentes -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <!-- Chamada e Frequ√™ncia -->
        <div id="chamada" class="tab-content">
            <div class="card">
                <div class="card-header">
                    <h2>üìã Chamada e Frequ√™ncia</h2>
                    <div>
                        <button class="btn" onclick="openModal('attendanceModal')">‚úÖ Nova Chamada</button>
                        <button class="btn btn-success" onclick="generateAttendanceReport()">üìä Relat√≥rio</button>
                    </div>
                </div>

                <div class="attendance-selector">
                    <div class="form-row">
                        <div class="form-group">
                            <label>Turma:</label>
                            <select id="attendanceClassSelect">
                                <option value="">Selecione uma turma</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Data:</label>
                            <input type="date" id="attendanceDate" value="">
                        </div>
                        <div class="form-group" style="display: flex; align-items: end;">
                            <button class="btn" onclick="loadAttendance()">üìã Carregar Chamada</button>
                        </div>
                    </div>
                </div>

                <div id="attendanceList" class="attendance-container">
                    <div class="empty-state">
                        <h3>üìã Selecione uma turma e data</h3>
                        <p>Escolha uma turma e data para fazer a chamada dos alunos</p>
                    </div>
                </div>

                <div class="attendance-summary">
                    <h3>üìä Resumo de Frequ√™ncia</h3>
                    <div class="stats-grid">
                        <div class="stat-card success">
                            <div class="stat-number" id="presentToday">0</div>
                            <div class="stat-label">‚úÖ Presentes Hoje</div>
                        </div>
                        <div class="stat-card danger">
                            <div class="stat-number" id="absentToday">0</div>
                            <div class="stat-label">‚ùå Ausentes Hoje</div>
                        </div>
                        <div class="stat-card warning">
                            <div class="stat-number" id="attendanceRate">0%</div>
                            <div class="stat-label">üìà Taxa de Presen√ßa</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Portaria Digital -->
        <div id="portaria" class="tab-content">
            <div class="card">
                <div class="card-header">
                    <h2>üö™ Portaria Digital</h2>
                    <button class="btn" onclick="toggleQRScanner()">üì± Scanner QR</button>
                </div>

                <div class="entry-controls">
                    <div class="form-row">
                        <div class="form-group">
                            <label>RA do Aluno:</label>
                            <input type="text" id="studentRA" placeholder="Digite ou escaneie o RA">
                        </div>
                        <div class="form-group" style="display: flex; gap: 10px; align-items: end;">
                            <button class="btn btn-success" onclick="registerEntry()">üü¢ Entrada</button>
                            <button class="btn btn-warning" onclick="registerExit()">üî¥ Sa√≠da</button>
                        </div>
                    </div>
                </div>

                <div id="qrScanner" class="qr-scanner" style="display: none;">
                    <p>üì± Aponte a c√¢mera para o QR Code da carteirinha</p>
                </div>

                <div class="today-entries">
                    <h3>üìÖ Movimenta√ß√£o de Hoje</h3>
                    <div class="entries-list" id="todayEntries">
                        <!-- Lista de entradas e sa√≠das do dia -->
                    </div>
                </div>

                <div class="current-students">
                    <h3>üè´ Alunos Atualmente na Escola</h3>
                    <div class="current-list" id="currentStudentsList">
                        <!-- Lista de alunos presentes -->
                    </div>
                </div>
            </div>
        </div>

        <!-- RH e Colaboradores -->
        <div id="rh" class="tab-content">
            <div class="card">
                <div class="card-header">
                    <h2>üë• RH e Colaboradores</h2>
                    <button class="btn" onclick="openModal('employeeModal')">‚ûï Novo Colaborador</button>
                </div>

                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-number" id="totalEmployees">8</div>
                        <div class="stat-label">üë• Colaboradores</div>
                    </div>
                    <div class="stat-card success">
                        <div class="stat-number" id="activeEmployees">7</div>
                        <div class="stat-label">‚úÖ Ativos</div>
                    </div>
                    <div class="stat-card warning">
                        <div class="stat-number" id="onVacation">1</div>
                        <div class="stat-label">üèñÔ∏è Em F√©rias</div>
                    </div>
                    <div class="stat-card purple">
                        <div class="stat-number" id="payrollTotal">R$ 28.500</div>
                        <div class="stat-label">üí∞ Folha de Pagamento</div>
                    </div>
                </div>

                <div class="employee-grid" id="employeeGrid">
                    <!-- Cards dos colaboradores -->
                </div>

                <div class="payroll-summary">
                    <h3>üí∞ Folha de Pagamento</h3>
                    <div class="table-container">
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>Nome</th>
                                    <th>Cargo</th>
                                    <th>Sal√°rio Base</th>
                                    <th>Horas Extras</th>
                                    <th>Descontos</th>
                                    <th>L√≠quido</th>
                                    <th>Status</th>
                                </tr>
                            </thead>
                            <tbody id="payrollTableBody">
                                <!-- Dados da folha de pagamento -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <!-- Gamifica√ß√£o -->
        <div id="gamificacao" class="tab-content">
            <div class="card">
                <div class="card-header">
                    <h2>üéÆ Sistema de Gamifica√ß√£o</h2>
                    <button class="btn btn-gold" onclick="openModal('storeModal')">üõçÔ∏è Loja</button>
                </div>

                <div class="gamification-overview">
                    <div class="stats-grid">
                        <div class="stat-card gold">
                            <div class="stat-number" id="totalXPDetailed">15.420</div>
                            <div class="stat-label">‚≠ê XP Total Sistema</div>
                        </div>
                        <div class="stat-card purple">
                            <div class="stat-number" id="totalCoins">8.750</div>
                            <div class="stat-label">ü™ô Coins em Circula√ß√£o</div>
                        </div>
                        <div class="stat-card success">
                            <div class="stat-number" id="activeGamificationUsers">42</div>
                            <div class="stat-label">üéØ Usu√°rios Ativos</div>
                        </div>
                        <div class="stat-card warning">
                            <div class="stat-number" id="storeProducts">12</div>
                            <div class="stat-label">üõçÔ∏è Produtos na Loja</div>
                        </div>
                    </div>
                </div>

                <div class="leaderboard">
