<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GameCreators - Sistema de Gest√£o Escolar</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üéÆ</text></svg>">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #2196F3;
            --primary-dark: #1976D2;
            --primary-light: #BBDEFB;
            --success: #4CAF50;
            --success-dark: #45a049;
            --warning: #FF9800;
            --danger: #f44336;
            --info: #2196F3;
            --light: #f5f5f5;
            --dark: #333;
            --border: #e0e0e0;
            --purple: #9C27B0;
            --gold: #FFD700;
            --background: #fafafa;
            --card-shadow: 0 4px 20px rgba(0,0,0,0.08);
            --hover-shadow: 0 8px 30px rgba(0,0,0,0.12);
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        body {
            font-family: 'Inter', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: var(--dark);
            line-height: 1.6;
            overflow-x: hidden;
        }

        .login-container {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
        }

        .login-card {
            background: white;
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.15);
            width: 100%;
            max-width: 450px;
            text-align: center;
            backdrop-filter: blur(10px);
            animation: slideIn 0.6s ease-out;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .login-logo {
            font-size: 64px;
            margin-bottom: 20px;
            animation: bounce 2s infinite;
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-10px); }
            60% { transform: translateY(-5px); }
        }

        .login-title {
            font-size: 28px;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 10px;
        }

        .login-subtitle {
            color: #666;
            margin-bottom: 30px;
            font-size: 16px;
        }

        .login-tabs {
            display: flex;
            margin-bottom: 30px;
            background: var(--light);
            border-radius: 12px;
            padding: 4px;
        }

        .login-tab {
            flex: 1;
            padding: 12px;
            border: none;
            background: transparent;
            border-radius: 8px;
            cursor: pointer;
            transition: var(--transition);
            font-weight: 600;
            font-size: 14px;
        }

        .login-tab.active {
            background: white;
            color: var(--primary);
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .login-form {
            text-align: left;
        }

        .form-group {
            margin-bottom: 24px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #555;
            font-size: 14px;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 14px 16px;
            border: 2px solid var(--border);
            border-radius: 12px;
            font-size: 16px;
            transition: var(--transition);
            background: white;
            font-family: inherit;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(33, 150, 243, 0.1);
            transform: translateY(-1px);
        }

        .btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 14px 28px;
            border-radius: 12px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: var(--transition);
            margin-right: 12px;
            margin-bottom: 12px;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            text-decoration: none;
            position: relative;
            overflow: hidden;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.6s;
        }

        .btn:hover::before {
            left: 100%;
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: var(--hover-shadow);
        }

        .btn:active {
            transform: translateY(-1px);
        }

        .btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .btn-danger { background: linear-gradient(135deg, var(--danger), #d32f2f); }
        .btn-success { background: linear-gradient(135deg, var(--success), var(--success-dark)); }
        .btn-warning { background: linear-gradient(135deg, var(--warning), #F57C00); }
        .btn-secondary { background: linear-gradient(135deg, #6c757d, #5a6268); }
        .btn-info { background: linear-gradient(135deg, var(--info), #1976D2); }
        .btn-purple { background: linear-gradient(135deg, var(--purple), #7B1FA2); }

        .btn-sm {
            padding: 8px 12px;
            font-size: 12px;
            margin-right: 5px;
            margin-bottom: 5px;
        }

        .forgot-password {
            text-align: center;
            margin-top: 20px;
        }

        .forgot-password a {
            color: var(--primary);
            text-decoration: none;
            font-size: 14px;
        }

        .forgot-password a:hover {
            text-decoration: underline;
        }

        .main-app {
            display: none;
            max-width: 1600px;
            margin: 0 auto;
            padding: 20px;
            background: var(--background);
            min-height: 100vh;
            border-radius: 20px 20px 0 0;
            box-shadow: 0 -20px 40px rgba(0,0,0,0.15);
        }

        .header {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
            padding: 25px;
            border-radius: 16px;
            margin-bottom: 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 15px;
            box-shadow: var(--card-shadow);
        }

        .header-info {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .header h1 {
            font-size: 28px;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .header p {
            opacity: 0.9;
            font-size: 16px;
        }

        .user-role {
            background: rgba(255,255,255,0.2);
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 500;
            backdrop-filter: blur(10px);
        }

        .nav-tabs {
            display: flex;
            border-bottom: 3px solid var(--border);
            margin-bottom: 30px;
            flex-wrap: wrap;
            gap: 8px;
            overflow-x: auto;
            padding-bottom: 15px;
            position: sticky;
            top: 0;
            background: var(--background);
            z-index: 100;
            margin: 0 -20px 30px -20px;
            padding: 15px 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .nav-tab {
            padding: 14px 22px;
            background: white;
            border: 2px solid var(--border);
            border-radius: 12px;
            cursor: pointer;
            transition: var(--transition);
            font-weight: 600;
            font-size: 14px;
            white-space: nowrap;
            min-width: 130px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .nav-tab.active {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            border-color: var(--primary);
            transform: translateY(-3px);
            box-shadow: var(--hover-shadow);
        }

        .nav-tab:hover:not(.active) {
            background: var(--primary-light);
            border-color: var(--primary);
            transform: translateY(-2px);
            box-shadow: var(--card-shadow);
        }

        .nav-tab.hidden {
            display: none;
        }

        .tab-content {
            display: none;
            animation: fadeIn 0.4s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .tab-content.active {
            display: block;
        }

        .card {
            background: white;
            border-radius: 16px;
            padding: 28px;
            margin-bottom: 24px;
            box-shadow: var(--card-shadow);
            transition: var(--transition);
            border: 1px solid rgba(255,255,255,0.2);
        }

        .card:hover {
            transform: translateY(-4px);
            box-shadow: var(--hover-shadow);
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
            padding-bottom: 16px;
            border-bottom: 2px solid var(--border);
            flex-wrap: wrap;
            gap: 15px;
        }

        .card-header h2 {
            font-size: 24px;
            font-weight: 700;
            color: var(--dark);
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 24px;
            margin-bottom: 32px;
        }

        .stat-card {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
            padding: 28px;
            border-radius: 16px;
            text-align: center;
            transition: var(--transition);
            cursor: pointer;
            position: relative;
            overflow: hidden;
            border: 1px solid rgba(255,255,255,0.1);
        }

        .stat-card:hover {
            transform: scale(1.05) translateY(-5px);
            box-shadow: 0 15px 40px rgba(0,0,0,0.2);
        }

        .stat-card.success {
            background: linear-gradient(135deg, var(--success) 0%, var(--success-dark) 100%);
        }

        .stat-card.warning {
            background: linear-gradient(135deg, var(--warning) 0%, #F57C00 100%);
        }

        .stat-card.danger {
            background: linear-gradient(135deg, var(--danger) 0%, #d32f2f 100%);
        }

        .stat-card.purple {
            background: linear-gradient(135deg, var(--purple) 0%, #7B1FA2 100%);
        }

        .stat-card.gold {
            background: linear-gradient(135deg, var(--gold) 0%, #FFA500 100%);
            color: #333;
        }

        .stat-number {
            font-size: 36px;
            font-weight: 800;
            margin-bottom: 8px;
            text-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .stat-label {
            font-size: 14px;
            opacity: 0.95;
            font-weight: 500;
        }

        .table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 24px;
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: var(--card-shadow);
        }

        .table th,
        .table td {
            padding: 16px;
            text-align: left;
            border-bottom: 1px solid var(--border);
        }

        .table th {
            background: var(--light);
            font-weight: 700;
            color: var(--dark);
            font-size: 14px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .table tr:hover {
            background: rgba(33, 150, 243, 0.04);
            transform: scale(1.01);
            transition: var(--transition);
        }

        .table tr:last-child td {
            border-bottom: none;
        }

        .badge {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            display: inline-block;
        }

        .badge.success { background: var(--success); color: white; }
        .badge.danger { background: var(--danger); color: white; }
        .badge.warning { background: var(--warning); color: white; }
        .badge.info { background: var(--info); color: white; }
        .badge.secondary { background: #6c757d; color: white; }

        .notification {
            position: fixed;
            top: 24px;
            right: 24px;
            padding: 18px 24px;
            border-radius: 12px;
            color: white;
            font-weight: 600;
            z-index: 10001;
            transform: translateX(400px);
            transition: var(--transition);
            max-width: 350px;
            box-shadow: var(--hover-shadow);
            backdrop-filter: blur(10px);
        }

        .notification.show {
            transform: translateX(0);
        }

        .notification.success { background: linear-gradient(135deg, var(--success), var(--success-dark)); }
        .notification.error { background: linear-gradient(135deg, var(--danger), #d32f2f); }
        .notification.info { background: linear-gradient(135deg, var(--info), var(--primary-dark)); }
        .notification.warning { background: linear-gradient(135deg, var(--warning), #F57C00); }

        .modal {
            display: none;
            position: fixed;
            z-index: 10000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            backdrop-filter: blur(5px);
        }

        .modal-content {
            background: white;
            margin: 2% auto;
            padding: 30px;
            border-radius: 16px;
            width: 90%;
            max-width: 900px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            transform: translateY(-50px);
            transition: var(--transition);
            max-height: 85vh;
            overflow-y: auto;
        }

        .modal.show .modal-content {
            transform: translateY(0);
        }

        .financial-tabs, .pedagogic-tabs, .course-tabs, .user-tabs, .class-tabs {
            display: flex;
            gap: 8px;
            margin-bottom: 20px;
            background: var(--light);
            border-radius: 12px;
            padding: 4px;
            flex-wrap: wrap;
        }

        .financial-tab, .pedagogic-tab, .course-tab, .user-tab, .class-tab {
            flex: 1;
            padding: 12px;
            border: none;
            background: transparent;
            border-radius: 8px;
            cursor: pointer;
            transition: var(--transition);
            font-weight: 600;
            font-size: 14px;
            text-align: center;
            min-width: 120px;
        }

        .financial-tab.active, .pedagogic-tab.active, .course-tab.active, .user-tab.active, .class-tab.active {
            background: white;
            color: var(--primary);
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .filters-section {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
            align-items: center;
        }

        .filter-group {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .filter-group label {
            font-size: 12px;
            font-weight: 600;
            color: #666;
            text-transform: uppercase;
        }

        .filter-group select,
        .filter-group input {
            padding: 8px 12px;
            border: 2px solid var(--border);
            border-radius: 8px;
            font-size: 14px;
            background: white;
            min-width: 150px;
        }

        .search-section {
            background: var(--light);
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 20px;
        }

        .search-input-group {
            display: flex;
            gap: 10px;
            align-items: center;
            flex-wrap: wrap;
        }

        .search-input-group input {
            flex: 1;
            min-width: 250px;
        }

        .client-results {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .client-card {
            background: white;
            border: 2px solid var(--border);
            border-radius: 12px;
            padding: 20px;
            cursor: pointer;
            transition: var(--transition);
        }

        .client-card:hover {
            border-color: var(--primary);
            transform: translateY(-2px);
            box-shadow: var(--card-shadow);
        }

        .class-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .class-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: var(--card-shadow);
            transition: var(--transition);
            cursor: pointer;
            border-left: 4px solid var(--primary);
        }

        .class-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--hover-shadow);
        }

        .class-card h3 {
            color: var(--primary);
            margin-bottom: 15px;
            font-size: 18px;
        }

        .class-card.status-ativa {
            border-left-color: var(--success);
        }

        .class-card.status-completa {
            border-left-color: var(--warning);
        }

        .class-card.status-encerrada {
            border-left-color: var(--secondary);
        }

        .progress-bar {
            width: 100%;
            height: 20px;
            background: var(--light);
            border-radius: 10px;
            overflow: hidden;
            margin: 10px 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(135deg, var(--success), var(--success-dark));
            border-radius: 10px;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 12px;
            font-weight: 600;
        }

        .module-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 15px;
            box-shadow: var(--card-shadow);
            border-left: 4px solid var(--info);
        }

        .module-card.completed {
            border-left-color: var(--success);
            background: rgba(76, 175, 80, 0.05);
        }

        .module-card.current {
            border-left-color: var(--warning);
            background: rgba(255, 152, 0, 0.05);
        }

        .lesson-list {
            margin-top: 15px;
        }

        .lesson-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 0;
            border-bottom: 1px solid var(--border);
        }

        .lesson-item:last-child {
            border-bottom: none;
        }

        .connection-status {
            position: fixed;
            bottom: 20px;
            right: 20px;
            padding: 10px 15px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            z-index: 1000;
        }

        .connection-status.connected {
            background: var(--success);
            color: white;
        }

        .connection-status.disconnected {
            background: var(--warning);
            color: white;
        }

        .permission-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 10px;
            margin-top: 15px;
        }

        .permission-item {
            background: var(--light);
            padding: 15px;
            border-radius: 8px;
            text-align: center;
        }

        .permission-item input[type="checkbox"] {
            margin-right: 8px;
        }

        .attendance-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .attendance-student {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: var(--card-shadow);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .attendance-btn {
            padding: 8px 16px;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            margin: 0 5px;
        }

        .attendance-btn.present {
            background: var(--success);
            color: white;
        }

        .attendance-btn.absent {
            background: var(--danger);
            color: white;
        }

        .attendance-btn:hover {
            transform: scale(1.1);
        }

        .attendance-btn.active {
            opacity: 0.8;
            transform: scale(0.95);
        }

        .course-content, .pedagogic-content, .financial-content, .user-content, .class-content {
            display: none;
        }

        .course-content.active, .pedagogic-content.active, .financial-content.active, .user-content.active, .class-content.active {
            display: block;
        }

        .sheets-config {
            background: var(--light);
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 20px;
        }

        .sheets-status {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
        }

        .sheets-status.connected {
            color: var(--success);
        }

        .sheets-status.disconnected {
            color: var(--danger);
        }

        .lesson-input-group {
            display: flex;
            gap: 10px;
            margin-bottom: 10px;
            align-items: center;
        }

        .lesson-input-group input {
            padding: 8px 12px;
            border: 2px solid var(--border);
            border-radius: 8px;
            font-size: 14px;
        }

        .lesson-input-group .lesson-name {
            flex: 1;
        }

        .lesson-input-group .lesson-duration {
            width: 120px;
        }

        .financial-status {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .financial-summary-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: var(--card-shadow);
            border-left: 4px solid var(--info);
        }

        .financial-summary-card.paid {
            border-left-color: var(--success);
        }

        .financial-summary-card.pending {
            border-left-color: var(--warning);
        }

        .financial-summary-card.overdue {
            border-left-color: var(--danger);
        }

        .student-progress-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: var(--card-shadow);
            margin-bottom: 15px;
            border-left: 4px solid var(--primary);
        }

        .progress-details {
            margin-top: 15px;
        }

        .progress-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 0;
            border-bottom: 1px solid var(--border);
        }

        .progress-item:last-child {
            border-bottom: none;
        }

        .btn-group {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
            align-items: center;
        }

        .financial-actions {
            margin-top: 15px;
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        @media (max-width: 768px) {
            .login-card {
                padding: 30px 20px;
            }

            .main-app {
                padding: 15px;
            }
            
            .nav-tabs { 
                flex-direction: column; 
                overflow-x: visible;
                margin: 0 -15px 30px -15px;
                padding: 15px;
            }
            
            .nav-tab { 
                margin-bottom: 8px; 
                min-width: auto;
                font-size: 14px;
                padding: 12px 18px;
            }
            
            .header {
                flex-direction: column;
                text-align: center;
                padding: 20px;
            }
            
            .header h1 {
                font-size: 24px;
            }
            
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 16px;
            }
            
            .card {
                padding: 20px;
            }
            
            .card-header {
                flex-direction: column;
                gap: 15px;
                align-items: stretch;
            }
            
            .table {
                font-size: 14px;
            }
            
            .table th,
            .table td {
                padding: 10px 8px;
            }
            
            .btn {
                font-size: 14px;
                padding: 10px 16px;
            }
            
            .stat-number {
                font-size: 28px;
            }

            .modal-content {
                width: 95%;
                margin: 2% auto;
                padding: 20px;
            }

            .financial-tabs, .pedagogic-tabs, .course-tabs, .user-tabs, .class-tabs {
                flex-direction: column;
            }

            .filters-section {
                flex-direction: column;
                align-items: stretch;
            }

            .filter-group select,
            .filter-group input {
                min-width: auto;
            }

            .class-grid {
                grid-template-columns: 1fr;
            }

            .search-input-group {
                flex-direction: column;
                align-items: stretch;
            }

            .search-input-group input {
                min-width: auto;
                margin-bottom: 10px;
            }

            .client-results {
                grid-template-columns: 1fr;
            }

            .btn-group {
                justify-content: center;
            }

            .financial-status {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div id="connectionStatus" class="connection-status disconnected">
        ‚ö†Ô∏è Desconectado
    </div>

    <div id="loginScreen" class="login-container">
        <div class="login-card">
            <div class="login-logo">üéÆ</div>
            <h1 class="login-title">GameCreators</h1>
            <p class="login-subtitle">Sistema de Gest√£o Escolar</p>
            
            <div class="login-tabs">
                <button class="login-tab active" onclick="switchLoginTab('colaborador')">Colaborador</button>
                <button class="login-tab" onclick="switchLoginTab('aluno')">Aluno</button>
            </div>

            <form id="colaboradorLogin" class="login-form">
                <div class="form-group">
                    <label for="loginUsuario">Usu√°rio</label>
                    <input type="text" id="loginUsuario" placeholder="Digite seu usu√°rio" required>
                </div>
                <div class="form-group">
                    <label for="loginSenha">Senha</label>
                    <input type="password" id="loginSenha" placeholder="Digite sua senha" required>
                </div>
                <button type="submit" class="btn">
                    Entrar como Colaborador
                </button>
            </form>

            <form id="alunoLogin" class="login-form" style="display: none;">
                <div class="form-group">
                    <label for="loginRA">RA (Registro Acad√™mico)</label>
                    <input type="text" id="loginRA" placeholder="Digite seu RA" required>
                </div>
                <button type="submit" class="btn btn-info">
                    Entrar como Aluno
                </button>
            </form>

            <div class="forgot-password">
                <a href="#" onclick="showMessage('Entre em contato com a administra√ß√£o', 'info')">Esqueci minha senha</a>
            </div>
        </div>
    </div>

    <div id="mainApp" class="main-app">
        <div class="header">
            <div class="header-info">
                <div>
                    <h1>GameCreators - Sistema de Gest√£o</h1>
                    <p id="userWelcome">Bem-vindo!</p>
                </div>
                <div class="user-role" id="userRole">Usu√°rio</div>
            </div>
            <div style="display: flex; gap: 12px; align-items: center; flex-wrap: wrap;">
                <button class="btn btn-info" onclick="showSheetsConfig()" id="connectBtn">
                    <span id="sheetsStatusIcon">‚ö†Ô∏è</span> Sheets
                </button>
                <button class="btn btn-warning" onclick="exportData()" id="exportBtn">üìÅ Backup</button>
                <button class="btn btn-danger" onclick="logout()">üö™ Sair</button>
            </div>
        </div>

        <div class="nav-tabs" id="navTabs">
            <button class="nav-tab active" onclick="switchTab('dashboard')" data-role="all">üìä Dashboard</button>
            <button class="nav-tab" onclick="switchTab('students')" data-role="admin,professor" id="studentsTab">üë®‚Äçüéì Alunos</button>
            <button class="nav-tab" onclick="switchTab('classes')" data-role="admin,professor" id="classesTab">üë• Turmas</button>
            <button class="nav-tab" onclick="switchTab('courses')" data-role="admin" id="coursesTab">üìö Cursos</button>
            <button class="nav-tab" onclick="switchTab('pedagogic')" data-role="admin,professor" id="pedagogicTab">üéØ Pedag√≥gico</button>
            <button class="nav-tab" onclick="switchTab('financial')" data-role="admin" id="financialTab">üí∞ Financeiro</button>
            <button class="nav-tab" onclick="switchTab('users')" data-role="admin" id="usersTab">üë• Usu√°rios</button>
        </div>

        <!-- Dashboard Tab -->
        <div id="dashboard" class="tab-content active">
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-number" id="totalStudents">0</div>
                    <div class="stat-label">Total de Alunos</div>
                </div>
                <div class="stat-card success">
                    <div class="stat-number" id="activeStudents">0</div>
                    <div class="stat-label">Alunos Ativos</div>
                </div>
                <div class="stat-card warning">
                    <div class="stat-number" id="totalCourses">0</div>
                    <div class="stat-label">Cursos Ativos</div>
                </div>
                <div class="stat-card purple">
                    <div class="stat-number" id="totalClasses">0</div>
                    <div class="stat-label">Turmas Ativas</div>
                </div>
                <div class="stat-card gold">
                    <div class="stat-number" id="totalRevenue">R$ 0</div>
                    <div class="stat-label">Receita Total</div>
                </div>
                <div class="stat-card danger">
                    <div class="stat-number" id="pendingPayments">0</div>
                    <div class="stat-label">Pagamentos Pendentes</div>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <h2>üìà Vis√£o Geral do Sistema</h2>
                </div>
                <div class="class-grid">
                    <div class="class-card">
                        <h3>üéì Cursos em Andamento</h3>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 75%">75%</div>
                        </div>
                        <p><strong>M√©dia de Conclus√£o:</strong> 75%</p>
                    </div>
                    <div class="class-card">
                        <h3>üìã Frequ√™ncia Geral</h3>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 88%">88%</div>
                        </div>
                        <p><strong>Taxa de Presen√ßa:</strong> 88%</p>
                    </div>
                    <div class="class-card">
                        <h3>üí≥ Adimpl√™ncia</h3>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 92%">92%</div>
                        </div>
                        <p><strong>Taxa de Pagamento:</strong> 92%</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Students Tab -->
        <div id="students" class="tab-content">
            <div class="card">
                <div class="card-header">
                    <h2>üë®‚Äçüéì Gest√£o de Alunos</h2>
                    <button class="btn btn-success" onclick="showAddStudentModal()">‚ûï Novo Aluno</button>
                </div>
                
                <div class="filters-section">
                    <div class="filter-group">
                        <label>Status</label>
                        <select id="studentStatusFilter" onchange="filterStudents()">
                            <option value="">Todos</option>
                            <option value="ativo">Ativo</option>
                            <option value="inativo">Inativo</option>
                            <option value="suspenso">Suspenso</option>
                            <option value="trancado">Trancado</option>
                            <option value="cancelado">Cancelado</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label>Curso</label>
                        <select id="studentCourseFilter" onchange="filterStudents()">
                            <option value="">Todos os Cursos</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label>Turma</label>
                        <select id="studentClassFilter" onchange="filterStudents()">
                            <option value="">Todas as Turmas</option>
                        </select>
                    </div>
                </div>

                <table class="table" id="studentsTable">
                    <thead>
                        <tr>
                            <th>RA</th>
                            <th>Nome</th>
                            <th>Email</th>
                            <th>Curso</th>
                            <th>Turma</th>
                            <th>Status</th>
                            <th>Progresso</th>
                            <th>Data Matr√≠cula</th>
                            <th>A√ß√µes</th>
                        </tr>
                    </thead>
                    <tbody id="studentsTableBody">
                        <!-- Dados ser√£o carregados dinamicamente -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Classes Tab -->
        <div id="classes" class="tab-content">
            <div class="class-tabs">
                <button class="class-tab active" onclick="switchClassTab('list')">üìã Lista de Turmas</button>
                <button class="class-tab" onclick="switchClassTab('attendance')">üìÖ Chamada</button>
                <button class="class-tab" onclick="switchClassTab('schedule')">üïí Hor√°rios</button>
            </div>

            <div id="classList" class="class-content active">
                <div class="card">
                    <div class="card-header">
                        <h2>üë• Gest√£o de Turmas</h2>
                        <button class="btn btn-success" onclick="showAddClassModal()">‚ûï Nova Turma</button>
                    </div>

                    <div class="class-grid" id="classesGrid">
                        <!-- Turmas ser√£o carregadas aqui -->
                    </div>
                </div>
            </div>

            <div id="classAttendance" class="class-content">
                <div class="card">
                    <div class="card-header">
                        <h2>üìÖ Chamada por Turma</h2>
                        <div style="display: flex; gap: 10px; align-items: center;">
                            <select id="attendanceClassSelect" onchange="loadClassAttendance()">
                                <option value="">Selecione uma turma</option>
                            </select>
                            <input type="date" id="attendanceDate" onchange="loadClassAttendance()">
                        </div>
                    </div>
                    
                    <div id="classAttendanceGrid" class="attendance-grid">
                        <!-- Alunos da turma ser√£o carregados aqui -->
                    </div>
                    
                    <div style="text-align: center; margin-top: 20px;">
                        <button class="btn btn-success" onclick="saveClassAttendance()">üíæ Salvar Chamada</button>
                    </div>
                </div>
            </div>

            <div id="classSchedule" class="class-content">
                <div class="card">
                    <div class="card-header">
                        <h2>üïí Hor√°rios das Turmas</h2>
                    </div>
                    
                    <div id="scheduleGrid">
                        <!-- Hor√°rios ser√£o carregados aqui -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Courses Tab -->
        <div id="courses" class="tab-content">
            <div class="course-tabs">
                <button class="course-tab active" onclick="switchCourseTab('list')">üìã Lista de Cursos</button>
                <button class="course-tab" onclick="switchCourseTab('schedule')">üìÖ Cronogramas</button>
                <button class="course-tab" onclick="switchCourseTab('progress')">üìä Progresso</button>
            </div>

            <div id="courseList" class="course-content active">
                <div class="card">
                    <div class="card-header">
                        <h2>üìö Gest√£o de Cursos</h2>
                        <button class="btn btn-success" onclick="showAddCourseModal()">‚ûï Novo Curso</button>
                    </div>
                    
                    <table class="table" id="coursesTable">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Nome do Curso</th>
                                <th>Descri√ß√£o</th>
                                <th>Dura√ß√£o (horas)</th>
                                <th>Valor</th>
                                <th>Status</th>
                                <th>Alunos</th>
                                <th>Turmas</th>
                                <th>A√ß√µes</th>
                            </tr>
                        </thead>
                        <tbody id="coursesTableBody">
                            <!-- Dados ser√£o carregados dinamicamente -->
                        </tbody>
                    </table>
                </div>
            </div>

            <div id="courseSchedule" class="course-content">
                <div class="card">
                    <div class="card-header">
                        <h2>üìÖ Cronogramas de Cursos</h2>
                        <div>
                            <select id="scheduleCourseSelect" onchange="loadCourseSchedule()">
                                <option value="">Selecione um curso</option>
                            </select>
                            <button class="btn btn-success" onclick="showAddModuleModal()">‚ûï Novo M√≥dulo</button>
                        </div>
                    </div>
                    
                    <div id="courseScheduleContent">
                        <p>Selecione um curso para visualizar seu cronograma</p>
                    </div>
                </div>
            </div>

            <div id="courseProgress" class="course-content">
                <div class="card">
                    <div class="card-header">
                        <h2>üìä Progresso dos Cursos</h2>
                    </div>
                    
                    <div class="class-grid" id="courseProgressGrid">
                        <!-- Progresso ser√° carregado dinamicamente -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Pedagogic Tab -->
        <div id="pedagogic" class="tab-content">
            <div class="pedagogic-tabs">
                <button class="pedagogic-tab active" onclick="switchPedagogicTab('progress')">üìà Progresso Individual</button>
                <button class="pedagogic-tab" onclick="switchPedagogicTab('reports')">üìä Relat√≥rios</button>
                <button class="pedagogic-tab" onclick="switchPedagogicTab('evaluations')">üìù Avalia√ß√µes</button>
            </div>

            <div id="progressContent" class="pedagogic-content active">
                <div class="card">
                    <div class="card-header">
                        <h2>üìà Progresso Individual dos Alunos</h2>
                        <div style="display: flex; gap: 10px; align-items: center;">
                            <select id="progressCourseFilter" onchange="filterStudentProgress()">
                                <option value="">Todos os Cursos</option>
                            </select>
                            <select id="progressClassFilter" onchange="filterStudentProgress()">
                                <option value="">Todas as Turmas</option>
                            </select>
                            <input type="text" id="progressStudentSearch" placeholder="Buscar aluno..." onkeyup="filterStudentProgress()">
                        </div>
                    </div>
                    
                    <div id="studentsProgressGrid" class="class-grid">
                        <!-- Progresso dos alunos ser√° carregado aqui -->
                    </div>
                </div>
            </div>

            <div id="reportsContent" class="pedagogic-content">
                <div class="card">
                    <div class="card-header">
                        <h2>üìä Relat√≥rios de Frequ√™ncia</h2>
                        <div>
                            <select id="reportCourseSelect">
                                <option value="">Todos os Cursos</option>
                            </select>
                            <input type="date" id="reportStartDate">
                            <input type="date" id="reportEndDate">
                            <button class="btn btn-info" onclick="generateAttendanceReport()">üìã Gerar Relat√≥rio</button>
                        </div>
                    </div>
                    
                    <div id="attendanceReportContent">
                        <!-- Relat√≥rio ser√° exibido aqui -->
                    </div>
                </div>
            </div>

            <div id="evaluationsContent" class="pedagogic-content">
                <div class="card">
                    <div class="card-header">
                        <h2>üìù Avalia√ß√µes</h2>
                        <button class="btn btn-success" onclick="showAddEvaluationModal()">‚ûï Nova Avalia√ß√£o</button>
                    </div>
                    
                    <table class="table" id="evaluationsTable">
                        <thead>
                            <tr>
                                <th>Avalia√ß√£o</th>
                                <th>Curso</th>
                                <th>Turma</th>
                                <th>Data</th>
                                <th>Tipo</th>
                                <th>Status</th>
                                <th>A√ß√µes</th>
                            </tr>
                        </thead>
                        <tbody id="evaluationsTableBody">
                            <!-- Dados ser√£o carregados dinamicamente -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Financial Tab -->
        <div id="financial" class="tab-content">
            <div class="financial-tabs">
                <button class="financial-tab active" onclick="switchFinancialTab('overview')">üìä Vis√£o Geral</button>
                <button class="financial-tab" onclick="switchFinancialTab('payments')">üí≥ Pagamentos</button>
                <button class="financial-tab" onclick="switchFinancialTab('search')">üîç Consulta Cliente</button>
                <button class="financial-tab" onclick="switchFinancialTab('reports')">üìã Relat√≥rios</button>
            </div>

            <div id="financialOverview" class="financial-content active">
                <div class="stats-grid">
                    <div class="stat-card success">
                        <div class="stat-number" id="monthlyRevenue">R$ 0</div>
                        <div class="stat-label">Receita do M√™s</div>
                    </div>
                    <div class="stat-card warning">
                        <div class="stat-number" id="pendingAmount">R$ 0</div>
                        <div class="stat-label">Valores Pendentes</div>
                    </div>
                    <div class="stat-card danger">
                        <div class="stat-number" id="overdueCount">0</div>
                        <div class="stat-label">Pagamentos em Atraso</div>
                    </div>
                    <div class="stat-card purple">
                        <div class="stat-number" id="defaultersCount">0</div>
                        <div class="stat-label">Alunos Inadimplentes</div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h2>üí∞ Status Financeiro por Categoria</h2>
                    </div>
                    <div class="financial-status">
                        <div class="financial-summary-card paid">
                            <h4>‚úÖ Pagamentos em Dia</h4>
                            <div class="stat-number" id="upToDateCount">0</div>
                            <p>Alunos com pagamentos em dia</p>
                        </div>
                        <div class="financial-summary-card pending">
                            <h4>‚è≥ Pagamentos Pendentes</h4>
                            <div class="stat-number" id="pendingCount">0</div>
                            <p>Pagamentos aguardando vencimento</p>
                        </div>
                        <div class="financial-summary-card overdue">
                            <h4>‚ö†Ô∏è Alunos Inadimplentes</h4>
                            <div class="stat-number" id="overdueStudents">0</div>
                            <p>Alunos com pagamentos em atraso</p>
                        </div>
                    </div>
                </div>
            </div>

            <div id="paymentsContent" class="financial-content">
                <div class="card">
                    <div class="card-header">
                        <h2>üí≥ Gest√£o de Pagamentos</h2>
                        <button class="btn btn-success" onclick="showAddPaymentModal()">‚ûï Novo Pagamento</button>
                    </div>
                    
                    <div class="filters-section">
                        <div class="filter-group">
                            <label>Status</label>
                            <select id="paymentStatusFilter" onchange="filterPayments()">
                                <option value="">Todos</option>
                                <option value="pago">Pago</option>
                                <option value="pendente">Pendente</option>
                                <option value="vencido">Vencido</option>
                                <option value="cancelado">Cancelado</option>
                            </select>
                        </div>
                        <div class="filter-group">
                            <label>Per√≠odo</label>
                            <input type="month" id="paymentPeriodFilter" onchange="filterPayments()">
                        </div>
                        <div class="filter-group">
                            <label>Curso</label>
                            <select id="paymentCourseFilter" onchange="filterPayments()">
                                <option value="">Todos os Cursos</option>
                            </select>
                        </div>
                    </div>

                    <table class="table" id="paymentsTable">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Aluno</th>
                                <th>Curso</th>
                                <th>Tipo</th>
                                <th>Valor</th>
                                <th>Vencimento</th>
                                <th>Status</th>
                                <th>A√ß√µes</th>
                            </tr>
                        </thead>
                        <tbody id="paymentsTableBody">
                            <!-- Dados ser√£o carregados dinamicamente -->
                        </tbody>
                    </table>
                </div>
            </div>

            <div id="clientSearchContent" class="financial-content">
                <div class="card">
                    <div class="card-header">
                        <h2>üîç Consulta Situa√ß√£o Financeira do Cliente</h2>
                    </div>
                    
                    <div class="search-section">
                        <div class="search-input-group">
                            <input type="text" id="clientSearchInput" placeholder="Digite o nome do aluno ou RA..." onkeyup="searchClients()">
                            <button class="btn btn-info" onclick="searchClients()">üîç Buscar</button>
                        </div>
                        
                        <div id="clientSearchResults" class="client-results">
                            <!-- Resultados da busca ser√£o exibidos aqui -->
                        </div>
                    </div>
                    
                    <div id="clientFinancialDetails" style="display: none;">
                        <!-- Detalhes financeiros do cliente selecionado -->
                    </div>
                </div>
            </div>

            <div id="financialReports" class="financial-content">
                <div class="card">
                    <div class="card-header">
                        <h2>üìã Relat√≥rios Financeiros</h2>
                        <div>
                            <input type="month" id="reportMonth">
                            <button class="btn btn-info" onclick="generateFinancialReport()">üìä Gerar Relat√≥rio</button>
                            <button class="btn btn-warning" onclick="generateDefaultersReport()">‚ö†Ô∏è Relat√≥rio Inadimplentes</button>
                        </div>
                    </div>
                    
                    <div id="financialReportContent">
                        <!-- Relat√≥rio ser√° exibido aqui -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Users Tab -->
        <div id="users" class="tab-content">
            <div class="user-tabs">
                <button class="user-tab active" onclick="switchUserTab('list')">üë• Usu√°rios</button>
                <button class="user-tab" onclick="switchUserTab('permissions')">üîê Permiss√µes</button>
            </div>

            <div id="usersList" class="user-content active">
                <div class="card">
                    <div class="card-header">
                        <h2>üë• Gest√£o de Usu√°rios</h2>
                        <button class="btn btn-success" onclick="showAddUserModal()">‚ûï Novo Usu√°rio</button>
                    </div>
                    
                    <table class="table" id="usersTable">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Nome</th>
                                <th>Email</th>
                                <th>Usu√°rio</th>
                                <th>Fun√ß√£o</th>
                                <th>Status</th>
                                <th>√öltimo Acesso</th>
                                <th>A√ß√µes</th>
                            </tr>
                        </thead>
                        <tbody id="usersTableBody">
                            <!-- Dados ser√£o carregados dinamicamente -->
                        </tbody>
                    </table>
                </div>
            </div>

            <div id="permissionsContent" class="user-content">
                <div class="card">
                    <div class="card-header">
                        <h2>üîê Gest√£o de Permiss√µes</h2>
                    </div>
                    
                    <div class="permission-grid" id="permissionsGrid">
                        <!-- Permiss√µes ser√£o carregadas dinamicamente -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modals -->
    <!-- Add Student Modal -->
    <div id="addStudentModal" class="modal">
        <div class="modal-content">
            <h2>‚ûï Novo Aluno</h2>
            <form id="addStudentForm">
                <div class="form-group">
                    <label>Nome Completo</label>
                    <input type="text" id="studentName" required>
                </div>
                <div class="form-group">
                    <label>Email</label>
                    <input type="email" id="studentEmail" required>
                </div>
                <div class="form-group">
                    <label>CPF</label>
                    <input type="text" id="studentCPF" required>
                </div>
                <div class="form-group">
                    <label>Telefone</label>
                    <input type="tel" id="studentPhone" required>
                </div>
                <div class="form-group">
                    <label>Curso</label>
                    <select id="studentCourse" required>
                        <option value="">Selecione um curso</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Turma</label>
                    <select id="studentClass" required>
                        <option value="">Selecione uma turma</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Data de Nascimento</label>
                    <input type="date" id="studentBirthDate" required>
                </div>
                <div class="form-group">
                    <label>Status</label>
                    <select id="studentStatus" required>
                        <option value="ativo">Ativo</option>
                        <option value="inativo">Inativo</option>
                        <option value="suspenso">Suspenso</option>
                        <option value="trancado">Trancado</option>
                        <option value="cancelado">Cancelado</option>
                    </select>
                </div>
                <div style="text-align: right; margin-top: 20px;">
                    <button type="button" class="btn btn-secondary" onclick="closeModal('addStudentModal')">Cancelar</button>
                    <button type="submit" class="btn btn-success">Salvar Aluno</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add Class Modal -->
    <div id="addClassModal" class="modal">
        <div class="modal-content">
            <h2>‚ûï Nova Turma</h2>
            <form id="addClassForm">
                <div class="form-group">
                    <label>Nome da Turma</label>
                    <input type="text" id="className" required>
                </div>
                <div class="form-group">
                    <label>Curso</label>
                    <select id="classCourse" required>
                        <option value="">Selecione um curso</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Professor</label>
                    <select id="classTeacher">
                        <option value="">Selecione um professor</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Vagas Totais</label>
                    <input type="number" id="classMaxStudents" min="1" max="50" required>
                </div>
                <div class="form-group">
                    <label>Data de In√≠cio</label>
                    <input type="date" id="classStartDate" required>
                </div>
                <div class="form-group">
                    <label>Data de T√©rmino</label>
                    <input type="date" id="classEndDate" required>
                </div>
                <div class="form-group">
                    <label>Hor√°rio</label>
                    <input type="text" id="classSchedule" placeholder="Ex: Segunda e Quarta 19:00-22:00" required>
                </div>
                <div class="form-group">
                    <label>Descri√ß√£o</label>
                    <textarea id="classDescription" rows="3"></textarea>
                </div>
                <div style="text-align: right; margin-top: 20px;">
                    <button type="button" class="btn btn-secondary" onclick="closeModal('addClassModal')">Cancelar</button>
                    <button type="submit" class="btn btn-success">Salvar Turma</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add Course Modal -->
    <div id="addCourseModal" class="modal">
        <div class="modal-content">
            <h2>‚ûï Novo Curso</h2>
            <form id="addCourseForm">
                <div class="form-group">
                    <label>Nome do Curso</label>
                    <input type="text" id="courseName" required>
                </div>
                <div class="form-group">
                    <label>Descri√ß√£o</label>
                    <textarea id="courseDescription" rows="3" required></textarea>
                </div>
                <div class="form-group">
                    <label>Dura√ß√£o (horas)</label>
                    <input type="number" id="courseDuration" required>
                </div>
                <div class="form-group">
                    <label>Valor</label>
                    <input type="number" id="coursePrice" step="0.01" required>
                </div>
                <div class="form-group">
                    <label>Categoria</label>
                    <select id="courseCategory" required>
                        <option value="">Selecione uma categoria</option>
                        <option value="programacao">Programa√ß√£o</option>
                        <option value="design">Design</option>
                        <option value="marketing">Marketing</option>
                        <option value="negocios">Neg√≥cios</option>
                        <option value="outros">Outros</option>
                    </select>
                </div>
                <div style="text-align: right; margin-top: 20px;">
                    <button type="button" class="btn btn-secondary" onclick="closeModal('addCourseModal')">Cancelar</button>
                    <button type="submit" class="btn btn-success">Salvar Curso</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add Module Modal -->
    <div id="addModuleModal" class="modal">
        <div class="modal-content">
            <h2>‚ûï Novo M√≥dulo</h2>
            <form id="addModuleForm">
                <div class="form-group">
                    <label>Nome do M√≥dulo</label>
                    <input type="text" id="moduleName" required>
                </div>
                <div class="form-group">
                    <label>Descri√ß√£o</label>
                    <textarea id="moduleDescription" rows="3" required></textarea>
                </div>
                <div class="form-group">
                    <label>Ordem</label>
                    <input type="number" id="moduleOrder" required>
                </div>
                <div class="form-group">
                    <label>Dura√ß√£o Estimada (horas)</label>
                    <input type="number" id="moduleDuration" required>
                </div>
                <div id="lessonsContainer">
                    <h3>üìù Aulas do M√≥dulo</h3>
                    <div class="lesson-input-group">
                        <input type="text" placeholder="Nome da aula" class="lesson-name">
                        <input type="number" placeholder="Dura√ß√£o (min)" class="lesson-duration">
                        <button type="button" onclick="removeLessonInput(this)" class="btn btn-danger btn-sm">‚ùå</button>
                    </div>
                </div>
                <button type="button" onclick="addLessonInput()" class="btn btn-info">‚ûï Adicionar Aula</button>
                <div style="text-align: right; margin-top: 20px;">
                    <button type="button" class="btn btn-secondary" onclick="closeModal('addModuleModal')">Cancelar</button>
                    <button type="submit" class="btn btn-success">Salvar M√≥dulo</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add User Modal -->
    <div id="addUserModal" class="modal">
        <div class="modal-content">
            <h2>‚ûï Novo Usu√°rio</h2>
            <form id="addUserForm">
                <div class="form-group">
                    <label>Nome Completo</label>
                    <input type="text" id="userName" required>
                </div>
                <div class="form-group">
                    <label>Email</label>
                    <input type="email" id="userEmail" required>
                </div>
                <div class="form-group">
                    <label>Nome de Usu√°rio</label>
                    <input type="text" id="userUsername" required>
                </div>
                <div class="form-group">
                    <label>Senha</label>
                    <input type="password" id="userPassword" required>
                </div>
                <div class="form-group">
                    <label>Fun√ß√£o</label>
                    <select id="userRole" required>
                        <option value="">Selecione uma fun√ß√£o</option>
                        <option value="admin">Administrador</option>
                        <option value="professor">Professor</option>
                        <option value="atendimento">Atendimento</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Permiss√µes</label>
                    <div class="permission-grid">
                        <div class="permission-item">
                            <input type="checkbox" id="perm_dashboard" value="dashboard">
                            <label for="perm_dashboard">Dashboard</label>
                        </div>
                        <div class="permission-item">
                            <input type="checkbox" id="perm_students" value="students">
                            <label for="perm_students">Alunos</label>
                        </div>
                        <div class="permission-item">
                            <input type="checkbox" id="perm_classes" value="classes">
                            <label for="perm_classes">Turmas</label>
                        </div>
                        <div class="permission-item">
                            <input type="checkbox" id="perm_courses" value="courses">
                            <label for="perm_courses">Cursos</label>
                        </div>
                        <div class="permission-item">
                            <input type="checkbox" id="perm_pedagogic" value="pedagogic">
                            <label for="perm_pedagogic">Pedag√≥gico</label>
                        </div>
                        <div class="permission-item">
                            <input type="checkbox" id="perm_financial" value="financial">
                            <label for="perm_financial">Financeiro</label>
                        </div>
                        <div class="permission-item">
                            <input type="checkbox" id="perm_users" value="users">
                            <label for="perm_users">Usu√°rios</label>
                        </div>
                    </div>
                </div>
                <div style="text-align: right; margin-top: 20px;">
                    <button type="button" class="btn btn-secondary" onclick="closeModal('addUserModal')">Cancelar</button>
                    <button type="submit" class="btn btn-success">Salvar Usu√°rio</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add Payment Modal -->
    <div id="addPaymentModal" class="modal">
        <div class="modal-content">
            <h2>‚ûï Novo Pagamento</h2>
            <form id="addPaymentForm">
                <div class="form-group">
                    <label>Aluno</label>
                    <select id="paymentStudent" required>
                        <option value="">Selecione um aluno</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Curso</label>
                    <select id="paymentCourse" required>
                        <option value="">Selecione um curso</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Valor</label>
                    <input type="number" id="paymentAmount" step="0.01" required>
                </div>
                <div class="form-group">
                    <label>Data de Vencimento</label>
                    <input type="date" id="paymentDueDate" required>
                </div>
                <div class="form-group">
                    <label>Tipo</label>
                    <select id="paymentType" required>
                        <option value="">Selecione o tipo</option>
                        <option value="mensalidade">Mensalidade</option>
                        <option value="matricula">Matr√≠cula</option>
                        <option value="material">Material</option>
                        <option value="outros">Outros</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Status</label>
                    <select id="paymentStatus">
                        <option value="pendente">Pendente</option>
                        <option value="pago">Pago</option>
                        <option value="vencido">Vencido</option>
                        <option value="cancelado">Cancelado</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Observa√ß√µes</label>
                    <textarea id="paymentNotes" rows="3"></textarea>
                </div>
                <div style="text-align: right; margin-top: 20px;">
                    <button type="button" class="btn btn-secondary" onclick="closeModal('addPaymentModal')">Cancelar</button>
                    <button type="submit" class="btn btn-success">Salvar Pagamento</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add Evaluation Modal -->
    <div id="addEvaluationModal" class="modal">
        <div class="modal-content">
            <h2>‚ûï Nova Avalia√ß√£o</h2>
            <form id="addEvaluationForm">
                <div class="form-group">
                    <label>Nome da Avalia√ß√£o</label>
                    <input type="text" id="evaluationName" required>
                </div>
                <div class="form-group">
                    <label>Curso</label>
                    <select id="evaluationCourse" onchange="loadEvaluationClasses()" required>
                        <option value="">Selecione um curso</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Turma</label>
                    <select id="evaluationClass" required>
                        <option value="">Selecione uma turma</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Tipo</label>
                    <select id="evaluationType" required>
                        <option value="">Selecione o tipo</option>
                        <option value="prova">Prova</option>
                        <option value="projeto">Projeto</option>
                        <option value="trabalho">Trabalho</option>
                        <option value="participacao">Participa√ß√£o</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Data</label>
                    <input type="date" id="evaluationDate" required>
                </div>
                <div class="form-group">
                    <label>Peso (0-10)</label>
                    <input type="number" id="evaluationWeight" min="0" max="10" step="0.1" required>
                </div>
                <div class="form-group">
                    <label>Descri√ß√£o</label>
                    <textarea id="evaluationDescription" rows="3"></textarea>
                </div>
                <div style="text-align: right; margin-top: 20px;">
                    <button type="button" class="btn btn-secondary" onclick="closeModal('addEvaluationModal')">Cancelar</button>
                    <button type="submit" class="btn btn-success">Salvar Avalia√ß√£o</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Sheets Configuration Modal -->
    <div id="sheetsConfigModal" class="modal">
        <div class="modal-content">
            <h2>üìä Configura√ß√£o Google Sheets</h2>
            <div class="sheets-status" id="sheetsStatus">
                <span>‚ö†Ô∏è</span>
                <span>N√£o conectado</span>
            </div>
            
            <form id="sheetsConfigForm">
                <div class="form-group">
                    <label>ID da Planilha</label>
                    <input type="text" id="sheetsId" placeholder="1BxiMVs0XRA5nFMdKvBdBZjgmUUqptlbs74OgvE2upms" required>
                    <small>ID encontrado na URL da planilha do Google Sheets</small>
                </div>
                <div class="form-group">
                    <label>URL da Planilha</label>
                    <input type="url" id="sheetsUrl" placeholder="https://docs.google.com/spreadsheets/d/..." required>
                    <small>URL completa da planilha do Google Sheets</small>
                </div>
                <div class="form-group">
                    <label>Aba dos Alunos</label>
                    <input type="text" id="sheetsStudentsTab" value="Alunos" required>
                </div>
                <div class="form-group">
                    <label>Aba dos Cursos</label>
                    <input type="text" id="sheetsCoursesTab" value="Cursos" required>
                </div>
                <div class="form-group">
                    <label>Aba das Turmas</label>
                    <input type="text" id="sheetsClassesTab" value="Turmas" required>
                </div>
                <div class="form-group">
                    <label>Aba Financeira</label>
                    <input type="text" id="sheetsFinancialTab" value="Financeiro" required>
                </div>
                <div class="form-group">
                    <label>Aba de Frequ√™ncia</label>
                    <input type="text" id="sheetsAttendanceTab" value="Frequencia" required>
                </div>
                
                <div style="text-align: right; margin-top: 20px;">
                    <button type="button" class="btn btn-secondary" onclick="closeModal('sheetsConfigModal')">Cancelar</button>
                    <button type="button" class="btn btn-info" onclick="testSheetsConnection()">üîç Testar Conex√£o</button>
                    <button type="submit" class="btn btn-success">üíæ Salvar Configura√ß√£o</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Student Progress Modal -->
    <div id="studentProgressModal" class="modal">
        <div class="modal-content">
            <h2 id="progressModalTitle">üìà Progresso do Aluno</h2>
            <div id="studentProgressContent">
                <!-- Conte√∫do do progresso ser√° carregado aqui -->
            </div>
            <div style="text-align: right; margin-top: 20px;">
                <button type="button" class="btn btn-secondary" onclick="closeModal('studentProgressModal')">Fechar</button>
                <button type="button" class="btn btn-warning" onclick="updateStudentProgress()">‚úèÔ∏è Atualizar Progresso</button>
            </div>
        </div>
    </div>

    <!-- Client Financial Details Modal -->
    <div id="clientFinancialModal" class="modal">
        <div class="modal-content">
            <h2 id="financialModalTitle">üí∞ Situa√ß√£o Financeira</h2>
            <div id="clientFinancialContent">
                <!-- Conte√∫do financeiro ser√° carregado aqui -->
            </div>
            <div style="text-align: right; margin-top: 20px;">
                <button type="button" class="btn btn-secondary" onclick="closeModal('clientFinancialModal')">Fechar</button>
            </div>
        </div>
    </div>

    <script>
        // Sistema de Gest√£o Escolar - GameCreators - Vers√£o Completa
        // Vari√°veis globais
        let currentUser = null;
        let systemData = {
            students: [],
            courses: [],
            classes: [],
            users: [],
            payments: [],
            attendance: [],
            evaluations: [],
            modules: [],
            lessons: [],
            studentProgress: [],
            sheetsConfig: null
        };

        // Inicializa√ß√£o do sistema
        document.addEventListener('DOMContentLoaded', function() {
            initializeSystem();
            loadSystemData();
            setupEventListeners();
        });

        function initializeSystem() {
            // Carregar dados do localStorage se existirem
            const savedData = localStorage.getItem('gamecreators_system_data');
            if (savedData) {
                systemData = JSON.parse(savedData);
            }
            
            // Verificar se h√° usu√°rio logado
            const savedUser = localStorage.getItem('gamecreators_current_user');
            if (savedUser) {
                currentUser = JSON.parse(savedUser);
                showMainApp();
            }
            
            updateConnectionStatus();
        }

        function setupEventListeners() {
            // Login forms
            document.getElementById('colaboradorLogin').addEventListener('submit', handleColaboradorLogin);
            document.getElementById('alunoLogin').addEventListener('submit', handleAlunoLogin);
            
            // Modais
            document.getElementById('addStudentForm').addEventListener('submit', handleAddStudent);
            document.getElementById('addClassForm').addEventListener('submit', handleAddClass);
            document.getElementById('addCourseForm').addEventListener('submit', handleAddCourse);
            document.getElementById('addModuleForm').addEventListener('submit', handleAddModule);
            document.getElementById('addUserForm').addEventListener('submit', handleAddUser);
            document.getElementById('addPaymentForm').addEventListener('submit', handleAddPayment);
            document.getElementById('addEvaluationForm').addEventListener('submit', handleAddEvaluation);
            document.getElementById('sheetsConfigForm').addEventListener('submit', handleSheetsConfig);

            // Auto-atualiza√ß√£o de status dos pagamentos
            setInterval(updatePaymentStatuses, 60000); // Verificar a cada minuto
        }

        // Sistema de Login
        function switchLoginTab(type) {
            document.querySelectorAll('.login-tab').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.login-form').forEach(form => form.style.display = 'none');
            
            document.querySelector(`[onclick="switchLoginTab('${type}')"]`).classList.add('active');
            document.getElementById(`${type}Login`).style.display = 'block';
        }

        function handleColaboradorLogin(e) {
            e.preventDefault();
            const username = document.getElementById('loginUsuario').value;
            const password = document.getElementById('loginSenha').value;
            
            // Verificar credenciais
            const user = systemData.users.find(u => u.username === username && u.password === password && u.status === 'ativo');
            
            if (user) {
                currentUser = user;
                user.lastAccess = new Date().toISOString();
                localStorage.setItem('gamecreators_current_user', JSON.stringify(user));
                saveSystemData();
                showMainApp();
                showMessage('Login realizado com sucesso!', 'success');
            } else {
                showMessage('Usu√°rio ou senha inv√°lidos!', 'error');
            }
        }

        function handleAlunoLogin(e) {
            e.preventDefault();
            const ra = document.getElementById('loginRA').value;
            
            // Verificar se o RA existe
            const student = systemData.students.find(s => s.ra === ra && s.status === 'ativo');
            
            if (student) {
                currentUser = {
                    id: student.id,
                    name: student.name,
                    role: 'student',
                    studentData: student
                };
                localStorage.setItem('gamecreators_current_user', JSON.stringify(currentUser));
                showMainApp();
                showMessage('Bem-vindo, ' + student.name + '!', 'success');
            } else {
                showMessage('RA n√£o encontrado ou inativo!', 'error');
            }
        }

        function showMainApp() {
            document.getElementById('loginScreen').style.display = 'none';
            document.getElementById('mainApp').style.display = 'block';
            
            updateUserInterface();
            loadDashboardData();
            updateConnectionStatus();
        }

        function updateUserInterface() {
            if (!currentUser) return;
            
            document.getElementById('userWelcome').textContent = `Bem-vindo, ${currentUser.name}!`;
            document.getElementById('userRole').textContent = getRoleLabel(currentUser.role);
            
            // Mostrar/ocultar abas baseado na fun√ß√£o do usu√°rio
            const tabs = document.querySelectorAll('.nav-tab[data-role]');
            tabs.forEach(tab => {
                const roles = tab.dataset.role.split(',');
                if (roles.includes(currentUser.role) || roles.includes('all')) {
                    tab.style.display = 'block';
                } else {
                    tab.style.display = 'none';
                }
            });
        }

        function getRoleLabel(role) {
            const labels = {
                'admin': 'Administrador',
                'professor': 'Professor',
                'atendimento': 'Atendimento',
                'student': 'Aluno'
            };
            return labels[role] || 'Usu√°rio';
        }

        function logout() {
            currentUser = null;
            localStorage.removeItem('gamecreators_current_user');
            document.getElementById('loginScreen').style.display = 'flex';
            document.getElementById('mainApp').style.display = 'none';
            
            // Resetar forms
            document.getElementById('colaboradorLogin').reset();
            document.getElementById('alunoLogin').reset();
            switchLoginTab('colaborador');
        }

        // Sistema de abas
        function switchTab(tabName) {
            // Remover active de todas as abas
            document.querySelectorAll('.nav-tab').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
            
            // Ativar aba selecionada
            document.querySelector(`[onclick="switchTab('${tabName}')"]`).classList.add('active');
            document.getElementById(tabName).classList.add('active');
            
            // Carregar dados espec√≠ficos da aba
            switch(tabName) {
                case 'dashboard':
                    loadDashboardData();
                    break;
                case 'students':
                    loadStudentsData();
                    break;
                case 'classes':
                    loadClassesData();
                    break;
                case 'courses':
                    loadCoursesData();
                    break;
                case 'pedagogic':
                    loadPedagogicData();
                    break;
                case 'financial':
                    loadFinancialData();
                    break;
                case 'users':
                    loadUsersData();
                    break;
            }
        }

        // Sub-abas
        function switchCourseTab(tabName) {
            document.querySelectorAll('.course-tab').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.course-content').forEach(content => content.classList.remove('active'));
            
            document.querySelector(`[onclick="switchCourseTab('${tabName}')"]`).classList.add('active');
            document.getElementById(`course${tabName.charAt(0).toUpperCase() + tabName.slice(1)}`).classList.add('active');
            
            if (tabName === 'schedule') loadCourseScheduleOptions();
            if (tabName === 'progress') loadCourseProgress();
        }

        function switchPedagogicTab(tabName) {
            document.querySelectorAll('.pedagogic-tab').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.pedagogic-content').forEach(content => content.classList.remove('active'));
            
            document.querySelector(`[onclick="switchPedagogicTab('${tabName}')"]`).classList.add('active');
            document.getElementById(`${tabName}Content`).classList.add('active');
            
            if (tabName === 'progress') loadStudentProgressData();
            if (tabName === 'reports') loadReportOptions();
            if (tabName === 'evaluations') loadEvaluationsData();
        }

        function switchFinancialTab(tabName) {
            document.querySelectorAll('.financial-tab').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.financial-content').forEach(content => content.classList.remove('active'));
            
            document.querySelector(`[onclick="switchFinancialTab('${tabName}')"]`).classList.add('active');
            
            let contentId = '';
            switch(tabName) {
                case 'overview': contentId = 'financialOverview'; break;
                case 'payments': contentId = 'paymentsContent'; break;
                case 'search': contentId = 'clientSearchContent'; break;
                case 'reports': contentId = 'financialReports'; break;
            }
            
            document.getElementById(contentId).classList.add('active');
            
            if (tabName === 'payments') loadPaymentsData();
            if (tabName === 'search') setupClientSearch();
        }

        function switchUserTab(tabName) {
            document.querySelectorAll('.user-tab').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.user-content').forEach(content => content.classList.remove('active'));
            
            document.querySelector(`[onclick="switchUserTab('${tabName}')"]`).classList.add('active');
            document.getElementById(`${tabName === 'list' ? 'usersList' : 'permissionsContent'}`).classList.add('active');
            
            if (tabName === 'permissions') loadPermissionsData();
        }

        function switchClassTab(tabName) {
            document.querySelectorAll('.class-tab').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.class-content').forEach(content => content.classList.remove('active'));
            
            document.querySelector(`[onclick="switchClassTab('${tabName}')"]`).classList.add('active');
            
            let contentId = '';
            switch(tabName) {
                case 'list': contentId = 'classList'; break;
                case 'attendance': contentId = 'classAttendance'; break;
                case 'schedule': contentId = 'classSchedule'; break;
            }
            
            document.getElementById(contentId).classList.add('active');
            
            if (tabName === 'attendance') loadClassAttendanceOptions();
            if (tabName === 'schedule') loadClassSchedules();
        }

        // Carregamento de dados
        function loadSystemData() {
            // Inicializar com usu√°rio admin padr√£o se n√£o existir
            if (systemData.users.length === 0) {
                systemData.users.push({
                    id: 1,
                    name: 'Administrador',
                    email: 'admin@gamecreators.com',
                    username: 'admin',
                    password: 'admin123',
                    role: 'admin',
                    status: 'ativo',
                    lastAccess: new Date().toISOString(),
                    permissions: ['dashboard', 'students', 'classes', 'courses', 'pedagogic', 'financial', 'users']
                });

                // Dados de exemplo para demonstra√ß√£o
                initializeSampleData();
                saveSystemData();
            }
        }

        function initializeSampleData() {
            // Adicionar cursos de exemplo se n√£o existirem
            if (systemData.courses.length === 0) {
                systemData.courses = [
                    {
                        id: 1,
                        name: 'Desenvolvimento de Jogos Unity',
                        description: 'Curso completo de desenvolvimento de jogos usando Unity',
                        duration: 120,
                        price: 1200.00,
                        category: 'programacao',
                        status: 'ativo',
                        createdDate: new Date().toISOString()
                    },
                    {
                        id: 2,
                        name: 'Game Design Fundamentals',
                        description: 'Princ√≠pios b√°sicos de design de jogos',
                        duration: 80,
                        price: 800.00,
                        category: 'design',
                        status: 'ativo',
                        createdDate: new Date().toISOString()
                    }
                ];
            }

            // Adicionar turmas de exemplo se n√£o existirem
            if (systemData.classes.length === 0) {
                systemData.classes = [
                    {
                        id: 1,
                        name: 'Unity B√°sico - Turma A',
                        courseId: 1,
                        teacherId: null,
                        maxStudents: 20,
                        currentStudents: 0,
                        startDate: '2024-03-01',
                        endDate: '2024-06-30',
                        schedule: 'Segunda e Quarta 19:00-22:00',
                        status: 'ativa',
                        description: 'Turma iniciante de Unity'
                    }
                ];
            }
        }

        function loadDashboardData() {
            // Atualizar estat√≠sticas
            document.getElementById('totalStudents').textContent = systemData.students.length;
            document.getElementById('activeStudents').textContent = systemData.students.filter(s => s.status === 'ativo').length;
            document.getElementById('totalCourses').textContent = systemData.courses.length;
            document.getElementById('totalClasses').textContent = systemData.classes.filter(c => c.status === 'ativa').length;
            
            const totalRevenue = systemData.payments.filter(p => p.status === 'pago').reduce((sum, p) => sum + parseFloat(p.amount), 0);
            document.getElementById('totalRevenue').textContent = `R$ ${totalRevenue.toFixed(2)}`;
            
            const pendingPayments = systemData.payments.filter(p => p.status === 'pendente').length;
            document.getElementById('pendingPayments').textContent = pendingPayments;
        }

        function loadStudentsData() {
            const tbody = document.getElementById('studentsTableBody');
            const courseSelect = document.getElementById('studentCourseFilter');
            const classSelect = document.getElementById('studentClassFilter');
            
            // Limpar e popular filtros
            courseSelect.innerHTML = '<option value="">Todos os Cursos</option>';
            systemData.courses.forEach(course => {
                courseSelect.innerHTML += `<option value="${course.id}">${course.name}</option>`;
            });

            classSelect.innerHTML = '<option value="">Todas as Turmas</option>';
            systemData.classes.forEach(cls => {
                classSelect.innerHTML += `<option value="${cls.id}">${cls.name}</option>`;
            });
            
            // Carregar lista de alunos
            tbody.innerHTML = '';
            systemData.students.forEach(student => {
                const course = systemData.courses.find(c => c.id === student.courseId);
                const studentClass = systemData.classes.find(c => c.id === student.classId);
                const progress = getStudentProgress(student.id);
                
                const row = `
                    <tr>
                        <td>${student.ra}</td>
                        <td>${student.name}</td>
                        <td>${student.email}</td>
                        <td>${course ? course.name : 'N/A'}</td>
                        <td>${studentClass ? studentClass.name : 'N/A'}</td>
                        <td><span class="badge ${getStatusColor(student.status)}">${student.status}</span></td>
                        <td>
                            <div class="progress-bar" style="height: 15px;">
                                <div class="progress-fill" style="width: ${progress}%">${progress}%</div>
                            </div>
                        </td>
                        <td>${formatDate(student.enrollmentDate)}</td>
                        <td class="btn-group">
                            <button class="btn btn-info btn-sm" onclick="viewStudentProgress(${student.id})">üìà</button>
                            <button class="btn btn-success btn-sm" onclick="viewStudent(${student.id})">üëÅÔ∏è</button>
                            <button class="btn btn-warning btn-sm" onclick="editStudent(${student.id})">‚úèÔ∏è</button>
                            <button class="btn btn-danger btn-sm" onclick="deleteStudent(${student.id})">üóëÔ∏è</button>
                        </td>
                    </tr>
                `;
                tbody.innerHTML += row;
            });
        }

        function loadClassesData() {
            const grid = document.getElementById('classesGrid');
            grid.innerHTML = '';
            
            systemData.classes.forEach(cls => {
                const course = systemData.courses.find(c => c.id === cls.courseId);
                const studentsCount = systemData.students.filter(s => s.classId === cls.id).length;
                const occupancyPercent = Math.round((studentsCount / cls.maxStudents) * 100);
                const availableSpots = cls.maxStudents - studentsCount;
                
                const statusClass = cls.status === 'ativa' ? 'status-ativa' : 
                                  cls.status === 'completa' ? 'status-completa' : 'status-encerrada';
                
                const card = `
                    <div class="class-card ${statusClass}">
                        <h3>${cls.name}</h3>
                        <p><strong>Curso:</strong> ${course ? course.name : 'N/A'}</p>
                        <p><strong>Per√≠odo:</strong> ${formatDate(cls.startDate)} - ${formatDate(cls.endDate)}</p>
                        <p><strong>Hor√°rio:</strong> ${cls.schedule}</p>
                        <p><strong>Status:</strong> <span class="badge ${getStatusColor(cls.status)}">${cls.status}</span></p>
                        
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: ${occupancyPercent}%">${occupancyPercent}%</div>
                        </div>
                        <p><strong>Alunos:</strong> ${studentsCount}/${cls.maxStudents} (${availableSpots} vagas dispon√≠veis)</p>
                        
                        <div class="btn-group" style="margin-top: 15px;">
                            <button class="btn btn-info btn-sm" onclick="viewClassStudents(${cls.id})">üë• Alunos</button>
                            <button class="btn btn-success btn-sm" onclick="takeClassAttendance(${cls.id})">üìã Chamada</button>
                            <button class="btn btn-warning btn-sm" onclick="editClass(${cls.id})">‚úèÔ∏è</button>
                            <button class="btn btn-danger btn-sm" onclick="deleteClass(${cls.id})">üóëÔ∏è</button>
                        </div>
                    </div>
                `;
                grid.innerHTML += card;
            });
        }

        function loadCoursesData() {
            const tbody = document.getElementById('coursesTableBody');
            
            tbody.innerHTML = '';
            systemData.courses.forEach(course => {
                const studentsCount = systemData.students.filter(s => s.courseId === course.id).length;
                const classesCount = systemData.classes.filter(c => c.courseId === course.id).length;
                
                const row = `
                    <tr>
                        <td>${course.id}</td>
                        <td>${course.name}</td>
                        <td>${course.description}</td>
                        <td>${course.duration}h</td>
                        <td>R$ ${parseFloat(course.price).toFixed(2)}</td>
                        <td><span class="badge ${getStatusColor(course.status)}">${course.status}</span></td>
                        <td>${studentsCount}</td>
                        <td>${classesCount}</td>
                        <td class="btn-group">
                            <button class="btn btn-info btn-sm" onclick="viewCourse(${course.id})">üëÅÔ∏è</button>
                            <button class="btn btn-warning btn-sm" onclick="editCourse(${course.id})">‚úèÔ∏è</button>
                            <button class="btn btn-danger btn-sm" onclick="deleteCourse(${course.id})">üóëÔ∏è</button>
                        </td>
                    </tr>
                `;
                tbody.innerHTML += row;
            });
        }

        function loadUsersData() {
            const tbody = document.getElementById('usersTableBody');
            
            tbody.innerHTML = '';
            systemData.users.forEach(user => {
                const row = `
                    <tr>
                        <td>${user.id}</td>
                        <td>${user.name}</td>
                        <td>${user.email}</td>
                        <td>${user.username}</td>
                        <td>${getRoleLabel(user.role)}</td>
                        <td><span class="badge ${getStatusColor(user.status)}">${user.status}</span></td>
                        <td>${formatDate(user.lastAccess)}</td>
                        <td class="btn-group">
                            <button class="btn btn-info btn-sm" onclick="viewUser(${user.id})">üëÅÔ∏è</button>
                            <button class="btn btn-warning btn-sm" onclick="editUser(${user.id})">‚úèÔ∏è</button>
                            <button class="btn btn-danger btn-sm" onclick="deleteUser(${user.id})">üóëÔ∏è</button>
                        </td>
                    </tr>
                `;
                tbody.innerHTML += row;
            });
        }

        function loadPedagogicData() {
            loadStudentProgressData();
        }

        function loadFinancialData() {
            updatePaymentStatuses(); // Atualizar status antes de calcular
            
            const monthlyRevenue = systemData.payments
                .filter(p => p.status === 'pago' && isCurrentMonth(p.paymentDate))
                .reduce((sum, p) => sum + parseFloat(p.amount), 0);
            
            const pendingAmount = systemData.payments
                .filter(p => p.status === 'pendente')
                .reduce((sum, p) => sum + parseFloat(p.amount), 0);
            
            const overdueCount = systemData.payments.filter(p => p.status === 'vencido').length;
            
            // Contar alunos inadimplentes (com pelo menos um pagamento vencido)
            const defaulterStudents = new Set(
                systemData.payments
                    .filter(p => p.status === 'vencido')
                    .map(p => p.studentId)
            );
            
            document.getElementById('monthlyRevenue').textContent = `R$ ${monthlyRevenue.toFixed(2)}`;
            document.getElementById('pendingAmount').textContent = `R$ ${pendingAmount.toFixed(2)}`;
            document.getElementById('overdueCount').textContent = overdueCount;
            document.getElementById('defaultersCount').textContent = defaulterStudents.size;

            // Atualizar cards de status
            const upToDateStudents = systemData.students.filter(s => {
                const hasOverduePayments = systemData.payments.some(p => p.studentId === s.id && p.status === 'vencido');
                return !hasOverduePayments && s.status === 'ativo';
            });
            
            document.getElementById('upToDateCount').textContent = upToDateStudents.length;
            document.getElementById('pendingCount').textContent = systemData.payments.filter(p => p.status === 'pendente').length;
            document.getElementById('overdueStudents').textContent = defaulterStudents.size;
        }

        // Fun√ß√µes dos modais
        function showAddStudentModal() {
            const courseSelect = document.getElementById('studentCourse');
            const classSelect = document.getElementById('studentClass');
            
            courseSelect.innerHTML = '<option value="">Selecione um curso</option>';
            systemData.courses.forEach(course => {
                courseSelect.innerHTML += `<option value="${course.id}">${course.name}</option>`;
            });

            classSelect.innerHTML = '<option value="">Selecione uma turma</option>';
            systemData.classes.forEach(cls => {
                classSelect.innerHTML += `<option value="${cls.id}">${cls.name}</option>`;
            });
            
            document.getElementById('addStudentModal').style.display = 'block';
            setTimeout(() => document.getElementById('addStudentModal').classList.add('show'), 10);
        }

        function showAddClassModal() {
            const courseSelect = document.getElementById('classCourse');
            const teacherSelect = document.getElementById('classTeacher');
            
            courseSelect.innerHTML = '<option value="">Selecione um curso</option>';
            systemData.courses.forEach(course => {
                courseSelect.innerHTML += `<option value="${course.id}">${course.name}</option>`;
            });

            teacherSelect.innerHTML = '<option value="">Selecione um professor</option>';
            systemData.users.filter(u => u.role === 'professor').forEach(teacher => {
                teacherSelect.innerHTML += `<option value="${teacher.id}">${teacher.name}</option>`;
            });
            
            document.getElementById('addClassModal').style.display = 'block';
            setTimeout(() => document.getElementById('addClassModal').classList.add('show'), 10);
        }

        function showAddCourseModal() {
            document.getElementById('addCourseModal').style.display = 'block';
            setTimeout(() => document.getElementById('addCourseModal').classList.add('show'), 10);
        }

        function showAddUserModal() {
            document.getElementById('addUserModal').style.display = 'block';
            setTimeout(() => document.getElementById('addUserModal').classList.add('show'), 10);
        }

        function showAddPaymentModal() {
            const studentSelect = document.getElementById('paymentStudent');
            const courseSelect = document.getElementById('paymentCourse');
            
            studentSelect.innerHTML = '<option value="">Selecione um aluno</option>';
            systemData.students.forEach(student => {
                studentSelect.innerHTML += `<option value="${student.id}">${student.name} (${student.ra})</option>`;
            });
            
            courseSelect.innerHTML = '<option value="">Selecione um curso</option>';
            systemData.courses.forEach(course => {
                courseSelect.innerHTML += `<option value="${course.id}">${course.name}</option>`;
            });
            
            document.getElementById('addPaymentModal').style.display = 'block';
            setTimeout(() => document.getElementById('addPaymentModal').classList.add('show'), 10);
        }

        function showAddEvaluationModal() {
            const courseSelect = document.getElementById('evaluationCourse');
            courseSelect.innerHTML = '<option value="">Selecione um curso</option>';
            systemData.courses.forEach(course => {
                courseSelect.innerHTML += `<option value="${course.id}">${course.name}</option>`;
            });
            
            document.getElementById('addEvaluationModal').style.display = 'block';
            setTimeout(() => document.getElementById('addEvaluationModal').classList.add('show'), 10);
        }

        function showAddModuleModal() {
            const selectedCourse = document.getElementById('scheduleCourseSelect').value;
            if (!selectedCourse) {
                showMessage('Selecione um curso primeiro!', 'warning');
                return;
            }
            
            document.getElementById('addModuleModal').style.display = 'block';
            setTimeout(() => document.getElementById('addModuleModal').classList.add('show'), 10);
        }

        function showSheetsConfig() {
            // Carregar configura√ß√µes salvas
            if (systemData.sheetsConfig) {
                document.getElementById('sheetsId').value = systemData.sheetsConfig.id || '';
                document.getElementById('sheetsUrl').value = systemData.sheetsConfig.url || '';
                document.getElementById('sheetsStudentsTab').value = systemData.sheetsConfig.studentsTab || 'Alunos';
                document.getElementById('sheetsCoursesTab').value = systemData.sheetsConfig.coursesTab || 'Cursos';
                document.getElementById('sheetsClassesTab').value = systemData.sheetsConfig.classesTab || 'Turmas';
                document.getElementById('sheetsFinancialTab').value = systemData.sheetsConfig.financialTab || 'Financeiro';
                document.getElementById('sheetsAttendanceTab').value = systemData.sheetsConfig.attendanceTab || 'Frequencia';
            }
            
            updateSheetsStatus();
            document.getElementById('sheetsConfigModal').style.display = 'block';
            setTimeout(() => document.getElementById('sheetsConfigModal').classList.add('show'), 10);
        }

        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('show');
            setTimeout(() => document.getElementById(modalId).style.display = 'none', 300);
        }

        // Handlers dos formul√°rios
        function handleAddStudent(e) {
            e.preventDefault();
            
            const studentData = {
                id: Date.now(),
                ra: generateRA(),
                name: document.getElementById('studentName').value,
                email: document.getElementById('studentEmail').value,
                cpf: document.getElementById('studentCPF').value,
                phone: document.getElementById('studentPhone').value,
                courseId: parseInt(document.getElementById('studentCourse').value),
                classId: parseInt(document.getElementById('studentClass').value),
                birthDate: document.getElementById('studentBirthDate').value,
                enrollmentDate: new Date().toISOString(),
                status: document.getElementById('studentStatus').value
            };
            
            // Verificar se a turma tem vagas
            const selectedClass = systemData.classes.find(c => c.id === studentData.classId);
            if (selectedClass) {
                const currentStudents = systemData.students.filter(s => s.classId === selectedClass.id).length;
                if (currentStudents >= selectedClass.maxStudents) {
                    showMessage('Turma n√£o possui vagas dispon√≠veis!', 'error');
                    return;
                }
                selectedClass.currentStudents = currentStudents + 1;
            }
            
            systemData.students.push(studentData);
            
            // Criar progresso inicial do aluno
            const courseModules = systemData.modules.filter(m => m.courseId === studentData.courseId);
            systemData.studentProgress.push({
                id: Date.now() + 1,
                studentId: studentData.id,
                courseId: studentData.courseId,
                classId: studentData.classId,
                startDate: new Date().toISOString(),
                currentModuleId: courseModules.length > 0 ? courseModules[0].id : null,
                currentLessonId: null,
                completedModules: [],
                completedLessons: [],
                progressPercent: 0,
                lastActivity: new Date().toISOString()
            });
            
            saveSystemData();
            syncWithSheets('students', studentData);
            
            closeModal('addStudentModal');
            loadStudentsData();
            loadClassesData();
            loadDashboardData();
            showMessage('Aluno adicionado com sucesso!', 'success');
            document.getElementById('addStudentForm').reset();
        }

        function handleAddClass(e) {
            e.preventDefault();
            
            const classData = {
                id: Date.now(),
                name: document.getElementById('className').value,
                courseId: parseInt(document.getElementById('classCourse').value),
                teacherId: document.getElementById('classTeacher').value ? parseInt(document.getElementById('classTeacher').value) : null,
                maxStudents: parseInt(document.getElementById('classMaxStudents').value),
                currentStudents: 0,
                startDate: document.getElementById('classStartDate').value,
                endDate: document.getElementById('classEndDate').value,
                schedule: document.getElementById('classSchedule').value,
                description: document.getElementById('classDescription').value,
                status: 'ativa',
                createdDate: new Date().toISOString()
            };
            
            systemData.classes.push(classData);
            saveSystemData();
            syncWithSheets('classes', classData);
            
            closeModal('addClassModal');
            loadClassesData();
            loadDashboardData();
            showMessage('Turma criada com sucesso!', 'success');
            document.getElementById('addClassForm').reset();
        }

        function handleAddCourse(e) {
            e.preventDefault();
            
            const courseData = {
                id: Date.now(),
                name: document.getElementById('courseName').value,
                description: document.getElementById('courseDescription').value,
                duration: parseInt(document.getElementById('courseDuration').value),
                price: parseFloat(document.getElementById('coursePrice').value),
                category: document.getElementById('courseCategory').value,
                status: 'ativo',
                createdDate: new Date().toISOString()
            };
            
            systemData.courses.push(courseData);
            saveSystemData();
            syncWithSheets('courses', courseData);
            
            closeModal('addCourseModal');
            loadCoursesData();
            loadDashboardData();
            showMessage('Curso adicionado com sucesso!', 'success');
            document.getElementById('addCourseForm').reset();
        }

        function handleAddModule(e) {
            e.preventDefault();
            
            const selectedCourse = document.getElementById('scheduleCourseSelect').value;
            const lessons = [];
            
            // Coletar aulas
            document.querySelectorAll('.lesson-input-group').forEach(group => {
                const name = group.querySelector('.lesson-name').value;
                const duration = group.querySelector('.lesson-duration').value;
                if (name && duration) {
                    lessons.push({
                        id: Date.now() + Math.random(),
                        name: name,
                        duration: parseInt(duration),
                        completed: false
                    });
                }
            });
            
            const moduleData = {
                id: Date.now(),
                courseId: parseInt(selectedCourse),
                name: document.getElementById('moduleName').value,
                description: document.getElementById('moduleDescription').value,
                order: parseInt(document.getElementById('moduleOrder').value),
                duration: parseInt(document.getElementById('moduleDuration').value),
                lessons: lessons,
                status: 'ativo'
            };
            
            systemData.modules.push(moduleData);
            saveSystemData();
            
            closeModal('addModuleModal');
            loadCourseSchedule();
            showMessage('M√≥dulo adicionado com sucesso!', 'success');
            document.getElementById('addModuleForm').reset();
        }

        function handleAddUser(e) {
            e.preventDefault();
            
            // Verificar se usu√°rio j√° existe
            const existingUser = systemData.users.find(u => u.username === document.getElementById('userUsername').value);
            if (existingUser) {
                showMessage('Nome de usu√°rio j√° existe!', 'error');
                return;
            }
            
            // Coletar permiss√µes
            const permissions = [];
            document.querySelectorAll('#addUserModal input[type="checkbox"]:checked').forEach(checkbox => {
                permissions.push(checkbox.value);
            });
            
            const userData = {
                id: Date.now(),
                name: document.getElementById('userName').value,
                email: document.getElementById('userEmail').value,
                username: document.getElementById('userUsername').value,
                password: document.getElementById('userPassword').value,
                role: document.getElementById('userRole').value,
                permissions: permissions,
                status: 'ativo',
                createdDate: new Date().toISOString(),
                lastAccess: null
            };
            
            systemData.users.push(userData);
            saveSystemData();
            
            closeModal('addUserModal');
            loadUsersData();
            showMessage('Usu√°rio adicionado com sucesso!', 'success');
            document.getElementById('addUserForm').reset();
        }

        function handleAddPayment(e) {
            e.preventDefault();
            
            const paymentData = {
                id: Date.now(),
                studentId: parseInt(document.getElementById('paymentStudent').value),
                courseId: parseInt(document.getElementById('paymentCourse').value),
                amount: parseFloat(document.getElementById('paymentAmount').value),
                dueDate: document.getElementById('paymentDueDate').value,
                type: document.getElementById('paymentType').value,
                status: document.getElementById('paymentStatus').value,
                notes: document.getElementById('paymentNotes').value,
                createdDate: new Date().toISOString(),
                paymentDate: document.getElementById('paymentStatus').value === 'pago' ? new Date().toISOString() : null
            };
            
            systemData.payments.push(paymentData);
            saveSystemData();
            syncWithSheets('payments', paymentData);
            
            closeModal('addPaymentModal');
            loadPaymentsData();
            loadFinancialData();
            loadDashboardData();
            showMessage('Pagamento adicionado com sucesso!', 'success');
            document.getElementById('addPaymentForm').reset();
        }

        function handleAddEvaluation(e) {
            e.preventDefault();
            
            const evaluationData = {
                id: Date.now(),
                name: document.getElementById('evaluationName').value,
                courseId: parseInt(document.getElementById('evaluationCourse').value),
                classId: parseInt(document.getElementById('evaluationClass').value),
                type: document.getElementById('evaluationType').value,
                date: document.getElementById('evaluationDate').value,
                weight: parseFloat(document.getElementById('evaluationWeight').value),
                description: document.getElementById('evaluationDescription').value,
                status: 'ativo',
                createdDate: new Date().toISOString()
            };
            
            systemData.evaluations.push(evaluationData);
            saveSystemData();
            
            closeModal('addEvaluationModal');
            loadEvaluationsData();
            showMessage('Avalia√ß√£o adicionada com sucesso!', 'success');
            document.getElementById('addEvaluationForm').reset();
        }

        function handleSheetsConfig(e) {
            e.preventDefault();
            
            const sheetsConfig = {
                id: document.getElementById('sheetsId').value,
                url: document.getElementById('sheetsUrl').value,
                studentsTab: document.getElementById('sheetsStudentsTab').value,
                coursesTab: document.getElementById('sheetsCoursesTab').value,
                classesTab: document.getElementById('sheetsClassesTab').value,
                financialTab: document.getElementById('sheetsFinancialTab').value,
                attendanceTab: document.getElementById('sheetsAttendanceTab').value,
                connected: true,
                lastSync: new Date().toISOString()
            };
            
            systemData.sheetsConfig = sheetsConfig;
            saveSystemData();
            
            closeModal('sheetsConfigModal');
            updateConnectionStatus();
            showMessage('Configura√ß√£o do Sheets salva com sucesso!', 'success');
        }

        // Fun√ß√µes de progresso do aluno
        function getStudentProgress(studentId) {
            const progress = systemData.studentProgress.find(p => p.studentId === studentId);
            return progress ? progress.progressPercent : 0;
        }

        function loadStudentProgressData() {
            const courseSelect = document.getElementById('progressCourseFilter');
            const classSelect = document.getElementById('progressClassFilter');
            
            // Popular filtros
            courseSelect.innerHTML = '<option value="">Todos os Cursos</option>';
            systemData.courses.forEach(course => {
                courseSelect.innerHTML += `<option value="${course.id}">${course.name}</option>`;
            });

            classSelect.innerHTML = '<option value="">Todas as Turmas</option>';
            systemData.classes.forEach(cls => {
                classSelect.innerHTML += `<option value="${cls.id}">${cls.name}</option>`;
            });
            
            displayStudentProgress();
        }

        function displayStudentProgress() {
            const grid = document.getElementById('studentsProgressGrid');
            grid.innerHTML = '';
            
            systemData.students.forEach(student => {
                const progress = systemData.studentProgress.find(p => p.studentId === student.id);
                const course = systemData.courses.find(c => c.id === student.courseId);
                const studentClass = systemData.classes.find(c => c.id === student.classId);
                
                if (!progress) return;
                
                const currentModule = systemData.modules.find(m => m.id === progress.currentModuleId);
                const progressPercent = progress.progressPercent || 0;
                
                const card = `
                    <div class="student-progress-card">
                        <h4>${student.name} (${student.ra})</h4>
                        <p><strong>Curso:</strong> ${course ? course.name : 'N/A'}</p>
                        <p><strong>Turma:</strong> ${studentClass ? studentClass.name : 'N/A'}</p>
                        <p><strong>Status:</strong> <span class="badge ${getStatusColor(student.status)}">${student.status}</span></p>
                        
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: ${progressPercent}%">${progressPercent}%</div>
                        </div>
                        
                        <div class="progress-details">
                            <div class="progress-item">
                                <span><strong>Data de In√≠cio:</strong></span>
                                <span>${formatDate(progress.startDate)}</span>
                            </div>
                            <div class="progress-item">
                                <span><strong>M√≥dulo Atual:</strong></span>
                                <span>${currentModule ? currentModule.name : 'N/A'}</span>
                            </div>
                            <div class="progress-item">
                                <span><strong>M√≥dulos Conclu√≠dos:</strong></span>
                                <span>${progress.completedModules ? progress.completedModules.length : 0}</span>
                            </div>
                            <div class="progress-item">
                                <span><strong>√öltima Atividade:</strong></span>
                                <span>${formatDate(progress.lastActivity)}</span>
                            </div>
                        </div>
                        
                        <div class="btn-group" style="margin-top: 15px;">
                            <button class="btn btn-info btn-sm" onclick="viewStudentProgress(${student.id})">üìä Detalhes</button>
                            <button class="btn btn-warning btn-sm" onclick="updateStudentProgressModal(${student.id})">‚úèÔ∏è Atualizar</button>
                        </div>
                    </div>
                `;
                grid.innerHTML += card;
            });
        }

        function filterStudentProgress() {
            const courseFilter = document.getElementById('progressCourseFilter').value;
            const classFilter = document.getElementById('progressClassFilter').value;
            const searchTerm = document.getElementById('progressStudentSearch').value.toLowerCase();
            
            const grid = document.getElementById('studentsProgressGrid');
            grid.innerHTML = '';
            
            let filteredStudents = systemData.students;
            
            if (courseFilter) {
                filteredStudents = filteredStudents.filter(s => s.courseId === parseInt(courseFilter));
            }
            
            if (classFilter) {
                filteredStudents = filteredStudents.filter(s => s.classId === parseInt(classFilter));
            }
            
            if (searchTerm) {
                filteredStudents = filteredStudents.filter(s => 
                    s.name.toLowerCase().includes(searchTerm) || 
                    s.ra.toLowerCase().includes(searchTerm)
                );
            }
            
            filteredStudents.forEach(student => {
                const progress = systemData.studentProgress.find(p => p.studentId === student.id);
                const course = systemData.courses.find(c => c.id === student.courseId);
                const studentClass = systemData.classes.find(c => c.id === student.classId);
                
                if (!progress) return;
                
                const currentModule = systemData.modules.find(m => m.id === progress.currentModuleId);
                const progressPercent = progress.progressPercent || 0;
                
                const card = `
                    <div class="student-progress-card">
                        <h4>${student.name} (${student.ra})</h4>
                        <p><strong>Curso:</strong> ${course ? course.name : 'N/A'}</p>
                        <p><strong>Turma:</strong> ${studentClass ? studentClass.name : 'N/A'}</p>
                        <p><strong>Status:</strong> <span class="badge ${getStatusColor(student.status)}">${student.status}</span></p>
                        
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: ${progressPercent}%">${progressPercent}%</div>
                        </div>
                        
                        <div class="progress-details">
                            <div class="progress-item">
                                <span><strong>Data de In√≠cio:</strong></span>
                                <span>${formatDate(progress.startDate)}</span>
                            </div>
                            <div class="progress-item">
                                <span><strong>M√≥dulo Atual:</strong></span>
                                <span>${currentModule ? currentModule.name : 'N/A'}</span>
                            </div>
                            <div class="progress-item">
                                <span><strong>M√≥dulos Conclu√≠dos:</strong></span>
                                <span>${progress.completedModules ? progress.completedModules.length : 0}</span>
                            </div>
                            <div class="progress-item">
                                <span><strong>√öltima Atividade:</strong></span>
                                <span>${formatDate(progress.lastActivity)}</span>
                            </div>
                        </div>
                        
                        <div class="btn-group" style="margin-top: 15px;">
                            <button class="btn btn-info btn-sm" onclick="viewStudentProgress(${student.id})">üìä Detalhes</button>
                            <button class="btn btn-warning btn-sm" onclick="updateStudentProgressModal(${student.id})">‚úèÔ∏è Atualizar</button>
                        </div>
                    </div>
                `;
                grid.innerHTML += card;
            });
        }

        function viewStudentProgress(studentId) {
            const student = systemData.students.find(s => s.id === studentId);
            const progress = systemData.studentProgress.find(p => p.studentId === studentId);
            const course = systemData.courses.find(c => c.id === student.courseId);
            const modules = systemData.modules.filter(m => m.courseId === student.courseId).sort((a, b) => a.order - b.order);
            
            if (!progress) {
                showMessage('Progresso n√£o encontrado para este aluno', 'warning');
                return;
            }
            
            document.getElementById('progressModalTitle').textContent = `Progresso de ${student.name}`;
            
            let html = `
                <div class="student-progress-details">
                    <h3>üìä Detalhes do Progresso</h3>
                    <p><strong>Aluno:</strong> ${student.name} (${student.ra})</p>
                    <p><strong>Curso:</strong> ${course ? course.name : 'N/A'}</p>
                    <p><strong>Data de In√≠cio:</strong> ${formatDate(progress.startDate)}</p>
                    <p><strong>Progresso Geral:</strong> ${progress.progressPercent}%</p>
                    
                    <div class="progress-bar" style="margin: 20px 0;">
                        <div class="progress-fill" style="width: ${progress.progressPercent}%">${progress.progressPercent}%</div>
                    </div>
                    
                    <h4>üìö M√≥dulos do Curso</h4>
            `;
            
            modules.forEach(module => {
                const isCompleted = progress.completedModules && progress.completedModules.includes(module.id);
                const isCurrent = progress.currentModuleId === module.id;
                const statusClass = isCompleted ? 'completed' : isCurrent ? 'current' : '';
                const statusText = isCompleted ? '‚úÖ Conclu√≠do' : isCurrent ? 'üìö Atual' : '‚è≥ Pendente';
                
                html += `
                    <div class="module-card ${statusClass}">
                        <h5>${module.name} - ${statusText}</h5>
                        <p>${module.description}</p>
                        <p><strong>Dura√ß√£o:</strong> ${module.duration}h</p>
                `;
                
                if (module.lessons && module.lessons.length > 0) {
                    html += '<div class="lesson-list"><h6>Aulas:</h6>';
                    module.lessons.forEach(lesson => {
                        const lessonCompleted = progress.completedLessons && progress.completedLessons.includes(lesson.id);
                        html += `
                            <div class="lesson-item">
                                <span>${lessonCompleted ? '‚úÖ' : '‚è≥'} ${lesson.name}</span>
                                <span>${lesson.duration} min</span>
                            </div>
                        `;
                    });
                    html += '</div>';
                }
                
                html += '</div>';
            });
            
            html += '</div>';
            
            document.getElementById('studentProgressContent').innerHTML = html;
            document.getElementById('studentProgressModal').style.display = 'block';
            setTimeout(() => document.getElementById('studentProgressModal').classList.add('show'), 10);
        }

        // Sistema Financeiro Avan√ßado
        function setupClientSearch() {
            // Inicializar busca de clientes
            document.getElementById('clientSearchResults').innerHTML = '';
            document.getElementById('clientFinancialDetails').style.display = 'none';
        }

        function searchClients() {
            const searchTerm = document.getElementById('clientSearchInput').value.toLowerCase().trim();
            const resultsContainer = document.getElementById('clientSearchResults');
            
            if (!searchTerm) {
                resultsContainer.innerHTML = '<p>Digite um nome ou RA para buscar</p>';
                return;
            }
            
            const matchingStudents = systemData.students.filter(student => 
                student.name.toLowerCase().includes(searchTerm) ||
                student.ra.toLowerCase().includes(searchTerm) ||
                student.email.toLowerCase().includes(searchTerm)
            );
            
            if (matchingStudents.length === 0) {
                resultsContainer.innerHTML = '<p>Nenhum aluno encontrado</p>';
                return;
            }
            
            resultsContainer.innerHTML = '';
            matchingStudents.forEach(student => {
                const course = systemData.courses.find(c => c.id === student.courseId);
                const payments = systemData.payments.filter(p => p.studentId === student.id);
                const totalPaid = payments.filter(p => p.status === 'pago').reduce((sum, p) => sum + parseFloat(p.amount), 0);
                const totalPending = payments.filter(p => p.status === 'pendente').reduce((sum, p) => sum + parseFloat(p.amount), 0);
                const hasOverdue = payments.some(p => p.status === 'vencido');
                
                const financialStatus = hasOverdue ? 'Inadimplente' : totalPending > 0 ? 'Pend√™ncias' : 'Em Dia';
                const statusClass = hasOverdue ? 'danger' : totalPending > 0 ? 'warning' : 'success';
                
                const card = `
                    <div class="client-card" onclick="showClientFinancialDetails(${student.id})">
                        <h4>${student.name}</h4>
                        <p><strong>RA:</strong> ${student.ra}</p>
                        <p><strong>Email:</strong> ${student.email}</p>
                        <p><strong>Curso:</strong> ${course ? course.name : 'N/A'}</p>
                        <p><strong>Status:</strong> <span class="badge ${getStatusColor(student.status)}">${student.status}</span></p>
                        <p><strong>Situa√ß√£o Financeira:</strong> <span class="badge ${statusClass}">${financialStatus}</span></p>
                        <p><strong>Total Pago:</strong> R$ ${totalPaid.toFixed(2)}</p>
                        <p><strong>Pendente:</strong> R$ ${totalPending.toFixed(2)}</p>
                    </div>
                `;
                resultsContainer.innerHTML += card;
            });
        }

        function showClientFinancialDetails(studentId) {
            const student = systemData.students.find(s => s.id === studentId);
            const course = systemData.courses.find(c => c.id === student.courseId);
            const payments = systemData.payments.filter(p => p.studentId === studentId);
            
            document.getElementById('financialModalTitle').textContent = `Situa√ß√£o Financeira - ${student.name}`;
            
            const totalPaid = payments.filter(p => p.status === 'pago').reduce((sum, p) => sum + parseFloat(p.amount), 0);
            const totalPending = payments.filter(p => p.status === 'pendente').reduce((sum, p) => sum + parseFloat(p.amount), 0);
            const totalOverdue = payments.filter(p => p.status === 'vencido').reduce((sum, p) => sum + parseFloat(p.amount), 0);
            const totalCanceled = payments.filter(p => p.status === 'cancelado').reduce((sum, p) => sum + parseFloat(p.amount), 0);
            
            let html = `
                <div class="financial-details">
                    <div class="financial-status">
                        <div class="financial-summary-card paid">
                            <h4>‚úÖ Total Pago</h4>
                            <div class="stat-number">R$ ${totalPaid.toFixed(2)}</div>
                        </div>
                        <div class="financial-summary-card pending">
                            <h4>‚è≥ Total Pendente</h4>
                            <div class="stat-number">R$ ${totalPending.toFixed(2)}</div>
                        </div>
                        <div class="financial-summary-card overdue">
                            <h4>‚ö†Ô∏è Total Vencido</h4>
                            <div class="stat-number">R$ ${totalOverdue.toFixed(2)}</div>
                        </div>
                    </div>
                    
                    <div style="margin: 20px 0;">
                        <p><strong>Aluno:</strong> ${student.name} (${student.ra})</p>
                        <p><strong>Curso:</strong> ${course ? course.name : 'N/A'}</p>
                        <p><strong>Status do Aluno:</strong> <span class="badge ${getStatusColor(student.status)}">${student.status}</span></p>
                        <p><strong>Total de Pagamentos:</strong> ${payments.length}</p>
                    </div>
                    
                    <div class="financial-actions">
                        <button class="btn btn-success" onclick="addPaymentForStudent(${studentId})">‚ûï Novo Pagamento</button>
                        <button class="btn btn-info" onclick="generateStudentFinancialReport(${studentId})">üìä Relat√≥rio</button>
                        <button class="btn btn-warning" onclick="sendPaymentReminder(${studentId})">üìß Lembrete</button>
                    </div>
                    
                    <h4>üí≥ Hist√≥rico de Pagamentos</h4>
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Data Venc.</th>
                                <th>Tipo</th>
                                <th>Valor</th>
                                <th>Status</th>
                                <th>Data Pgto</th>
                                <th>A√ß√µes</th>
                            </tr>
                        </thead>
                        <tbody>
            `;
            
            payments.sort((a, b) => new Date(b.dueDate) - new Date(a.dueDate)).forEach(payment => {
                html += `
                    <tr>
                        <td>${formatDate(payment.dueDate)}</td>
                        <td>${payment.type}</td>
                        <td>R$ ${parseFloat(payment.amount).toFixed(2)}</td>
                        <td><span class="badge ${getStatusColor(payment.status)}">${payment.status}</span></td>
                        <td>${payment.paymentDate ? formatDate(payment.paymentDate) : '-'}</td>
                        <td class="btn-group">
                            ${payment.status !== 'pago' ? `<button class="btn btn-success btn-sm" onclick="markAsPaid(${payment.id})">üí≥</button>` : ''}
                            <button class="btn btn-warning btn-sm" onclick="editPayment(${payment.id})">‚úèÔ∏è</button>
                            <button class="btn btn-danger btn-sm" onclick="deletePayment(${payment.id})">üóëÔ∏è</button>
                        </td>
                    </tr>
                `;
            });
            
            html += '</tbody></table></div>';
            
            document.getElementById('clientFinancialContent').innerHTML = html;
            document.getElementById('clientFinancialModal').style.display = 'block';
            setTimeout(() => document.getElementById('clientFinancialModal').classList.add('show'), 10);
        }

        // Sistema de Pagamentos
        function loadPaymentsData() {
            const courseSelect = document.getElementById('paymentCourseFilter');
            
            // Popular filtro de cursos
            courseSelect.innerHTML = '<option value="">Todos os Cursos</option>';
            systemData.courses.forEach(course => {
                courseSelect.innerHTML += `<option value="${course.id}">${course.name}</option>`;
            });
            
            displayPayments(systemData.payments);
        }

        function displayPayments(payments) {
            const tbody = document.getElementById('paymentsTableBody');
            tbody.innerHTML = '';
            
            payments.sort((a, b) => new Date(b.dueDate) - new Date(a.dueDate)).forEach(payment => {
                const student = systemData.students.find(s => s.id === payment.studentId);
                const course = systemData.courses.find(c => c.id === payment.courseId);
                
                const row = `
                    <tr>
                        <td>${payment.id}</td>
                        <td>${student ? `${student.name} (${student.ra})` : 'N/A'}</td>
                        <td>${course ? course.name : 'N/A'}</td>
                        <td>${payment.type}</td>
                        <td>R$ ${parseFloat(payment.amount).toFixed(2)}</td>
                        <td>${formatDate(payment.dueDate)}</td>
                        <td><span class="badge ${getStatusColor(payment.status)}">${payment.status}</span></td>
                        <td class="btn-group">
                            ${payment.status !== 'pago' ? `<button class="btn btn-success btn-sm" onclick="markAsPaid(${payment.id})">üí≥</button>` : ''}
                            <button class="btn btn-warning btn-sm" onclick="editPayment(${payment.id})">‚úèÔ∏è</button>
                            <button class="btn btn-danger btn-sm" onclick="deletePayment(${payment.id})">üóëÔ∏è</button>
                        </td>
                    </tr>
                `;
                tbody.innerHTML += row;
            });
        }

        function filterPayments() {
            const statusFilter = document.getElementById('paymentStatusFilter').value;
            const periodFilter = document.getElementById('paymentPeriodFilter').value;
            const courseFilter = document.getElementById('paymentCourseFilter').value;
            
            let filteredPayments = systemData.payments;
            
            if (statusFilter) {
                filteredPayments = filteredPayments.filter(p => p.status === statusFilter);
            }
            
            if (periodFilter) {
                filteredPayments = filteredPayments.filter(p => {
                    const paymentMonth = new Date(p.dueDate).toISOString().substring(0, 7);
                    return paymentMonth === periodFilter;
                });
            }
            
            if (courseFilter) {
                filteredPayments = filteredPayments.filter(p => p.courseId === parseInt(courseFilter));
            }
            
            displayPayments(filteredPayments);
        }

        function markAsPaid(paymentId) {
            const payment = systemData.payments.find(p => p.id === paymentId);
            if (!payment) return;
            
            payment.status = 'pago';
            payment.paymentDate = new Date().toISOString();
            
            saveSystemData();
            syncWithSheets('payments', payment);
            loadPaymentsData();
            loadFinancialData();
            loadDashboardData();
            showMessage('Pagamento marcado como pago!', 'success');
        }

        function updatePaymentStatuses() {
            const today = new Date();
            today.setHours(0, 0, 0, 0);
            
            systemData.payments.forEach(payment => {
                if (payment.status === 'pendente') {
                    const dueDate = new Date(payment.dueDate);
                    dueDate.setHours(0, 0, 0, 0);
                    
                    if (dueDate < today) {
                        payment.status = 'vencido';
                    }
                }
            });
            
            saveSystemData();
        }

        // Sistema de Turmas - Chamada
        function loadClassAttendanceOptions() {
            const classSelect = document.getElementById('attendanceClassSelect');
            const dateInput = document.getElementById('attendanceDate');
            
            classSelect.innerHTML = '<option value="">Selecione uma turma</option>';
            systemData.classes.forEach(cls => {
                classSelect.innerHTML += `<option value="${cls.id}">${cls.name}</option>`;
            });
            
            dateInput.value = new Date().toISOString().split('T')[0];
        }

        function loadClassAttendance() {
            const classId = document.getElementById('attendanceClassSelect').value;
            const date = document.getElementById('attendanceDate').value;
            const grid = document.getElementById('classAttendanceGrid');
            
            if (!classId || !date) {
                grid.innerHTML = '<p>Selecione uma turma e data</p>';
                return;
            }
            
            const students = systemData.students.filter(s => s.classId === parseInt(classId) && s.status === 'ativo');
            
            if (students.length === 0) {
                grid.innerHTML = '<p>Nenhum aluno encontrado nesta turma</p>';
                return;
            }
            
            grid.innerHTML = '';
            students.forEach(student => {
                const attendance = systemData.attendance.find(a => 
                    a.studentId === student.id && 
                    a.date === date && 
                    a.classId === parseInt(classId)
                );
                
                const status = attendance ? attendance.status : '';
                
                const card = `
                    <div class="attendance-student" data-student-id="${student.id}">
                        <div>
                            <strong>${student.name}</strong>
                            <br>
                            <small>RA: ${student.ra}</small>
                        </div>
                        <div>
                            <button class="attendance-btn present ${status === 'presente' ? 'active' : ''}" 
                                    onclick="markAttendance(${student.id}, 'presente')">
                                ‚úÖ Presente
                            </button>
                            <button class="attendance-btn absent ${status === 'ausente' ? 'active' : ''}" 
                                    onclick="markAttendance(${student.id}, 'ausente')">
                                ‚ùå Ausente
                            </button>
                        </div>
                    </div>
                `;
                grid.innerHTML += card;
            });
        }

        function markAttendance(studentId, status) {
            const classId = parseInt(document.getElementById('attendanceClassSelect').value);
            const date = document.getElementById('attendanceDate').value;
            
            // Remover registro anterior se existir
            const existingIndex = systemData.attendance.findIndex(a => 
                a.studentId === studentId && a.date === date && a.classId === classId
            );
            
            if (existingIndex !== -1) {
                systemData.attendance.splice(existingIndex, 1);
            }
            
            // Adicionar novo registro
            systemData.attendance.push({
                id: Date.now(),
                studentId: studentId,
                classId: classId,
                date: date,
                status: status,
                timestamp: new Date().toISOString()
            });
            
            // Atualizar UI
            const studentCard = document.querySelector(`[data-student-id="${studentId}"]`);
            studentCard.querySelectorAll('.attendance-btn').forEach(btn => btn.classList.remove('active'));
            studentCard.querySelector(`.attendance-btn.${status === 'presente' ? 'present' : 'absent'}`).classList.add('active');
        }

        function saveClassAttendance() {
            saveSystemData();
            syncWithSheets('attendance', systemData.attendance);
            showMessage('Chamada salva com sucesso!', 'success');
        }

        function takeClassAttendance(classId) {
            document.getElementById('attendanceClassSelect').value = classId;
            switchClassTab('attendance');
            loadClassAttendance();
        }

        // Fun√ß√µes auxiliares
        function generateRA() {
            const year = new Date().getFullYear();
            const sequence = (systemData.students.length + 1).toString().padStart(4, '0');
            return `${year}${sequence}`;
        }

        function getStatusColor(status) {
            const colors = {
                'ativo': 'success',
                'inativo': 'secondary',
                'suspenso': 'warning',
                'trancado': 'info',
                'cancelado': 'danger',
                'vencido': 'danger',
                'pago': 'success',
                'pendente': 'warning',
                'ativa': 'success',
                'completa': 'warning',
                'encerrada': 'secondary'
            };
            return colors[status] || 'secondary';
        }

        function formatDate(dateString) {
            if (!dateString) return 'N/A';
            const date = new Date(dateString);
            return date.toLocaleDateString('pt-BR');
        }

        function isCurrentMonth(dateString) {
            if (!dateString) return false;
            const date = new Date(dateString);
            const now = new Date();
            return date.getMonth() === now.getMonth() && date.getFullYear() === now.getFullYear();
        }

        function saveSystemData() {
            localStorage.setItem('gamecreators_system_data', JSON.stringify(systemData));
        }

        function showMessage(message, type = 'info') {
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => notification.classList.add('show'), 100);
            setTimeout(() => {
                notification.classList.remove('show');
                setTimeout(() => document.body.removeChild(notification), 300);
            }, 3000);
        }

        function filterStudents() {
            const statusFilter = document.getElementById('studentStatusFilter').value;
            const courseFilter = document.getElementById('studentCourseFilter').value;
            const classFilter = document.getElementById('studentClassFilter').value;
            
            let filteredStudents = systemData.students;
            
            if (statusFilter) {
                filteredStudents = filteredStudents.filter(s => s.status === statusFilter);
            }
            
            if (courseFilter) {
                filteredStudents = filteredStudents.filter(s => s.courseId === parseInt(courseFilter));
            }
            
            if (classFilter) {
                filteredStudents = filteredStudents.filter(s => s.classId === parseInt(classFilter));
            }
            
            const tbody = document.getElementById('studentsTableBody');
            tbody.innerHTML = '';
            
            filteredStudents.forEach(student => {
                const course = systemData.courses.find(c => c.id === student.courseId);
                const studentClass = systemData.classes.find(c => c.id === student.classId);
                const progress = getStudentProgress(student.id);
                
                const row = `
                    <tr>
                        <td>${student.ra}</td>
                        <td>${student.name}</td>
                        <td>${student.email}</td>
                        <td>${course ? course.name : 'N/A'}</td>
                        <td>${studentClass ? studentClass.name : 'N/A'}</td>
                        <td><span class="badge ${getStatusColor(student.status)}">${student.status}</span></td>
                        <td>
                            <div class="progress-bar" style="height: 15px;">
                                <div class="progress-fill" style="width: ${progress}%">${progress}%</div>
                            </div>
                        </td>
                        <td>${formatDate(student.enrollmentDate)}</td>
                        <td class="btn-group">
                            <button class="btn btn-info btn-sm" onclick="viewStudentProgress(${student.id})">üìà</button>
                            <button class="btn btn-success btn-sm" onclick="viewStudent(${student.id})">üëÅÔ∏è</button>
                            <button class="btn btn-warning btn-sm" onclick="editStudent(${student.id})">‚úèÔ∏è</button>
                            <button class="btn btn-danger btn-sm" onclick="deleteStudent(${student.id})">üóëÔ∏è</button>
                        </td>
                    </tr>
                `;
                tbody.innerHTML += row;
            });
        }

        // Mais fun√ß√µes espec√≠ficas...
        function loadEvaluationsData() {
            const tbody = document.getElementById('evaluationsTableBody');
            tbody.innerHTML = '';
            
            systemData.evaluations.forEach(evaluation => {
                const course = systemData.courses.find(c => c.id === evaluation.courseId);
                const evalClass = systemData.classes.find(c => c.id === evaluation.classId);
                const row = `
                    <tr>
                        <td>${evaluation.name}</td>
                        <td>${course ? course.name : 'N/A'}</td>
                        <td>${evalClass ? evalClass.name : 'N/A'}</td>
                        <td>${formatDate(evaluation.date)}</td>
                        <td>${evaluation.type}</td>
                        <td><span class="badge ${getStatusColor(evaluation.status)}">${evaluation.status}</span></td>
                        <td class="btn-group">
                            <button class="btn btn-info btn-sm" onclick="viewEvaluation(${evaluation.id})">üëÅÔ∏è</button>
                            <button class="btn btn-warning btn-sm" onclick="editEvaluation(${evaluation.id})">‚úèÔ∏è</button>
                            <button class="btn btn-danger btn-sm" onclick="deleteEvaluation(${evaluation.id})">üóëÔ∏è</button>
                        </td>
                    </tr>
                `;
                tbody.innerHTML += row;
            });
        }

        function loadEvaluationClasses() {
            const courseId = document.getElementById('evaluationCourse').value;
            const classSelect = document.getElementById('evaluationClass');
            
            classSelect.innerHTML = '<option value="">Selecione uma turma</option>';
            if (courseId) {
                const courseclasses = systemData.classes.filter(c => c.courseId === parseInt(courseId));
                courseclasses.forEach(cls => {
                    classSelect.innerHTML += `<option value="${cls.id}">${cls.name}</option>`;
                });
            }
        }

        // Integra√ß√£o com Google Sheets e outras fun√ß√µes...
        function updateConnectionStatus() {
            const statusElement = document.getElementById('connectionStatus');
            const iconElement = document.getElementById('sheetsStatusIcon');
            
            if (systemData.sheetsConfig && systemData.sheetsConfig.connected) {
                statusElement.className = 'connection-status connected';
                statusElement.innerHTML = '‚úÖ Conectado ao Sheets';
                iconElement.textContent = '‚úÖ';
            } else {
                statusElement.className = 'connection-status disconnected';
                statusElement.innerHTML = '‚ö†Ô∏è Desconectado';
                iconElement.textContent = '‚ö†Ô∏è';
            }
        }

        function updateSheetsStatus() {
            const statusElement = document.getElementById('sheetsStatus');
            
            if (systemData.sheetsConfig && systemData.sheetsConfig.connected) {
                statusElement.className = 'sheets-status connected';
                statusElement.innerHTML = '<span>‚úÖ</span><span>Conectado</span>';
            } else {
                statusElement.className = 'sheets-status disconnected';
                statusElement.innerHTML = '<span>‚ö†Ô∏è</span><span>N√£o conectado</span>';
            }
        }

        function testSheetsConnection() {
            const id = document.getElementById('sheetsId').value;
            const url = document.getElementById('sheetsUrl').value;
            
            if (!id || !url) {
                showMessage('Preencha o ID e URL da planilha', 'warning');
                return;
            }
            
            // Simula√ß√£o de teste de conex√£o
            setTimeout(() => {
                showMessage('Conex√£o testada com sucesso!', 'success');
                updateSheetsStatus();
            }, 1000);
        }

        function syncWithSheets(dataType, data) {
            if (!systemData.sheetsConfig || !systemData.sheetsConfig.connected) {
                return;
            }
            
            console.log(`Sincronizando ${dataType} com Google Sheets:`, data);
            showMessage(`Dados sincronizados com Google Sheets!`, 'info');
        }

        function exportData() {
            const dataToExport = {
                students: systemData.students,
                courses: systemData.courses,
                classes: systemData.classes,
                payments: systemData.payments,
                attendance: systemData.attendance,
                evaluations: systemData.evaluations,
                modules: systemData.modules,
                studentProgress: systemData.studentProgress,
                exportDate: new Date().toISOString()
            };
            
            const dataStr = JSON.stringify(dataToExport, null, 2);
            const dataBlob = new Blob([dataStr], {type: 'application/json'});
            
            const link = document.createElement('a');
            link.href = URL.createObjectURL(dataBlob);
            link.download = `gamecreators_backup_${new Date().toISOString().split('T')[0]}.json`;
            link.click();
            
            showMessage('Backup exportado com sucesso!', 'success');
        }

        // Fun√ß√µes placeholder para funcionalidades futuras
        function viewStudent(id) { showMessage('Fun√ß√£o de visualiza√ß√£o em desenvolvimento', 'info'); }
        function editStudent(id) { showMessage('Fun√ß√£o de edi√ß√£o em desenvolvimento', 'info'); }
        function deleteStudent(id) { 
            if (confirm('Tem certeza que deseja excluir este aluno?')) {
                systemData.students = systemData.students.filter(s => s.id !== id);
                systemData.studentProgress = systemData.studentProgress.filter(p => p.studentId !== id);
                saveSystemData();
                loadStudentsData();
                showMessage('Aluno exclu√≠do com sucesso!', 'success');
            }
        }

        function viewClass(id) { showMessage('Fun√ß√£o de visualiza√ß√£o em desenvolvimento', 'info'); }
        function editClass(id) { showMessage('Fun√ß√£o de edi√ß√£o em desenvolvimento', 'info'); }
        function deleteClass(id) {
            if (confirm('Tem certeza que deseja excluir esta turma?')) {
                systemData.classes = systemData.classes.filter(c => c.id !== id);
                saveSystemData();
                loadClassesData();
                showMessage('Turma exclu√≠da com sucesso!', 'success');
            }
        }

        function viewCourse(id) { showMessage('Fun√ß√£o de visualiza√ß√£o em desenvolvimento', 'info'); }
        function editCourse(id) { showMessage('Fun√ß√£o de edi√ß√£o em desenvolvimento', 'info'); }
        function deleteCourse(id) {
            if (confirm('Tem certeza que deseja excluir este curso?')) {
                systemData.courses = systemData.courses.filter(c => c.id !== id);
                saveSystemData();
                loadCoursesData();
                showMessage('Curso exclu√≠do com sucesso!', 'success');
            }
        }

        function viewUser(id) { showMessage('Fun√ß√£o de visualiza√ß√£o em desenvolvimento', 'info'); }
        function editUser(id) { showMessage('Fun√ß√£o de edi√ß√£o em desenvolvimento', 'info'); }
        function deleteUser(id) {
            if (currentUser && currentUser.id === id) {
                showMessage('N√£o √© poss√≠vel excluir o usu√°rio logado!', 'error');
                return;
            }
            if (confirm('Tem certeza que deseja excluir este usu√°rio?')) {
                systemData.users = systemData.users.filter(u => u.id !== id);
                saveSystemData();
                loadUsersData();
                showMessage('Usu√°rio exclu√≠do com sucesso!', 'success');
            }
        }

        function editPayment(id) { showMessage('Fun√ß√£o de edi√ß√£o em desenvolvimento', 'info'); }
        function deletePayment(id) {
            if (confirm('Tem certeza que deseja excluir este pagamento?')) {
                systemData.payments = systemData.payments.filter(p => p.id !== id);
                saveSystemData();
                loadPaymentsData();
                showMessage('Pagamento exclu√≠do com sucesso!', 'success');
            }
        }

        function viewEvaluation(id) { showMessage('Fun√ß√£o de visualiza√ß√£o em desenvolvimento', 'info'); }
        function editEvaluation(id) { showMessage('Fun√ß√£o de edi√ß√£o em desenvolvimento', 'info'); }
        function deleteEvaluation(id) {
            if (confirm('Tem certeza que deseja excluir esta avalia√ß√£o?')) {
                systemData.evaluations = systemData.evaluations.filter(e => e.id !== id);
                saveSystemData();
                loadEvaluationsData();
                showMessage('Avalia√ß√£o exclu√≠da com sucesso!', 'success');
            }
        }

        // Fun√ß√µes de aulas no modal de m√≥dulo
        function addLessonInput() {
            const container = document.getElementById('lessonsContainer');
            const newInput = document.createElement('div');
            newInput.className = 'lesson-input-group';
            
            newInput.innerHTML = `
                <input type="text" placeholder="Nome da aula" class="lesson-name">
                <input type="number" placeholder="Dura√ß√£o (min)" class="lesson-duration">
                <button type="button" onclick="removeLessonInput(this)" class="btn btn-danger btn-sm">‚ùå</button>
            `;
            
            container.appendChild(newInput);
        }

        function removeLessonInput(button) {
            button.parentElement.remove();
        }

        // Event listeners para clique fora dos modals
        window.onclick = function(event) {
            const modals = document.querySelectorAll('.modal');
            modals.forEach(modal => {
                if (event.target === modal) {
                    modal.classList.remove('show');
                    setTimeout(() => modal.style.display = 'none', 300);
                }
            });
        }
